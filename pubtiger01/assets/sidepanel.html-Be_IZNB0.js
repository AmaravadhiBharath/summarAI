import{c as p,r as s,a as he,j as e,s as xt,d as ut,l as gt,z as P,b as pt,R as ft,F as yt}from"./createLucideIcon-CfY4lJMg.js";import{c as h,T as b,C as bt,B as S,m as jt}from"./chevron-down-C5WHW-bt.js";import{s as vt,c as wt,a as Nt,g as kt,A as $e,M as Ct,R as He,b as St,d as zt}from"./firebase-extension-C89zkgnU.js";const _t=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],te=p("arrow-right",_t);const Mt=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Te=p("book",Mt);const Tt=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Y=p("check",Tt);const At=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ae=p("circle-alert",At);const It=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ie=p("circle-question-mark",It);const Pt=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ue=p("copy",Pt);const Et=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],De=p("ellipsis-vertical",Et);const Lt=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Pe=p("external-link",Lt);const Ft=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Rt=p("file-spreadsheet",Ft);const $t=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ht=p("file-text",$t);const Ut=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Dt=p("flag",Ut);const Gt=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Ee=p("history",Gt);const qt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],de=p("info",qt);const Ot=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Bt=p("list",Ot);const Wt=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Le=p("loader-circle",Wt);const Vt=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Yt=p("log-out",Vt);const Jt=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Kt=p("message-square",Jt);const Xt=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ge=p("send",Xt);const Qt=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Zt=p("settings",Qt);const es=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],ts=p("text-align-start",es);const ss=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],xe=p("thumbs-up",ss);const as=[["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}],["path",{d:"M17 14V2",key:"8ymqnk"}]],qe=p("thumbs-down",as);const rs=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ns=p("user",rs);const os=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Fe=p("users",os);const is=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],ls=p("volume-2",is);const cs=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Oe=p("x",cs),ds="https://script.google.com/macros/s/AKfycbxrlK_jHWJguJ1sCHYEwmpllj8nR8uuVoiWYe2JF8RiPpvLy_vmGJTUMpoX2ZWKPwTMLA/exec",ms=({open:n,onOpenChange:r,userEmail:c})=>{const[l,m]=s.useState(1),[v,a]=s.useState(null),[o,d]=s.useState({}),[f,k]=s.useState(!1),[A,j]=s.useState(0),I=he.useRef(!1);s.useEffect(()=>{n?(l===0&&m(1),a(null),d({}),k(!1)):I.current=!1},[n]),s.useEffect(()=>{(async()=>{const T=(await chrome.storage.local.get(["summarizeCount","pulseCheckDismissed","pulseCheckDismissedFinal"])).summarizeCount||0;j(T)})();const u=g=>{if(g.summarizeCount){const T=g.summarizeCount.newValue;j(T)}};return chrome.storage.onChanged.addListener(u),()=>chrome.storage.onChanged.removeListener(u)},[]);const C=()=>{r(!1),I.current&&(A>=4?chrome.storage.local.set({pulseCheckDismissed:!0,pulseCheckDismissedFinal:!0}):chrome.storage.local.set({pulseCheckDismissed:!0})),I.current=!1},w=N=>{a(N),m(2)},y=(N,u)=>{d(g=>({...g,[N]:u}))},R=async()=>{if(f)return;k(!0);const N={timestamp:new Date().toISOString(),rating:v,email:c||"anonymous",...o};try{fetch(ds,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)})}catch{}m(3)},D=()=>{m(1),a(null),d({}),k(!1)};if(!n)return null;const E=v==="Game Changer"||v==="Useful";return e.jsx("div",{className:"popup-content absolute bottom-full left-1/2 -translate-x-1/2 mb-2 z-[200] w-full",onClick:N=>N.stopPropagation(),children:e.jsxs("div",{className:"w-full bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center px-4 pt-3 pb-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-black uppercase tracking-wider",children:"Pulse Check"}),e.jsx("button",{onClick:C,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Oe,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"px-5 pb-5 pt-1",children:[l===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 text-center",children:"What is your initial feeling?"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>w("Game Changer"),className:"flex flex-col items-center justify-center gap-1 p-3 rounded-xl border border-gray-100 hover:border-black hover:bg-gray-50 transition-all group",children:[e.jsx("span",{className:"text-xl group-hover:scale-110 transition-transform",children:"ðŸ¤©"}),e.jsx("span",{className:"text-xs font-medium text-gray-600 group-hover:text-black",children:"Game Changer"})]}),e.jsxs("button",{onClick:()=>w("Useful"),className:"flex flex-col items-center justify-center gap-1 p-3 rounded-xl border border-gray-100 hover:border-black hover:bg-gray-50 transition-all group",children:[e.jsx("span",{className:"text-xl group-hover:scale-110 transition-transform",children:"ðŸ™‚"}),e.jsx("span",{className:"text-xs font-medium text-gray-600 group-hover:text-black",children:"Useful"})]}),e.jsxs("button",{onClick:()=>w("Okay"),className:"flex flex-col items-center justify-center gap-1 p-3 rounded-xl border border-gray-100 hover:border-gray-200 hover:bg-gray-50 transition-all group",children:[e.jsx("span",{className:"text-xl group-hover:scale-110 transition-transform",children:"ðŸ˜"}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Okay"})]}),e.jsxs("button",{onClick:()=>w("Not helpful"),className:"flex flex-col items-center justify-center gap-1 p-3 rounded-xl border border-gray-100 hover:border-gray-200 hover:bg-gray-50 transition-all group",children:[e.jsx("span",{className:"text-xl group-hover:scale-110 transition-transform",children:"ðŸ™"}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Not helpful"})]})]})]}),l===2&&e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[E?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Should I invest more time into this?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>y("investTime",!0),className:h("flex-1 py-1.5 text-xs rounded-lg border transition-colors",o.investTime===!0?"bg-black text-white border-black":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:"Yes"}),e.jsx("button",{onClick:()=>y("investTime",!1),className:h("flex-1 py-1.5 text-xs rounded-lg border transition-colors",o.investTime===!1?"bg-gray-800 text-white border-gray-800":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:"No"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Did you wish for this tool before?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>y("wishedBefore",!0),className:h("flex-1 py-1.5 text-xs rounded-lg border transition-colors",o.wishedBefore===!0?"bg-black text-white border-black":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:"Yes"}),e.jsx("button",{onClick:()=>y("wishedBefore",!1),className:h("flex-1 py-1.5 text-xs rounded-lg border transition-colors",o.wishedBefore===!1?"bg-gray-800 text-white border-gray-800":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:"No"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Would you refer this to others?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>y("refer",!0),className:h("flex-1 py-1.5 text-xs rounded-lg border transition-colors",o.refer===!0?"bg-black text-white border-black":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:"Yes"}),e.jsx("button",{onClick:()=>y("refer",!1),className:h("flex-1 py-1.5 text-xs rounded-lg border transition-colors",o.refer===!1?"bg-gray-800 text-white border-gray-800":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:"No"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-700",children:["Share more thoughts? ",e.jsx("span",{className:"text-gray-400 font-normal",children:"(Optional)"})]}),e.jsx("textarea",{className:"w-full text-xs p-2 rounded-lg border border-gray-200 focus:border-black focus:ring-1 focus:ring-black outline-none resize-none bg-gray-50",rows:2,placeholder:"What was your impression?",onChange:N=>y("feedbackText",N.target.value)})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"What went wrong?"}),e.jsx("div",{className:"flex flex-col gap-1.5",children:["Buggy","Confusing","Didn't solve problem"].map(N=>e.jsx("button",{onClick:()=>y("whatWentWrong",N),className:h("w-full text-left px-3 py-2 text-xs rounded-lg border transition-colors",o.whatWentWrong===N?"bg-gray-50 border-gray-300 text-black font-medium":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:N},N))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"One thing to fix?"}),e.jsx("textarea",{className:"w-full text-xs p-2 rounded-lg border border-gray-200 focus:border-black focus:ring-1 focus:ring-black outline-none resize-none bg-gray-50",rows:2,placeholder:"Tell us what to improve...",onChange:N=>y("feedbackText",N.target.value)})]})]}),e.jsx("button",{onClick:R,disabled:f,className:"w-full py-2.5 bg-black hover:bg-gray-800 text-white text-xs font-semibold rounded-xl shadow-sm transition-all active:scale-95 flex items-center justify-center gap-2 mt-2 disabled:opacity-70 disabled:cursor-not-allowed",children:f?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:["Submit Feedback",e.jsx(Ge,{className:"w-3 h-3"})]})})]}),l===3&&e.jsxs("div",{className:"py-6 text-center animate-fade-in",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 text-black rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(xe,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Thank You!"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 mb-6",children:"Your feedback helps us build better."}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:D,className:"w-full py-2.5 bg-black hover:bg-gray-800 text-white text-xs font-semibold rounded-xl shadow-sm transition-all active:scale-95",children:"Submit Another Response"}),e.jsx("button",{onClick:C,className:"w-full py-2.5 bg-white border border-gray-200 hover:bg-gray-50 text-gray-600 text-xs font-semibold rounded-xl transition-all active:scale-95",children:"Close"})]})]})]})]})})},Be=({children:n,header:r})=>e.jsxs("div",{className:"h-screen w-full bg-white text-gray-900 font-sans flex flex-col overflow-hidden",children:[r&&e.jsx("header",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-100 px-4 py-3 flex items-center justify-between",children:r}),e.jsx("main",{className:"flex-1 flex flex-col p-4 relative overflow-hidden",children:n})]}),hs=["Analyzing prompts","Extracting insights","Drafting summary"],xs=["Re-analyzing prompts","Re-extracting insights","Re-drafting summary"],me=({onGenerate:n,state:r,isRegenerating:c=!1,disabled:l=!1,compact:m=!1,isGuest:v=!1})=>{const a=s.useRef(null),o=c?xs:hs,[d,f]=s.useState("paragraph"),[k,A]=s.useState("normal"),[j,I]=s.useState(""),[C,w]=s.useState(0),[y,R]=s.useState(!1),[D,E]=s.useState(0);if(s.useEffect(()=>{if(r==="idle"){E(0),w(0),R(!1);return}if(r==="generating"){w(0),R(!1),E(0);const g=setInterval(()=>{E(U=>U+.1)},100),T=setInterval(()=>{w(U=>U<o.length?U+1:U)},800);return()=>{clearInterval(g),clearInterval(T)}}},[r,o.length]),m&&r==="idle")return e.jsx(b,{content:l?"Not available on this page":"Generate Summary",children:e.jsx("button",{onClick:()=>!l&&n(j,d,k),disabled:l,className:h("w-10 h-10 rounded-full flex items-center justify-center transition-colors group shadow-md",l?"bg-gray-200 cursor-not-allowed":"bg-black hover:bg-gray-800"),children:e.jsx(te,{className:h("w-5 h-5",l?"text-gray-400":"text-white")})})});if(v)return c?null:r==="idle"?e.jsx(b,{content:l?"Not available on this page":"Generate Summary",children:e.jsx("button",{onClick:()=>!l&&n(j,d,k),disabled:l,className:h("absolute right-4 bottom-4 w-12 h-12 rounded-full flex items-center justify-center transition-colors group shadow-lg z-50",l?"bg-gray-200 cursor-not-allowed":"bg-black hover:bg-gray-800"),children:e.jsx(te,{className:h("w-5 h-5",l?"text-gray-400":"text-white")})})}):r==="generating"?e.jsx(b,{content:"Generating...",disabled:!0,children:e.jsx("div",{className:"absolute right-4 bottom-4 w-12 h-12 rounded-full bg-black flex items-center justify-center shadow-lg z-50",children:e.jsx(Le,{className:"w-5 h-5 text-white animate-spin"})})}):null;const N=g=>{if(!g.value.trim()){g.style.height="24px";return}g.style.height="auto";const T=Math.min(g.scrollHeight,120);g.style.height=`${T}px`},u=g=>{I(g.target.value),N(g.target)};return s.useEffect(()=>{a.current&&N(a.current)},[j]),e.jsxs("div",{className:h("relative w-full font-medium text-sm transition-all duration-300 ease-in-out bg-white text-gray-900 border border-gray-200",r==="idle"?"rounded-2xl":"rounded-xl",r==="idle"?"":r==="generating"||y?"min-h-[160px]":"h-12"),children:[r==="idle"&&e.jsxs("div",{className:"flex flex-col p-5 gap-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 p-1 rounded-lg w-fit",children:[e.jsx(b,{content:"Alignment",children:e.jsx("button",{onClick:()=>f("paragraph"),className:h("p-1.5 rounded-md transition-all",d==="paragraph"?"bg-white text-black shadow-sm":"text-gray-400 hover:text-gray-600"),children:e.jsx(ts,{className:"w-4 h-4"})})}),e.jsx(b,{content:"List",children:e.jsx("button",{onClick:()=>f("points"),className:h("p-1.5 rounded-md transition-all",d==="points"?"bg-white text-black shadow-sm":"text-gray-400 hover:text-gray-600"),children:e.jsx(Bt,{className:"w-4 h-4"})})})]}),e.jsxs("div",{className:"w-full relative",children:[e.jsx("textarea",{ref:a,placeholder:"type additional information here",value:j,onChange:u,rows:1,spellCheck:!0,className:"w-full border-none p-0 pr-2 text-base font-medium placeholder:text-gray-300 focus:ring-0 focus:outline-none text-gray-900 bg-transparent resize-none min-h-[24px] max-h-[120px] overflow-y-auto"}),e.jsx("div",{className:"w-full h-px bg-gray-100 mt-3"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>A(g=>g==="professional"?"normal":"professional"),className:h("px-3 py-1.5 rounded-full text-xs font-medium transition-colors",k==="professional"?"bg-gray-200 text-gray-900":"bg-gray-50 text-gray-400 hover:bg-gray-100"),children:"professional"}),e.jsx("button",{onClick:()=>A(g=>g==="creative"?"normal":"creative"),className:h("px-3 py-1.5 rounded-full text-xs font-medium transition-colors",k==="creative"?"bg-gray-200 text-gray-900":"bg-gray-50 text-gray-400 hover:bg-gray-100"),children:"creative"})]}),e.jsx(b,{content:"Generate Summary",children:e.jsx("button",{onClick:()=>n(j,d,k),className:"w-10 h-10 rounded-full bg-black flex items-center justify-center hover:bg-gray-800 transition-colors group shadow-md",children:e.jsx(te,{className:"w-5 h-5 text-white"})})})]})]}),r==="generating"&&e.jsxs("div",{className:"flex flex-col justify-center min-h-[160px] p-6 gap-3 animate-fade-in",children:[o.map((g,T)=>e.jsxs("div",{className:"flex items-center gap-3",children:[T<C?e.jsx("div",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Y,{className:"w-3 h-3 text-green-600"})}):T===C?e.jsx(Le,{className:"w-5 h-5 text-black animate-spin"}):e.jsx("div",{className:"w-5 h-5 rounded-full border border-gray-200"}),e.jsx("span",{className:h("text-sm transition-colors",T<=C?"text-gray-900 font-medium":"text-gray-400"),children:g})]},T)),e.jsxs("div",{className:"absolute bottom-4 right-6 text-xs text-gray-400 font-mono",children:[D.toFixed(1),"s"]})]}),r==="completed"&&e.jsxs("div",{className:"w-full h-full flex flex-col animate-fade-in",children:[!y&&e.jsxs("button",{onClick:()=>R(!0),className:"w-full h-12 flex items-center justify-center gap-2 hover:bg-gray-50 transition-colors rounded-xl",children:[e.jsxs("div",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center",children:[e.jsx(te,{className:"w-3 h-3 text-green-600 -rotate-90"})," "]}),e.jsx("span",{className:"font-medium text-gray-900",children:"Summary Generated"}),e.jsxs("span",{className:"text-[10px] text-gray-400 font-mono ml-1",children:[D.toFixed(1),"s"]})]}),y&&e.jsxs("div",{className:"flex flex-col justify-center min-h-[160px] p-6 gap-3 relative",children:[o.map((g,T)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Y,{className:"w-3 h-3 text-green-600"})}),e.jsx("span",{className:"text-sm text-gray-900 font-medium",children:g})]},T)),e.jsx("button",{onClick:()=>R(!1),className:"absolute top-4 right-4 p-1 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(bt,{className:"w-4 h-4 text-gray-400"})}),e.jsxs("div",{className:"absolute bottom-4 right-6 text-xs text-gray-400 font-mono",children:[D.toFixed(1),"s"]})]})]})]})},us="https://tai-backend.amaravadhibharath.workers.dev",gs=async(n,r,c="auto",l,m,v)=>{try{let a=n;l&&(a=`[User Context/Note: ${l}]

${n}`);const o={"Content-Type":"application/json"};m&&(o.Authorization=`Bearer ${m}`);const d=await fetch(us,{method:"POST",headers:o,body:JSON.stringify({content:a,provider:c,deviceId:v,options:{format:r.format,includeAI:r.includeAI,images:r.images,tone:r.tone}})});if(!d.ok){const k=await d.json();throw new Error(k.error||`Worker Error: ${d.status}`)}const f=await d.json();return f.quotaUsed!==void 0&&f.quotaLimit!==void 0&&chrome.storage.local.set({quotaUsed:f.quotaUsed,quotaLimit:f.quotaLimit}),f.summary}catch(a){throw new Error(a.message||"Failed to connect to Tiger Backend.")}},ps="phc_CnQoAhO7LuIZtFrzKlzsMKL3bVmWtGv4sEUgMFnnM4I",fs="https://us.i.posthog.com";let We=!1,ue=null;const ys=()=>{We=!0},F=async(n,r)=>{if(We)try{const c={api_key:ps,event:n,properties:{distinct_id:ue||"anonymous_user",$lib:"summarai-extension",...r},timestamp:new Date().toISOString()};await fetch(`${fs}/capture/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})}catch{}},bs=(n,r)=>{ue=n,r&&F("$identify",{$set:{email:r}})},js=()=>{ue=null},vs=[{name:"ChatGPT",domain:"chatgpt.com",url:"https://chatgpt.com"},{name:"OpenAI",domain:"openai.com",url:"https://openai.com"},{name:"Google Gemini",domain:"gemini.google.com",url:"https://gemini.google.com"},{name:"Google Labs",domain:"labs.google.com",url:"https://labs.google.com"},{name:"Figma",domain:"figma.com",url:"https://figma.com"},{name:"Visily",domain:"visily.ai",url:"https://visily.ai"},{name:"Uizard",domain:"uizard.io",url:"https://uizard.io"},{name:"UX Magic",domain:"uxmagic.ai",url:"https://uxmagic.ai"},{name:"Banani",domain:"banani.co",url:"https://banani.co"},{name:"Emergent",domain:"app.emergent.sh",url:"https://app.emergent.sh"},{name:"Rocket",domain:"rocket.new",url:"https://rocket.new"},{name:"Lovable",domain:"lovable.dev",url:"https://lovable.dev"},{name:"Bolt",domain:"bolt.new",url:"https://bolt.new"},{name:"Base44",domain:"base44.com",url:"https://base44.com"},{name:"Create XYZ",domain:"create.xyz",url:"https://create.xyz"},{name:"Memex",domain:"memex.tech",url:"https://memex.tech"},{name:"BuildFire",domain:"buildfire.com",url:"https://buildfire.com"},{name:"Glide",domain:"glideapps.com",url:"https://glideapps.com"},{name:"Flatlogic",domain:"flatlogic.com",url:"https://flatlogic.com"},{name:"Retool",domain:"retool.com",url:"https://retool.com"},{name:"UI Bakery",domain:"uibakery.io",url:"https://uibakery.io"},{name:"Zoho",domain:"zoho.com",url:"https://zoho.com"},{name:"Appy Pie",domain:"appypie.com",url:"https://appypie.com"},{name:"Meta AI",domain:"meta.ai",url:"https://meta.ai"}],ws=n=>vs.some(r=>n.includes(r.domain)),Ns=({open:n,onClose:r,summary:c,prompts:l})=>{const[m,v]=s.useState(""),[a,o]=s.useState(!1),[d,f]=s.useState(!1),[k,A]=s.useState(""),[j,I]=s.useState(!1),C=async()=>{if(!m.trim()){A("Please describe what went wrong.");return}f(!0),A("");try{const w={rating:"negative",feedback:m,summary_length:c.length,prompts_length:l.length};a&&(w.summary_text=c,w.input_prompts=l),F("feedback_negative_detailed",w),I(!0),setTimeout(()=>{v(""),o(!1),I(!1),r()},1500)}catch{A("Failed to submit feedback. Please try again.")}finally{f(!1)}};return n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-[200] animate-fade-in",onClick:r}),e.jsx("div",{className:"fixed inset-0 z-[201] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md animate-slide-up-fade",onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-orange-500"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Report Issue"})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-5 space-y-4",children:j?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Thank you!"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your feedback has been submitted."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What went wrong?"}),e.jsx("textarea",{value:m,onChange:w=>{v(w.target.value),A("")},placeholder:"Describe the issue (e.g., summary was inaccurate, missed key points, wrong format...)",className:`w-full h-32 px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-black focus:border-transparent resize-none ${k?"border-red-300":"border-gray-300"}`,autoFocus:!0}),k&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(Ae,{className:"w-4 h-4"}),k]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>o(!a),children:[e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center shrink-0 transition-all ${a?"bg-black border-black":"bg-white border-gray-300"}`,children:a&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Include conversation data for debugging"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will send your input prompts and generated summary to help us improve. Optional."})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-5 border-t border-gray-200",children:[e.jsx(S,{variant:"ghost",onClick:r,disabled:d,children:"Cancel"}),e.jsx(S,{onClick:C,disabled:d,className:"bg-black text-white hover:bg-gray-800",children:d?"Submitting...":"Submit Feedback"})]})]})})]}):null},Re=({label:n,subtext:r,checked:c,onChange:l})=>e.jsxs("div",{className:"flex items-center gap-4 p-2 cursor-pointer group hover:bg-gray-50 rounded-xl transition-colors",onClick:l,children:[e.jsx("div",{className:h("w-5 h-5 rounded-md border flex items-center justify-center transition-all duration-200 shrink-0",c?"bg-black border-black":"bg-white border-gray-300 group-hover:border-gray-400"),children:c&&e.jsx(Y,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})}),e.jsxs("div",{className:"flex flex-col select-none",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:n}),e.jsx("span",{className:"text-xs text-gray-500",children:r})]})]}),ks=({user:n})=>{const[r,c]=s.useState(0),[l,m]=s.useState(n?14:3);return s.useEffect(()=>{chrome.storage.local.get(["quotaUsed","quotaLimit"],a=>{a.quotaUsed!==void 0&&c(a.quotaUsed),a.quotaLimit!==void 0&&m(a.quotaLimit)});const v=a=>{a.quotaUsed&&c(a.quotaUsed.newValue),a.quotaLimit&&m(a.quotaLimit.newValue)};return chrome.storage.onChanged.addListener(v),()=>chrome.storage.onChanged.removeListener(v)},[]),s.useEffect(()=>{m(n?14:3)},[n]),e.jsx(b,{content:`Daily quota: ${r}/${l} used`,side:"bottom",children:e.jsxs("span",{className:"px-2 py-0.5 rounded-md bg-gray-50 text-gray-600 text-[10px] font-semibold border border-gray-200 shadow-sm",children:[r,"/",l]})})},Cs=({summary:n,onRegenerate:r,onReportIssue:c,isRegenerating:l,isGuest:m})=>{const[v,a]=s.useState("idle"),[o,d]=s.useState(!1),[f,k]=s.useState(!1),[A,j]=s.useState(!1),I=()=>{if(o){d(!1);return}d(!0),k(!1),a("good"),F("summary_rated",{rating:"positive",summary_length:n.length}),setTimeout(()=>a("idle"),2e3)},C=()=>{if(f){k(!1);return}k(!0),d(!1),a("bad"),c(),setTimeout(()=>a("idle"),2e3)},w=()=>{navigator.clipboard.writeText(n),a("copied"),setTimeout(()=>a("idle"),2e3)};return e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white rounded-xl border border-gray-100 shadow-lg min-h-[40px]",children:[e.jsx(b,{content:"Good Response",children:e.jsx(S,{variant:"ghost",size:"icon",onClick:I,className:h("h-8 w-8 rounded-lg transition-colors shrink-0 focus:outline-none focus:ring-0",o?"text-black hover:bg-gray-100":"text-gray-500 hover:bg-gray-50"),children:e.jsx(xe,{className:h("w-4 h-4",o&&"fill-current")})})}),v==="good"&&e.jsx("div",{className:"overflow-hidden whitespace-nowrap text-[10px] font-medium text-green-600 px-1 animate-fade-in",children:"Thanks for feedback"}),e.jsx(b,{content:"Bad Response",children:e.jsx(S,{variant:"ghost",size:"icon",onClick:C,className:h("h-8 w-8 rounded-lg transition-colors shrink-0 focus:outline-none focus:ring-0",f?"text-black hover:bg-gray-100":"text-gray-500 hover:bg-gray-50"),children:e.jsx(qe,{className:h("w-4 h-4",f&&"fill-current")})})}),v==="bad"&&e.jsx("div",{className:"overflow-hidden whitespace-nowrap text-[10px] font-medium text-black px-1 animate-fade-in",children:"Thanks for feedback"}),e.jsx("div",{className:"w-px h-4 bg-gray-200 mx-0.5 shrink-0"}),e.jsx(b,{content:"Regenerate",children:e.jsx(S,{variant:"ghost",size:"icon",onClick:r,disabled:l,className:"h-8 w-8 hover:bg-gray-50 rounded-lg text-gray-500 shrink-0 focus:outline-none focus:ring-0",children:e.jsx(He,{className:h("w-4 h-4",l&&"animate-spin text-black")})})}),l&&e.jsx("div",{className:"overflow-hidden whitespace-nowrap text-[10px] font-medium text-gray-500 px-1 animate-fade-in",children:"Regenerating..."}),e.jsx(b,{content:"Copy",children:e.jsx(S,{variant:"ghost",size:"icon",onClick:w,className:"h-8 w-8 hover:bg-gray-50 rounded-lg text-gray-500 shrink-0 focus:outline-none focus:ring-0",children:e.jsx(Ue,{className:"w-4 h-4"})})}),v==="copied"&&e.jsxs("div",{className:"overflow-hidden whitespace-nowrap text-[10px] font-medium text-gray-700 flex items-center gap-1 px-1 animate-fade-in",children:[e.jsx(Y,{className:"w-3 h-3"}),"Copied"]}),v==="doc"&&e.jsxs("div",{className:"overflow-hidden whitespace-nowrap text-[10px] font-medium text-blue-600 flex items-center gap-1 px-1 animate-fade-in",children:[e.jsx(Y,{className:"w-3 h-3"}),"Copied! Paste in Doc"]}),!m&&e.jsxs("div",{className:"relative",children:[e.jsx(b,{content:"More",disabled:A,children:e.jsx(S,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-gray-50 rounded-lg text-gray-500 shrink-0 focus:outline-none focus:ring-0",onClick:()=>j(!A),children:e.jsx(De,{className:"w-4 h-4"})})}),A&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[90]",onClick:()=>j(!1)}),e.jsxs("div",{className:"absolute bottom-full right-0 mb-2 z-[100] w-36 bg-white rounded-xl shadow-xl border border-gray-200 py-1 origin-bottom-right",children:[e.jsxs("button",{className:"w-full px-3 py-2 text-left text-base text-gray-700 hover:bg-gray-50 flex items-center gap-2",onClick:()=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const y=new SpeechSynthesisUtterance(n);y.rate=1,y.pitch=1,window.speechSynthesis.speak(y),P.success("Playing summary...")}else P.error("Text-to-speech not supported");j(!1)},children:[e.jsx(ls,{className:"w-4 h-4"}),"Listen"]}),e.jsxs("button",{className:"w-full px-3 py-2 text-left text-base text-gray-700 hover:bg-gray-50 flex items-center gap-2",onClick:()=>{const y=window.open("","_blank");y&&(y.document.write(`
                                                    <html>
                                                        <head>
                                                            <title>Summary - SummarAI</title>
                                                            <style>
                                                                body { font-family: Arial, sans-serif; padding: 40px; line-height: 1.6; }
                                                                h1 { color: #333; margin-bottom: 20px; }
                                                                p { white-space: pre-wrap; }
                                                            </style>
                                                        </head>
                                                        <body>
                                                            <h1>Summary</h1>
                                                            <p>${n.replace(/\n/g,"<br>")}</p>
                                                        </body>
                                                    </html>
                                                `),y.document.close(),y.print(),P.success("Opening print dialog...")),j(!1)},children:[e.jsx(Ht,{className:"w-4 h-4"}),"PDF"]}),e.jsxs("button",{className:"w-full px-3 py-2 text-left text-base text-gray-700 hover:bg-gray-50 flex items-center gap-2",onClick:()=>{navigator.clipboard.writeText(n),a("doc"),setTimeout(()=>a("idle"),2e3),P.success("Copied! Paste in Google Docs"),j(!1)},children:[e.jsx(Rt,{className:"w-4 h-4"}),"Docs"]}),e.jsxs("button",{className:"w-full px-3 py-2 text-left text-base text-gray-700 hover:bg-gray-50 flex items-center gap-2",onClick:()=>{const y=encodeURIComponent("Summary from SummarAI"),R=encodeURIComponent(n);window.open(`mailto:?subject=${y}&body=${R}`,"_blank"),P.success("Opening email client..."),j(!1)},children:[e.jsx(Ge,{className:"w-4 h-4"}),"Mail"]}),e.jsx("div",{className:"h-px bg-gray-100 my-1"}),e.jsxs("button",{className:"w-full px-3 py-2 text-left text-base text-red-600 hover:bg-red-50 flex items-center gap-2",onClick:()=>{window.open("https://forms.gle/N9VJY9Cb2F8v2VHF6","_blank"),j(!1)},children:[e.jsx(Dt,{className:"w-4 h-4"}),"Report Issue"]})]})]})]})]})})},Ss=()=>{const[n,r]=s.useState("idle"),[c,l]=s.useState(!1),[m,v]=s.useState(!1),[a,o]=s.useState("none"),[d,f]=s.useState(null),[k,A]=s.useState(!1),[j,I]=s.useState(!1),[C,w]=s.useState("TXT"),[y]=s.useState("paragraph"),[R]=s.useState("normal"),[D]=s.useState(""),[E,N]=s.useState("auto"),[u,g]=s.useState(null),[T,U]=s.useState(!1),[ge,J]=s.useState([]),[K,se]=s.useState(!1),[Ve,X]=s.useState(!1),[pe,B]=s.useState(!0),[Ye,fe]=s.useState(!0),[ye,Je]=s.useState(window.innerHeight||800),[Ke,Xe]=s.useState(""),[Qe,be]=s.useState(!1),[Ze,je]=s.useState(0),[G,ae]=s.useState("none"),[ve,we]=s.useState(!1),[Ms,et]=s.useState({imageAnalysis:!0,creativeTone:!0,professionalTone:!0,jsonFormat:!0,xmlFormat:!0}),_=G==="none"?u:G==="guest"?null:{email:"simulated@example.com",id:"simulated-user",name:"Simulated User",picture:""},Ne=G==="none"?T:G==="pro",ke=async()=>{if(!u?.email)return P.error("No email found");try{const t=P.loading("Sending email...");await fetch("https://tai-backend.amaravadhibharath.workers.dev/send-welcome-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u.email,name:u.name})}),P.dismiss(t),P.success("Email sent!")}catch{P.dismiss(),P.error("Failed to send")}},[Ce,tt]=s.useState({x:16,y:window.innerHeight-100}),[re,Se]=s.useState(!1),[ne,st]=s.useState({x:0,y:0}),at=t=>{Se(!0);const i=t.target.closest(".debug-panel")?.getBoundingClientRect();i&&st({x:t.clientX-i.left,y:t.clientY-i.top})};s.useEffect(()=>{if(!re)return;const t=x=>{tt({x:x.clientX-ne.x,y:x.clientY-ne.y})},i=()=>{Se(!1)};return document.addEventListener("mousemove",t),document.addEventListener("mouseup",i),()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i)}},[re,ne]),s.useEffect(()=>{const t=()=>Je(window.innerHeight||800);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),s.useEffect(()=>{const t=vt(i=>{et(i)});return()=>t()},[]),s.useEffect(()=>{u?.email&&wt(u.email).then(t=>{t&&U(!0)})},[u]);const oe=ye<250,rt=ye<150,ie=async()=>{try{const[t]=await chrome.tabs.query({active:!0,currentWindow:!0}),i=t?.url;if(i){const x=ws(i);if(se(x),t.id&&x)try{await chrome.tabs.sendMessage(t.id,{action:"ping"}),X(!0)}catch{t.id&&chrome.tabs.reload(t.id),X(!1)}else X(!1)}else se(!1),X(!1)}catch{se(!1)}finally{fe(!1)}},le=async()=>{try{const[t]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!t?.id){B(!1);return}const i=t.url||"";if(!(i.includes("chatgpt.com")||i.includes("gemini.google.com")||i.includes("claude.ai"))){B(!0);return}const H=await chrome.tabs.sendMessage(t.id,{action:"getPageContent",includeImages:!1});H&&H.error,B(!0)}catch{B(!0)}};s.useEffect(()=>{ys(),setTimeout(()=>{F("extension_opened")},100),chrome.storage.local.get(["isPro"],x=>{U(!!x.isPro)}),ie(),le();const t=()=>{fe(!0),ie(),le()},i=(x,H,q)=>{q.active&&(ie(),le())};return chrome.tabs.onActivated.addListener(t),chrome.tabs.onUpdated.addListener(i),()=>{chrome.tabs.onActivated.removeListener(t),chrome.tabs.onUpdated.removeListener(i)}},[]),s.useEffect(()=>{d&&n==="completed"&&r("idle")},[c,m]),s.useEffect(()=>{const t=xt(async i=>{if(g(i),i){bs(i.id,i.email||void 0),Nt(i);const x=await kt(i.id);x&&x.length>0&&(J(x),chrome.storage.local.set({history:x}))}else js()});return()=>t()},[]),he.useEffect(()=>{chrome.storage.local.get(["summaryType","provider","history"],t=>{t.summaryType&&w(t.summaryType),t.provider&&N(t.provider),t.history&&Array.isArray(t.history)&&J(t.history)})},[]);const ze=async()=>{we(!0);try{await pt(),ae("none"),o("none")}catch(t){P.error(`Login failed: ${t.message}`)}finally{we(!1)}},nt=async()=>{await gt(),o("none")},ot=async()=>{await ut(),ze()},it=t=>{f(t.summary),r("completed"),o("none"),F("history_item_viewed",{item_id:t.id})},ce=t=>{window.open(`https://superextension.in/help?topic=${t}`,"_blank"),o("none"),F("help_action_clicked",{action:t})},Q=async(t,i,x)=>{const H=typeof t=="string"?t:D;let q=i||C;(C==="JSON"||C==="XML")&&q==="paragraph"&&(q=C);const _e=x||R;r("generating");try{const[O]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!O.id)throw new Error("No active tab found");const M=await chrome.tabs.sendMessage(O.id,{action:"getPageContent",includeImages:m});if(!M)throw new Error("Failed to scrape content. Refresh the page and try again.");let L="";M.conversation&&M.conversation.length>0&&(c?L=M.conversation.map(z=>`${z.role==="user"?"User":"AI"}: ${z.text}`).join(`

`):L=M.conversation.filter($=>$.role==="user").map($=>`User: ${$.text}`).join(`

`));const Z=M.conversation&&M.conversation.length>0;if(!L||L.trim().length===0){if(Z&&!c)throw new Error("No user messages found to summarize. Try checking 'Include AI responses'.");L=M.rawText||""}Xe(L);const mt=new Promise(z=>setTimeout(z,2500));let W="";try{const z=await chrome.storage.local.get(["deviceId"]);z.deviceId?W=z.deviceId:(W=`device_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,await chrome.storage.local.set({deviceId:W}))}catch{W=`temp_${Date.now()}`}let Me;if(u)try{const z=await new Promise($=>{chrome.identity.getAuthToken({interactive:!1},ee=>{$(ee||void 0)})});z&&(await fetch(`https://www.googleapis.com/oauth2/v3/tokeninfo?access_token=${z}`)).ok&&(Me=z)}catch{}const[V]=await Promise.all([gs(L,{includeAI:c,format:q,length:"medium",apiKey:"",provider:E,images:m?M.images:void 0,tone:_e},E,H,Me,W),mt]);f(V),r("completed"),I(!1);const ht={id:Date.now(),summary:V,date:new Date().toISOString(),preview:V.slice(0,100)+"...",platform:M.platform||"generic",type:m?"prompt+response+image":c?"prompt+response":"prompt"};chrome.storage.local.get(["history"],z=>{const $=z.history||[],ee=[ht,...$].slice(0,50);chrome.storage.local.set({history:ee}),J(ee)}),chrome.storage.local.get(["summarizeCount"],z=>{const $=z.summarizeCount||0;chrome.storage.local.set({summarizeCount:$+1})}),u&&O.url&&V&&St(u.id,V,O.url),F("summary_generated",{type:C,length:d?d.length:0,is_pro:Ne,include_ai:c,analyze_images:m,format:q,tone:_e,provider:E})}catch(O){const M=O.message||"Failed to generate summary";if(M.includes("Guest Quota Exceeded"))P.error("You've used your 3 free summaries today! Sign in with Google to get 14 daily summaries.",{duration:5e3}),o("profile"),r("error");else if(M.includes("Could not establish connection")||M.includes("Receiving end does not exist")||M.includes("Extension context invalidated")){try{const[L]=await chrome.tabs.query({active:!0,currentWindow:!0});L?.id&&(await chrome.scripting.executeScript({target:{tabId:L.id},files:["src/content.ts"]}),P.success("Connection restored! Please click 'Generate' again."))}catch{confirm("Connection lost. Please reload the page to fix it.")&&chrome.tabs.query({active:!0,currentWindow:!0}).then(([Z])=>{Z.id&&chrome.tabs.reload(Z.id)})}r("idle")}else f(M),r("error");F("generation_failed",{error:M})}finally{I(!1)}},lt=()=>{confirm("Are you sure you want to clear your history?")&&(chrome.storage.local.set({history:[]}),J([]),u&&zt(u.id))},ct=()=>{I(!0),F("regenerate_clicked"),Q()},dt=()=>{f(null),r("idle")};return s.useEffect(()=>{const t=i=>{if(a!=="none"){const x=i.target;!x.closest(".popup-content")&&!x.closest("button")&&o("none")}};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[a]),e.jsxs(Be,{children:[e.jsxs("div",{className:"flex flex-col h-full relative",children:[e.jsxs("div",{className:"flex-1 min-h-[150px] mb-4",children:[e.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden relative border border-gray-200 rounded-2xl",children:[e.jsxs("div",{className:"absolute top-4 right-4 z-50 flex items-center gap-2",children:[(()=>{const t=u?.email==="amaravadhibharath@gmail.com"||u?.email==="bharath.amaravadi@gmail.com";let i="GUEST",x="bg-blue-50 text-blue-600 border-blue-100 hover:bg-blue-100";return G==="none"&&t?(i="ADMIN",x="bg-black text-white border-black hover:bg-gray-800"):Ne?(i="PRO",x="bg-yellow-50 text-yellow-600 border-yellow-100 hover:bg-yellow-100"):_&&(i="FREE",x="bg-green-50 text-green-600 border-green-100 hover:bg-green-100"),e.jsx("span",{className:h("px-1.5 py-0.5 rounded-md text-[10px] font-bold uppercase tracking-wider border shadow-sm cursor-pointer transition-colors",x),onClick:()=>{const H=Ze+1;je(H),H===6&&(o("feedback"),je(0))},children:i})})(),e.jsx(ks,{user:_}),e.jsx(b,{content:"Profile",side:"bottom",disabled:a==="profile",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs font-medium text-gray-600 cursor-pointer hover:bg-gray-300 transition-colors overflow-hidden",onClick:()=>o(a==="profile"?"none":"profile"),children:_&&_.picture?e.jsx("img",{src:_.picture,alt:"Profile",className:"w-full h-full object-cover"}):_&&_.name?_.name[0].toUpperCase():e.jsx(ns,{className:"w-4 h-4"})})}),a==="profile"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>o("none")}),e.jsx("div",{className:"popup-content absolute top-full right-0 mt-2 w-auto min-w-[200px] bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden z-40 flex flex-col py-1 animate-slide-up-fade",onClick:t=>t.stopPropagation(),children:_?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[e.jsx("p",{className:"text-xs font-medium text-gray-900",children:_.name}),e.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:_.email})]}),e.jsxs("button",{onClick:ot,className:"flex items-center gap-2 px-4 py-2.5 text-xs text-gray-700 hover:bg-gray-50 w-full text-left transition-colors",children:[e.jsx(Fe,{className:"w-3.5 h-3.5"}),"Switch Account"]}),e.jsxs("button",{onClick:nt,className:"flex items-center gap-2 px-4 py-2.5 text-xs text-red-600 hover:bg-red-50 w-full text-left transition-colors",children:[e.jsx(Yt,{className:"w-3.5 h-3.5"}),"Logout"]}),e.jsxs("div",{className:"px-4 py-2 border-t border-gray-100",children:[e.jsx("p",{className:"text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"Simulate Mode"}),e.jsx("div",{className:"grid grid-cols-4 gap-1",children:["none","guest","free","pro"].map(t=>e.jsx("button",{onClick:i=>{i.stopPropagation(),ae(t)},className:h("px-1 py-1 text-[9px] font-medium rounded border transition-all text-center",G===t?"bg-black text-white border-black":"bg-white text-gray-600 border-gray-200 hover:border-gray-300"),children:t==="none"?"Real":t.charAt(0).toUpperCase()},t))}),(u?.email==="amaravadhibharath@gmail.com"||u?.email==="bharath.amaravadi@gmail.com")&&e.jsx("button",{onClick:t=>{t.stopPropagation(),ke()},className:"w-full mt-2 py-1 text-[10px] font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded hover:bg-blue-100",children:"Test Welcome Email"})]})]}):e.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[e.jsx("p",{className:"text-xs text-gray-600 text-center",children:"Sign in to sync history and upgrade."}),e.jsx("button",{onClick:ze,disabled:ve,className:"flex items-center justify-center gap-2 w-full py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors text-xs font-medium disabled:opacity-70 disabled:cursor-not-allowed",children:ve?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3.5 h-3.5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-3.5 h-3.5"}),"Sign in with Google"]})}),e.jsx("button",{onClick:()=>window.open("https://accounts.google.com/signin/recovery","_blank"),className:"text-[10px] text-gray-400 hover:text-gray-600 transition-colors text-center w-full",children:"Forgot Password?"})]})})]})]}),d?e.jsxs("div",{className:"flex flex-col h-full relative animate-fade-in",children:[e.jsx("div",{className:"absolute top-4 left-4 z-30",children:e.jsx(b,{content:"Back",side:"bottom",children:e.jsx(S,{variant:"secondary",size:"icon",onClick:dt,className:"rounded-full w-8 h-8 shadow-sm border-gray-200 bg-white/80 backdrop-blur-sm",children:e.jsx($e,{className:"w-4 h-4 text-gray-600"})})})}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-16 bg-white z-20 border-b border-gray-50"}),k?e.jsx("textarea",{value:d,onChange:t=>f(t.target.value),onBlur:()=>A(!1),autoFocus:!0,className:"flex-1 w-full resize-none no-scrollbar p-6 pt-20 pb-4 text-sm leading-relaxed text-gray-700 text-justify font-sans border-none focus:ring-0 outline-none"}):e.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar text-sm leading-relaxed text-gray-700 text-justify font-sans p-6 pt-20 pb-4 space-y-2",children:d.split(`
`).map((t,i)=>{const x=t.trim();return x.startsWith("-")?e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("span",{className:"shrink-0 text-black font-bold",children:"â€¢"}),e.jsx("span",{children:x.substring(1).trim()})]},i):e.jsx("p",{children:t},i)})}),e.jsxs("div",{className:"w-full shrink-0 flex flex-col items-end gap-3 bg-white border-t border-gray-50 pt-4 pb-4 px-4",children:[e.jsx("div",{className:"w-full text-center",children:e.jsxs("span",{className:"text-[10px] text-gray-500 bg-gray-50 px-3 py-1 rounded-full border border-gray-100 opacity-80",children:[E==="google"?"Gemini":E==="openai"?"ChatGPT":"AI"," can make mistakes. Regenerate if needed."]})}),e.jsx(Cs,{summary:d,onRegenerate:ct,onReportIssue:()=>be(!0),isRegenerating:j,isGuest:!_})]})]},"summary-content"):e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full h-full animate-fade-in p-6 pt-16 flex flex-col items-center justify-center gap-4",children:Ye?e.jsx("div",{className:"flex flex-col items-center gap-3 text-center max-w-sm",children:e.jsx("div",{className:"w-6 h-6 border-2 border-gray-100 border-t-gray-400 rounded-full animate-spin"})}):K?pe?e.jsx("span",{className:"text-gray-400 text-sm",children:Ve?"Ready to generate summary":"Ready when you reload the page â†»"}):e.jsxs("div",{className:"flex flex-col items-center gap-3 text-center max-w-sm",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-50 flex items-center justify-center",children:e.jsx(de,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"No conversation found"}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"Start a chat first, then generate a summary."})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col items-center gap-3 text-center max-w-sm",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-50 flex items-center justify-center",children:e.jsx(de,{className:"w-6 h-6 text-amber-600"})}),e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Page not supported"}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"Works on ChatGPT, Gemini, and 20+ AI platforms."}),e.jsxs("button",{onClick:()=>window.open("https://superextension.in/supported-sites.pdf","_blank"),className:"flex items-center gap-2 px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors text-sm font-medium mt-2",children:[e.jsx(Te,{className:"w-4 h-4"}),"View All Supported Sites",e.jsx(Pe,{className:"w-3.5 h-3.5"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Made to tailor your conversation with AI apps"})]})})},"empty-state")}),!_&&!oe&&e.jsx(me,{onGenerate:Q,state:n,isRegenerating:j,disabled:!K||!pe,includeAI:c,analyzeImages:m,isGuest:!0})]}),oe&&e.jsx("div",{className:"absolute bottom-4 right-4 z-[60]",children:e.jsx(me,{onGenerate:Q,state:n,isRegenerating:j,disabled:!K,compact:!0,includeAI:c,analyzeImages:m,isGuest:!_})}),(u?.email==="amaravadhibharath@gmail.com"||u?.email==="bharath.amaravadi@gmail.com")&&e.jsxs("div",{className:"debug-panel fixed z-[60] bg-white/90 backdrop-blur border border-gray-200 p-2 rounded-lg shadow-lg select-none",style:{left:`${Ce.x}px`,top:`${Ce.y}px`,cursor:re?"grabbing":"grab"},onMouseDown:at,children:[e.jsx("p",{className:"text-[9px] font-bold text-gray-500 mb-1",children:"DEBUG MODE"}),e.jsx("div",{className:"flex gap-1",children:["none","guest","free","pro"].map(t=>e.jsx("button",{onClick:()=>ae(t),onMouseDown:i=>i.stopPropagation(),className:h("px-1.5 py-1 text-[9px] font-bold rounded border transition-all",G===t?"bg-red-500 text-white border-red-500":"bg-white text-gray-600 border-gray-200"),children:t==="none"?"OFF":t.toUpperCase()},t))}),e.jsx("div",{className:"mt-1",children:e.jsx("button",{onClick:ke,onMouseDown:t=>t.stopPropagation(),className:"w-full px-1.5 py-1 text-[9px] font-bold rounded border bg-blue-600 text-white border-blue-600 hover:bg-blue-700",children:"TEST EMAIL"})})]})]}),e.jsxs("div",{className:h("shrink-0 flex flex-col gap-4 pb-2 relative z-50",oe&&"gap-0 pb-0"),children:[_&&!d&&e.jsx(me,{onGenerate:Q,state:n,isRegenerating:j,disabled:!K,includeAI:c,analyzeImages:m,isGuest:!1}),!rt&&e.jsxs("div",{className:"space-y-3 px-1",children:[e.jsx(Re,{label:"Include AI responses",subtext:"Summarize the full conversation",checked:c,onChange:()=>{l(t=>!t)}}),e.jsx(Re,{label:"Read images",subtext:"Include visual context",checked:m,onChange:()=>{v(t=>!t)}})]}),e.jsxs("div",{className:"relative flex items-center justify-between pt-2 px-1 flex-nowrap",children:[e.jsxs("div",{className:"relative z-[110]",children:[e.jsx(b,{content:"Metadata",children:e.jsx(S,{variant:"secondary",size:"icon",className:h("relative z-[110] rounded-full w-8 h-8 shadow-sm border-gray-200 text-gray-500 transition-colors hover:bg-gray-50",a==="metadata"&&"bg-gray-100 text-gray-900 border-gray-300"),onClick:()=>o(a==="metadata"?"none":"metadata"),children:e.jsx(de,{className:"w-4 h-4"})})}),a==="metadata"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[90]",onClick:()=>o("none")}),e.jsxs("div",{className:"popup-content absolute bottom-full left-0 mb-2 z-[100] w-[280px] bg-white rounded-2xl shadow-xl border border-gray-200 p-5 text-sm origin-bottom-left",onClick:t=>t.stopPropagation(),children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Metadata"}),e.jsxs("div",{className:"space-y-3 text-gray-600",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Version"}),e.jsx("span",{className:"font-medium text-gray-900 bg-gray-100 px-2 py-0.5 rounded text-xs",children:"Tiger v1.0"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Engine"}),e.jsx("span",{className:"font-medium text-gray-900",children:"GPT-4o-mini"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Status"}),e.jsxs("span",{className:"flex items-center gap-1.5 font-medium text-green-600 text-xs bg-green-50 px-2 py-0.5 rounded-full border border-green-100",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-600 animate-pulse"}),"Active"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Developer"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Bharath Amaravadi"})]}),e.jsx("div",{className:"pt-3 mt-1 border-t border-gray-100",children:e.jsxs("button",{onClick:()=>chrome.tabs.create({url:chrome.runtime.getURL("welcome.html")}),className:"flex items-center justify-center gap-2 w-full py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors font-medium text-xs",children:["Visit Website",e.jsx(Pe,{className:"w-3 h-3"})]})})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-nowrap",children:[e.jsx("div",{className:"relative",children:e.jsx(b,{content:"Feedback",disabled:a==="feedback",children:e.jsx(S,{variant:"secondary",size:"icon",className:"relative z-[110] rounded-full w-8 h-8 shadow-sm border-gray-200 text-gray-500 transition-colors hover:bg-gray-50",onClick:()=>o(a==="feedback"?"none":"feedback"),children:e.jsx(Kt,{className:"w-4 h-4"})})})}),e.jsx(ms,{open:a==="feedback",onOpenChange:t=>o(t?"feedback":"none"),userEmail:_?.email}),e.jsx("div",{className:"relative",children:e.jsx(b,{content:"History",disabled:a==="history",children:e.jsx(S,{variant:"secondary",size:"icon",className:h("relative z-[110] rounded-full w-8 h-8 shadow-sm border-gray-200 text-gray-500 transition-colors hover:bg-gray-50",a==="history"&&"bg-gray-100 text-gray-900 border-gray-300"),onClick:()=>o(a==="history"?"none":"history"),children:e.jsx(Ee,{className:"w-4 h-4"})})})}),a==="history"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[90]",onClick:()=>o("none")}),e.jsx("div",{className:"popup-content absolute bottom-full left-1/2 -translate-x-1/2 mb-2 z-[200] w-full",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"w-full bg-white rounded-2xl shadow-xl border border-gray-200 p-5 text-sm origin-bottom-right",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"History"}),e.jsx("button",{onClick:lt,className:"text-[10px] font-medium text-red-500 hover:text-red-600 transition-colors",children:"Clear all"})]}),e.jsx("div",{className:"space-y-3 max-h-[250px] overflow-y-auto pr-1 custom-scrollbar",children:ge.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-8",children:[e.jsx(Ee,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No history yet"})]}):ge.map(t=>e.jsxs("div",{onClick:()=>it(t),className:"flex flex-col gap-1 p-3 rounded-xl bg-gray-50 border border-gray-100 hover:border-gray-200 transition-colors cursor-pointer shrink-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"font-medium text-xs text-gray-900 line-clamp-1 capitalize",children:t.platform?`${t.platform} | ${t.type} summary`:"Summary"}),e.jsx("span",{className:"text-[10px] text-gray-400 whitespace-nowrap ml-2",children:new Date(t.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("p",{className:"text-[10px] text-gray-500 line-clamp-2 leading-relaxed",children:t.preview})]},t.id))})]})})]}),_&&e.jsxs("div",{className:"relative",children:[e.jsx(b,{content:"Settings",disabled:a==="settings",children:e.jsx(S,{variant:"secondary",size:"icon",className:"relative z-[110] rounded-full w-8 h-8 shadow-sm border-gray-200 text-gray-500 transition-colors hover:bg-gray-50",onClick:()=>o(a==="settings"?"none":"settings"),children:e.jsx(Zt,{className:"w-4 h-4"})})}),a==="settings"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[90]",onClick:()=>o("none")}),e.jsxs("div",{className:"popup-content absolute bottom-full right-0 mb-2 z-[100] w-max bg-white rounded-2xl shadow-xl border border-gray-200 p-5 text-sm origin-bottom-right",onClick:t=>t.stopPropagation(),children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Summary Format"}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"flex flex-col gap-2",children:["TXT","JSON","XML"].map(t=>e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg border border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("div",{className:h("w-4 h-4 rounded-full border flex items-center justify-center transition-all",C===t?"border-black bg-black":"border-gray-300 bg-white"),children:C===t&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"})}),e.jsx("input",{type:"radio",name:"summaryType",value:t,checked:C===t,onChange:()=>{w(t),chrome.storage.local.set({summaryType:t})},className:"hidden"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:t})]},t))})})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{content:"Help",disabled:a==="help",children:e.jsx(S,{variant:"secondary",size:"icon",className:"relative z-[110] rounded-full w-8 h-8 shadow-sm border-gray-200 text-gray-500 transition-colors hover:bg-gray-50",onClick:()=>o(a==="help"?"none":"help"),children:e.jsx(Ie,{className:"w-4 h-4"})})}),a==="help"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[90]",onClick:()=>o("none")}),e.jsxs("div",{className:"popup-content absolute bottom-full right-0 mb-2 z-[100] w-max bg-white rounded-2xl shadow-xl border border-gray-200 p-5 text-sm origin-bottom-right",onClick:t=>t.stopPropagation(),children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Help & Support"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>ce("docs"),className:"flex items-center gap-3 w-full text-left text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Te,{className:"w-4 h-4"}),"Documentation"]}),e.jsxs("button",{onClick:()=>ce("faqs"),className:"flex items-center gap-3 w-full text-left text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Ie,{className:"w-4 h-4"}),"FAQs"]}),e.jsxs("button",{onClick:()=>ce("support"),className:"flex items-center gap-3 w-full text-left text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Ct,{className:"w-4 h-4"}),"Contact Support"]})]})]})]})]})]})]}),a==="feedback"&&e.jsx("div",{className:"fixed inset-0 z-[90]",onClick:()=>o("none")})]})]}),e.jsx(Ns,{open:Qe,onClose:()=>be(!1),summary:d||"",prompts:Ke})]})},zs=({summary:n,onBack:r})=>e.jsx(Be,{children:e.jsx("div",{className:"flex flex-col h-full relative",children:e.jsx("div",{className:"flex-1 min-h-0 mb-4 relative",children:e.jsxs("div",{className:"w-full h-full bg-white rounded-2xl border border-gray-200 shadow-sm flex flex-col overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsx(b,{content:"Back",children:e.jsx(S,{variant:"secondary",size:"icon",onClick:r,className:"rounded-full w-8 h-8 shadow-sm border-gray-200 bg-white/80 backdrop-blur-sm",children:e.jsx($e,{className:"w-4 h-4 text-gray-600"})})})}),e.jsx(jt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex-1 overflow-y-auto text-sm leading-relaxed text-gray-700 text-justify font-sans p-6 pt-16 pb-20",children:n}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex flex-col items-end gap-3 bg-gradient-to-t from-white via-white/95 to-transparent pt-12 pb-4 px-4",children:[e.jsx("div",{className:"w-full text-center",children:e.jsx("span",{className:"text-[10px] text-gray-300 bg-gray-50 px-3 py-1 rounded-full border border-gray-100",children:"AI can make mistakes. Regenerate if needed."})}),e.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white rounded-xl border border-gray-100 shadow-lg",children:[e.jsx(b,{content:"Good Response",children:e.jsx(S,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-gray-50 rounded-lg text-gray-500",onClick:()=>F("feedback_positive",{type:"thumbs_up",length:n.length}),children:e.jsx(xe,{className:"w-4 h-4"})})}),e.jsx(b,{content:"Bad Response",children:e.jsx(S,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-gray-50 rounded-lg text-gray-500",onClick:()=>F("feedback_negative",{type:"thumbs_down",length:n.length}),children:e.jsx(qe,{className:"w-4 h-4"})})}),e.jsx("div",{className:"w-px h-4 bg-gray-200 mx-0.5"}),e.jsx(b,{content:"Regenerate",children:e.jsx(S,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-gray-50 rounded-lg text-gray-500",children:e.jsx(He,{className:"w-4 h-4"})})}),e.jsx(b,{content:"Copy",children:e.jsx(S,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-gray-50 rounded-lg text-gray-500",children:e.jsx(Ue,{className:"w-4 h-4"})})}),e.jsx(b,{content:"More",children:e.jsx(S,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-gray-50 rounded-lg text-gray-500",children:e.jsx(De,{className:"w-4 h-4"})})})]})]})]})})})});function _s(){const[n,r]=s.useState("home"),[c,l]=s.useState(""),m=a=>{l(a),r("summary")},v=()=>{r("home"),l("")};return e.jsx("div",{className:"w-full h-screen bg-white",children:n==="home"?e.jsx(Ss,{onGenerateComplete:m}):e.jsx(zs,{summary:c,onBack:v})})}ft.createRoot(document.getElementById("root")).render(e.jsxs(he.StrictMode,{children:[e.jsx(_s,{}),e.jsx(yt,{position:"top-center",toastOptions:{duration:3e3,style:{background:"#fff",color:"#000",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"12px 16px",fontSize:"14px"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]}));

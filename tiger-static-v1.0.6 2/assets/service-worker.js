chrome.sidePanel&&chrome.sidePanel.setPanelBehavior&&chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}).catch(e=>{});const r=async()=>{try{const e=await fetch("https://tai-backend.amaravadhibharath.workers.dev/selectors");if(e.ok){const a=await e.json();await chrome.storage.local.set({scraping_config:a})}}catch{}};chrome.runtime.onInstalled.addListener(async e=>{const{hasSeenWelcome:a}=await chrome.storage.local.get("hasSeenWelcome");(e.reason==="install"||!a)&&(chrome.tabs.create({url:"welcome.html"}),chrome.storage.local.set({hasSeenWelcome:!0})),r()});chrome.runtime.onStartup.addListener(()=>{r()});chrome.alarms&&(chrome.alarms.create("updateSelectors",{periodInMinutes:1440}),chrome.alarms.onAlarm.addListener(e=>{e.name==="updateSelectors"&&r()}));

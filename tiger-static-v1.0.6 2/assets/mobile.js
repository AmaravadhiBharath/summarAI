function P0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var em={exports:{}},Uo={};var Lv;function wb(){if(Lv)return Uo;Lv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var m in l)m!=="key"&&(u[m]=l[m])}else u=l;return l=u.ref,{$$typeof:s,type:r,key:h,ref:l!==void 0?l:null,props:u}}return Uo.Fragment=t,Uo.jsx=n,Uo.jsxs=n,Uo}var Uv;function Rb(){return Uv||(Uv=1,em.exports=wb()),em.exports}var bt=Rb(),nm={exports:{}},pt={};var kv;function Ib(){if(kv)return pt;kv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),b=Symbol.iterator;function P(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,$={};function mt(M,Y,et){this.props=M,this.context=Y,this.refs=$,this.updater=et||X}mt.prototype.isReactComponent={},mt.prototype.setState=function(M,Y){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Y,"setState")},mt.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function yt(){}yt.prototype=mt.prototype;function ot(M,Y,et){this.props=M,this.context=Y,this.refs=$,this.updater=et||X}var Vt=ot.prototype=new yt;Vt.constructor=ot,J(Vt,mt.prototype),Vt.isPureReactComponent=!0;var ie=Array.isArray;function Pt(){}var N={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function I(M,Y,et){var it=et.ref;return{$$typeof:s,type:M,key:Y,ref:it!==void 0?it:null,props:et}}function V(M,Y){return I(M.type,Y,M.props)}function O(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function L(M){var Y={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(et){return Y[et]})}var w=/\/+/g;function ue(M,Y){return typeof M=="object"&&M!==null&&M.key!=null?L(""+M.key):Y.toString(36)}function Le(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Pt,Pt):(M.status="pending",M.then(function(Y){M.status==="pending"&&(M.status="fulfilled",M.value=Y)},function(Y){M.status==="pending"&&(M.status="rejected",M.reason=Y)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function F(M,Y,et,it,dt){var St=typeof M;(St==="undefined"||St==="boolean")&&(M=null);var xt=!1;if(M===null)xt=!0;else switch(St){case"bigint":case"string":case"number":xt=!0;break;case"object":switch(M.$$typeof){case s:case t:xt=!0;break;case E:return xt=M._init,F(xt(M._payload),Y,et,it,dt)}}if(xt)return dt=dt(M),xt=it===""?"."+ue(M,0):it,ie(dt)?(et="",xt!=null&&(et=xt.replace(w,"$&/")+"/"),F(dt,Y,et,"",function(mr){return mr})):dt!=null&&(O(dt)&&(dt=V(dt,et+(dt.key==null||M&&M.key===dt.key?"":(""+dt.key).replace(w,"$&/")+"/")+xt)),Y.push(dt)),1;xt=0;var Ue=it===""?".":it+":";if(ie(M))for(var ce=0;ce<M.length;ce++)it=M[ce],St=Ue+ue(it,ce),xt+=F(it,Y,et,St,dt);else if(ce=P(M),typeof ce=="function")for(M=ce.call(M),ce=0;!(it=M.next()).done;)it=it.value,St=Ue+ue(it,ce++),xt+=F(it,Y,et,St,dt);else if(St==="object"){if(typeof M.then=="function")return F(Le(M),Y,et,it,dt);throw Y=String(M),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return xt}function tt(M,Y,et){if(M==null)return M;var it=[],dt=0;return F(M,it,"","",function(St){return Y.call(et,St,dt++)}),it}function ct(M){if(M._status===-1){var Y=M._result;Y=Y(),Y.then(function(et){(M._status===0||M._status===-1)&&(M._status=1,M._result=et)},function(et){(M._status===0||M._status===-1)&&(M._status=2,M._result=et)}),M._status===-1&&(M._status=0,M._result=Y)}if(M._status===1)return M._result.default;throw M._result}var Bt=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}},Yt={map:tt,forEach:function(M,Y,et){tt(M,function(){Y.apply(this,arguments)},et)},count:function(M){var Y=0;return tt(M,function(){Y++}),Y},toArray:function(M){return tt(M,function(Y){return Y})||[]},only:function(M){if(!O(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return pt.Activity=T,pt.Children=Yt,pt.Component=mt,pt.Fragment=n,pt.Profiler=l,pt.PureComponent=ot,pt.StrictMode=r,pt.Suspense=_,pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,pt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return N.H.useMemoCache(M)}},pt.cache=function(M){return function(){return M.apply(null,arguments)}},pt.cacheSignal=function(){return null},pt.cloneElement=function(M,Y,et){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var it=J({},M.props),dt=M.key;if(Y!=null)for(St in Y.key!==void 0&&(dt=""+Y.key),Y)!C.call(Y,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&Y.ref===void 0||(it[St]=Y[St]);var St=arguments.length-2;if(St===1)it.children=et;else if(1<St){for(var xt=Array(St),Ue=0;Ue<St;Ue++)xt[Ue]=arguments[Ue+2];it.children=xt}return I(M.type,dt,it)},pt.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},pt.createElement=function(M,Y,et){var it,dt={},St=null;if(Y!=null)for(it in Y.key!==void 0&&(St=""+Y.key),Y)C.call(Y,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(dt[it]=Y[it]);var xt=arguments.length-2;if(xt===1)dt.children=et;else if(1<xt){for(var Ue=Array(xt),ce=0;ce<xt;ce++)Ue[ce]=arguments[ce+2];dt.children=Ue}if(M&&M.defaultProps)for(it in xt=M.defaultProps,xt)dt[it]===void 0&&(dt[it]=xt[it]);return I(M,St,dt)},pt.createRef=function(){return{current:null}},pt.forwardRef=function(M){return{$$typeof:m,render:M}},pt.isValidElement=O,pt.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:ct}},pt.memo=function(M,Y){return{$$typeof:g,type:M,compare:Y===void 0?null:Y}},pt.startTransition=function(M){var Y=N.T,et={};N.T=et;try{var it=M(),dt=N.S;dt!==null&&dt(et,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(Pt,Bt)}catch(St){Bt(St)}finally{Y!==null&&et.types!==null&&(Y.types=et.types),N.T=Y}},pt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},pt.use=function(M){return N.H.use(M)},pt.useActionState=function(M,Y,et){return N.H.useActionState(M,Y,et)},pt.useCallback=function(M,Y){return N.H.useCallback(M,Y)},pt.useContext=function(M){return N.H.useContext(M)},pt.useDebugValue=function(){},pt.useDeferredValue=function(M,Y){return N.H.useDeferredValue(M,Y)},pt.useEffect=function(M,Y){return N.H.useEffect(M,Y)},pt.useEffectEvent=function(M){return N.H.useEffectEvent(M)},pt.useId=function(){return N.H.useId()},pt.useImperativeHandle=function(M,Y,et){return N.H.useImperativeHandle(M,Y,et)},pt.useInsertionEffect=function(M,Y){return N.H.useInsertionEffect(M,Y)},pt.useLayoutEffect=function(M,Y){return N.H.useLayoutEffect(M,Y)},pt.useMemo=function(M,Y){return N.H.useMemo(M,Y)},pt.useOptimistic=function(M,Y){return N.H.useOptimistic(M,Y)},pt.useReducer=function(M,Y,et){return N.H.useReducer(M,Y,et)},pt.useRef=function(M){return N.H.useRef(M)},pt.useState=function(M){return N.H.useState(M)},pt.useSyncExternalStore=function(M,Y,et){return N.H.useSyncExternalStore(M,Y,et)},pt.useTransition=function(){return N.H.useTransition()},pt.version="19.2.3",pt}var zv;function cp(){return zv||(zv=1,nm.exports=Ib()),nm.exports}var Tt=cp();const Nb=P0(Tt);let Db={data:""},Ob=s=>{if(typeof window=="object"){let t=(s?s.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(s||document.head).appendChild(t),t.firstChild}return s||Db},Mb=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Vb=/\/\*[^]*?\*\/|  +/g,Pv=/\n+/g,Zs=(s,t)=>{let n="",r="",l="";for(let u in s){let h=s[u];u[0]=="@"?u[1]=="i"?n=u+" "+h+";":r+=u[1]=="f"?Zs(h,u):u+"{"+Zs(h,u[1]=="k"?"":t)+"}":typeof h=="object"?r+=Zs(h,t?t.replace(/([^,])+/g,m=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,_=>/&/.test(_)?_.replace(/&/g,m):m?m+" "+_:_)):u):h!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),l+=Zs.p?Zs.p(u,h):u+":"+h+";")}return n+(t&&l?t+"{"+l+"}":l)+r},os={},B0=s=>{if(typeof s=="object"){let t="";for(let n in s)t+=n+B0(s[n]);return t}return s},xb=(s,t,n,r,l)=>{let u=B0(s),h=os[u]||(os[u]=(_=>{let g=0,E=11;for(;g<_.length;)E=101*E+_.charCodeAt(g++)>>>0;return"go"+E})(u));if(!os[h]){let _=u!==s?s:(g=>{let E,T,b=[{}];for(;E=Mb.exec(g.replace(Vb,""));)E[4]?b.shift():E[3]?(T=E[3].replace(Pv," ").trim(),b.unshift(b[0][T]=b[0][T]||{})):b[0][E[1]]=E[2].replace(Pv," ").trim();return b[0]})(s);os[h]=Zs(l?{["@keyframes "+h]:_}:_,n?"":"."+h)}let m=n&&os.g?os.g:null;return n&&(os.g=os[h]),((_,g,E,T)=>{T?g.data=g.data.replace(T,_):g.data.indexOf(_)===-1&&(g.data=E?_+g.data:g.data+_)})(os[h],t,r,m),h},Lb=(s,t,n)=>s.reduce((r,l,u)=>{let h=t[u];if(h&&h.call){let m=h(n),_=m&&m.props&&m.props.className||/^go/.test(m)&&m;h=_?"."+_:m&&typeof m=="object"?m.props?"":Zs(m,""):m===!1?"":m}return r+l+(h??"")},"");function Lh(s){let t=this||{},n=s.call?s(t.p):s;return xb(n.unshift?n.raw?Lb(n,[].slice.call(arguments,1),t.p):n.reduce((r,l)=>Object.assign(r,l&&l.call?l(t.p):l),{}):n,Ob(t.target),t.g,t.o,t.k)}let q0,bm,Cm;Lh.bind({g:1});let fs=Lh.bind({k:1});function Ub(s,t,n,r){Zs.p=t,q0=s,bm=n,Cm=r}function fr(s,t){let n=this||{};return function(){let r=arguments;function l(u,h){let m=Object.assign({},u),_=m.className||l.className;n.p=Object.assign({theme:bm&&bm()},m),n.o=/ *go\d+/.test(_),m.className=Lh.apply(n,r)+(_?" "+_:"");let g=s;return s[0]&&(g=m.as||s,delete m.as),Cm&&g[0]&&Cm(m),q0(g,m)}return l}}var kb=s=>typeof s=="function",mh=(s,t)=>kb(s)?s(t):s,zb=(()=>{let s=0;return()=>(++s).toString()})(),j0=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");s=!t||t.matches}return s}})(),Pb=20,hp="default",H0=(s,t)=>{let{toastLimit:n}=s.settings;switch(t.type){case 0:return{...s,toasts:[t.toast,...s.toasts].slice(0,n)};case 1:return{...s,toasts:s.toasts.map(h=>h.id===t.toast.id?{...h,...t.toast}:h)};case 2:let{toast:r}=t;return H0(s,{type:s.toasts.find(h=>h.id===r.id)?1:0,toast:r});case 3:let{toastId:l}=t;return{...s,toasts:s.toasts.map(h=>h.id===l||l===void 0?{...h,dismissed:!0,visible:!1}:h)};case 4:return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(h=>h.id!==t.toastId)};case 5:return{...s,pausedAt:t.time};case 6:let u=t.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(h=>({...h,pauseDuration:h.pauseDuration+u}))}}},lh=[],F0={toasts:[],pausedAt:void 0,settings:{toastLimit:Pb}},ki={},G0=(s,t=hp)=>{ki[t]=H0(ki[t]||F0,s),lh.forEach(([n,r])=>{n===t&&r(ki[t])})},Q0=s=>Object.keys(ki).forEach(t=>G0(s,t)),Bb=s=>Object.keys(ki).find(t=>ki[t].toasts.some(n=>n.id===s)),Uh=(s=hp)=>t=>{G0(t,s)},qb={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},jb=(s={},t=hp)=>{let[n,r]=Tt.useState(ki[t]||F0),l=Tt.useRef(ki[t]);Tt.useEffect(()=>(l.current!==ki[t]&&r(ki[t]),lh.push([t,r]),()=>{let h=lh.findIndex(([m])=>m===t);h>-1&&lh.splice(h,1)}),[t]);let u=n.toasts.map(h=>{var m,_,g;return{...s,...s[h.type],...h,removeDelay:h.removeDelay||((m=s[h.type])==null?void 0:m.removeDelay)||s?.removeDelay,duration:h.duration||((_=s[h.type])==null?void 0:_.duration)||s?.duration||qb[h.type],style:{...s.style,...(g=s[h.type])==null?void 0:g.style,...h.style}}});return{...n,toasts:u}},Hb=(s,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...n,id:n?.id||zb()}),fu=s=>(t,n)=>{let r=Hb(t,s,n);return Uh(r.toasterId||Bb(r.id))({type:2,toast:r}),r.id},Pe=(s,t)=>fu("blank")(s,t);Pe.error=fu("error");Pe.success=fu("success");Pe.loading=fu("loading");Pe.custom=fu("custom");Pe.dismiss=(s,t)=>{let n={type:3,toastId:s};t?Uh(t)(n):Q0(n)};Pe.dismissAll=s=>Pe.dismiss(void 0,s);Pe.remove=(s,t)=>{let n={type:4,toastId:s};t?Uh(t)(n):Q0(n)};Pe.removeAll=s=>Pe.remove(void 0,s);Pe.promise=(s,t,n)=>{let r=Pe.loading(t.loading,{...n,...n?.loading});return typeof s=="function"&&(s=s()),s.then(l=>{let u=t.success?mh(t.success,l):void 0;return u?Pe.success(u,{id:r,...n,...n?.success}):Pe.dismiss(r),l}).catch(l=>{let u=t.error?mh(t.error,l):void 0;u?Pe.error(u,{id:r,...n,...n?.error}):Pe.dismiss(r)}),s};var Fb=1e3,Gb=(s,t="default")=>{let{toasts:n,pausedAt:r}=jb(s,t),l=Tt.useRef(new Map).current,u=Tt.useCallback((T,b=Fb)=>{if(l.has(T))return;let P=setTimeout(()=>{l.delete(T),h({type:4,toastId:T})},b);l.set(T,P)},[]);Tt.useEffect(()=>{if(r)return;let T=Date.now(),b=n.map(P=>{if(P.duration===1/0)return;let X=(P.duration||0)+P.pauseDuration-(T-P.createdAt);if(X<0){P.visible&&Pe.dismiss(P.id);return}return setTimeout(()=>Pe.dismiss(P.id,t),X)});return()=>{b.forEach(P=>P&&clearTimeout(P))}},[n,r,t]);let h=Tt.useCallback(Uh(t),[t]),m=Tt.useCallback(()=>{h({type:5,time:Date.now()})},[h]),_=Tt.useCallback((T,b)=>{h({type:1,toast:{id:T,height:b}})},[h]),g=Tt.useCallback(()=>{r&&h({type:6,time:Date.now()})},[r,h]),E=Tt.useCallback((T,b)=>{let{reverseOrder:P=!1,gutter:X=8,defaultPosition:J}=b||{},$=n.filter(ot=>(ot.position||J)===(T.position||J)&&ot.height),mt=$.findIndex(ot=>ot.id===T.id),yt=$.filter((ot,Vt)=>Vt<mt&&ot.visible).length;return $.filter(ot=>ot.visible).slice(...P?[yt+1]:[0,yt]).reduce((ot,Vt)=>ot+(Vt.height||0)+X,0)},[n]);return Tt.useEffect(()=>{n.forEach(T=>{if(T.dismissed)u(T.id,T.removeDelay);else{let b=l.get(T.id);b&&(clearTimeout(b),l.delete(T.id))}})},[n,u]),{toasts:n,handlers:{updateHeight:_,startPause:m,endPause:g,calculateOffset:E}}},Qb=fs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Yb=fs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Kb=fs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Xb=fr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Qb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Yb} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Kb} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Zb=fs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,$b=fr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${Zb} 1s linear infinite;
`,Wb=fs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Jb=fs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,tC=fr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Wb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Jb} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,eC=fr("div")`
  position: absolute;
`,nC=fr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,iC=fs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,sC=fr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${iC} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,rC=({toast:s})=>{let{icon:t,type:n,iconTheme:r}=s;return t!==void 0?typeof t=="string"?Tt.createElement(sC,null,t):t:n==="blank"?null:Tt.createElement(nC,null,Tt.createElement($b,{...r}),n!=="loading"&&Tt.createElement(eC,null,n==="error"?Tt.createElement(Xb,{...r}):Tt.createElement(tC,{...r})))},aC=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,lC=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,oC="0%{opacity:0;} 100%{opacity:1;}",uC="0%{opacity:1;} 100%{opacity:0;}",cC=fr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,hC=fr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,fC=(s,t)=>{let n=s.includes("top")?1:-1,[r,l]=j0()?[oC,uC]:[aC(n),lC(n)];return{animation:t?`${fs(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${fs(l)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},dC=Tt.memo(({toast:s,position:t,style:n,children:r})=>{let l=s.height?fC(s.position||t||"top-center",s.visible):{opacity:0},u=Tt.createElement(rC,{toast:s}),h=Tt.createElement(hC,{...s.ariaProps},mh(s.message,s));return Tt.createElement(cC,{className:s.className,style:{...l,...n,...s.style}},typeof r=="function"?r({icon:u,message:h}):Tt.createElement(Tt.Fragment,null,u,h))});Ub(Tt.createElement);var mC=({id:s,className:t,style:n,onHeightUpdate:r,children:l})=>{let u=Tt.useCallback(h=>{if(h){let m=()=>{let _=h.getBoundingClientRect().height;r(s,_)};m(),new MutationObserver(m).observe(h,{subtree:!0,childList:!0,characterData:!0})}},[s,r]);return Tt.createElement("div",{ref:u,className:t,style:n},l)},pC=(s,t)=>{let n=s.includes("top"),r=n?{top:0}:{bottom:0},l=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:j0()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...l}},gC=Lh`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Wc=16,_C=({reverseOrder:s,position:t="top-center",toastOptions:n,gutter:r,children:l,toasterId:u,containerStyle:h,containerClassName:m})=>{let{toasts:_,handlers:g}=Gb(n,u);return Tt.createElement("div",{"data-rht-toaster":u||"",style:{position:"fixed",zIndex:9999,top:Wc,left:Wc,right:Wc,bottom:Wc,pointerEvents:"none",...h},className:m,onMouseEnter:g.startPause,onMouseLeave:g.endPause},_.map(E=>{let T=E.position||t,b=g.calculateOffset(E,{reverseOrder:s,gutter:r,defaultPosition:t}),P=pC(T,b);return Tt.createElement(mC,{id:E.id,key:E.id,onHeightUpdate:g.updateHeight,className:E.visible?gC:"",style:P},E.type==="custom"?mh(E.message,E):l?l(E):Tt.createElement(dC,{toast:E,position:T}))}))},Y0=Pe,im={exports:{}},ko={},sm={exports:{}},rm={};var Bv;function yC(){return Bv||(Bv=1,(function(s){function t(F,tt){var ct=F.length;F.push(tt);t:for(;0<ct;){var Bt=ct-1>>>1,Yt=F[Bt];if(0<l(Yt,tt))F[Bt]=tt,F[ct]=Yt,ct=Bt;else break t}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var tt=F[0],ct=F.pop();if(ct!==tt){F[0]=ct;t:for(var Bt=0,Yt=F.length,M=Yt>>>1;Bt<M;){var Y=2*(Bt+1)-1,et=F[Y],it=Y+1,dt=F[it];if(0>l(et,ct))it<Yt&&0>l(dt,et)?(F[Bt]=dt,F[it]=ct,Bt=it):(F[Bt]=et,F[Y]=ct,Bt=Y);else if(it<Yt&&0>l(dt,ct))F[Bt]=dt,F[it]=ct,Bt=it;else break t}}return tt}function l(F,tt){var ct=F.sortIndex-tt.sortIndex;return ct!==0?ct:F.id-tt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var _=[],g=[],E=1,T=null,b=3,P=!1,X=!1,J=!1,$=!1,mt=typeof setTimeout=="function"?setTimeout:null,yt=typeof clearTimeout=="function"?clearTimeout:null,ot=typeof setImmediate<"u"?setImmediate:null;function Vt(F){for(var tt=n(g);tt!==null;){if(tt.callback===null)r(g);else if(tt.startTime<=F)r(g),tt.sortIndex=tt.expirationTime,t(_,tt);else break;tt=n(g)}}function ie(F){if(J=!1,Vt(F),!X)if(n(_)!==null)X=!0,Pt||(Pt=!0,L());else{var tt=n(g);tt!==null&&Le(ie,tt.startTime-F)}}var Pt=!1,N=-1,C=5,I=-1;function V(){return $?!0:!(s.unstable_now()-I<C)}function O(){if($=!1,Pt){var F=s.unstable_now();I=F;var tt=!0;try{t:{X=!1,J&&(J=!1,yt(N),N=-1),P=!0;var ct=b;try{e:{for(Vt(F),T=n(_);T!==null&&!(T.expirationTime>F&&V());){var Bt=T.callback;if(typeof Bt=="function"){T.callback=null,b=T.priorityLevel;var Yt=Bt(T.expirationTime<=F);if(F=s.unstable_now(),typeof Yt=="function"){T.callback=Yt,Vt(F),tt=!0;break e}T===n(_)&&r(_),Vt(F)}else r(_);T=n(_)}if(T!==null)tt=!0;else{var M=n(g);M!==null&&Le(ie,M.startTime-F),tt=!1}}break t}finally{T=null,b=ct,P=!1}tt=void 0}}finally{tt?L():Pt=!1}}}var L;if(typeof ot=="function")L=function(){ot(O)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,ue=w.port2;w.port1.onmessage=O,L=function(){ue.postMessage(null)}}else L=function(){mt(O,0)};function Le(F,tt){N=mt(function(){F(s.unstable_now())},tt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F||(C=0<F?Math.floor(1e3/F):5)},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(F){switch(b){case 1:case 2:case 3:var tt=3;break;default:tt=b}var ct=b;b=tt;try{return F()}finally{b=ct}},s.unstable_requestPaint=function(){$=!0},s.unstable_runWithPriority=function(F,tt){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ct=b;b=F;try{return tt()}finally{b=ct}},s.unstable_scheduleCallback=function(F,tt,ct){var Bt=s.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?Bt+ct:Bt):ct=Bt,F){case 1:var Yt=-1;break;case 2:Yt=250;break;case 5:Yt=1073741823;break;case 4:Yt=1e4;break;default:Yt=5e3}return Yt=ct+Yt,F={id:E++,callback:tt,priorityLevel:F,startTime:ct,expirationTime:Yt,sortIndex:-1},ct>Bt?(F.sortIndex=ct,t(g,F),n(_)===null&&F===n(g)&&(J?(yt(N),N=-1):J=!0,Le(ie,ct-Bt))):(F.sortIndex=Yt,t(_,F),X||P||(X=!0,Pt||(Pt=!0,L()))),F},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(F){var tt=b;return function(){var ct=b;b=tt;try{return F.apply(this,arguments)}finally{b=ct}}}})(rm)),rm}var qv;function vC(){return qv||(qv=1,sm.exports=yC()),sm.exports}var am={exports:{}},sn={};var jv;function EC(){if(jv)return sn;jv=1;var s=cp();function t(_){var g="https://react.dev/errors/"+_;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+_+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(_,g,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:T==null?null:""+T,children:_,containerInfo:g,implementation:E}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(_,g){if(_==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sn.createPortal=function(_,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(_,g,null,E)},sn.flushSync=function(_){var g=h.T,E=r.p;try{if(h.T=null,r.p=2,_)return _()}finally{h.T=g,r.p=E,r.d.f()}},sn.preconnect=function(_,g){typeof _=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(_,g))},sn.prefetchDNS=function(_){typeof _=="string"&&r.d.D(_)},sn.preinit=function(_,g){if(typeof _=="string"&&g&&typeof g.as=="string"){var E=g.as,T=m(E,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,P=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?r.d.S(_,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:P}):E==="script"&&r.d.X(_,{crossOrigin:T,integrity:b,fetchPriority:P,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},sn.preinitModule=function(_,g){if(typeof _=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);r.d.M(_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(_)},sn.preload=function(_,g){if(typeof _=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,T=m(E,g.crossOrigin);r.d.L(_,E,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},sn.preloadModule=function(_,g){if(typeof _=="string")if(g){var E=m(g.as,g.crossOrigin);r.d.m(_,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(_)},sn.requestFormReset=function(_){r.d.r(_)},sn.unstable_batchedUpdates=function(_,g){return _(g)},sn.useFormState=function(_,g,E){return h.H.useFormState(_,g,E)},sn.useFormStatus=function(){return h.H.useHostTransitionStatus()},sn.version="19.2.3",sn}var Hv;function TC(){if(Hv)return am.exports;Hv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch{}}return s(),am.exports=EC(),am.exports}var Fv;function SC(){if(Fv)return ko;Fv=1;var s=vC(),t=cp(),n=TC();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function h(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function m(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function _(e){if(u(e)!==e)throw Error(r(188))}function g(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(r(188));return i!==e?null:e}for(var a=e,o=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(o=f.return,o!==null){a=o;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return _(f),e;if(d===o)return _(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==o.return)a=f,o=d;else{for(var y=!1,S=f.child;S;){if(S===a){y=!0,a=f,o=d;break}if(S===o){y=!0,o=f,a=d;break}S=S.sibling}if(!y){for(S=d.child;S;){if(S===a){y=!0,a=d,o=f;break}if(S===o){y=!0,o=d,a=f;break}S=S.sibling}if(!y)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:i}function E(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=E(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,b=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),mt=Symbol.for("react.profiler"),yt=Symbol.for("react.consumer"),ot=Symbol.for("react.context"),Vt=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),Pt=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function L(e){return e===null||typeof e!="object"?null:(e=O&&e[O]||e["@@iterator"],typeof e=="function"?e:null)}var w=Symbol.for("react.client.reference");function ue(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===w?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case J:return"Fragment";case mt:return"Profiler";case $:return"StrictMode";case ie:return"Suspense";case Pt:return"SuspenseList";case I:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case X:return"Portal";case ot:return e.displayName||"Context";case yt:return(e._context.displayName||"Context")+".Consumer";case Vt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case N:return i=e.displayName||null,i!==null?i:ue(e.type)||"Memo";case C:i=e._payload,e=e._init;try{return ue(e(i))}catch{}}return null}var Le=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct={pending:!1,data:null,method:null,action:null},Bt=[],Yt=-1;function M(e){return{current:e}}function Y(e){0>Yt||(e.current=Bt[Yt],Bt[Yt]=null,Yt--)}function et(e,i){Yt++,Bt[Yt]=e.current,e.current=i}var it=M(null),dt=M(null),St=M(null),xt=M(null);function Ue(e,i){switch(et(St,i),et(dt,e),et(it,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?sv(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=sv(i),e=rv(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Y(it),et(it,e)}function ce(){Y(it),Y(dt),Y(St)}function mr(e){e.memoizedState!==null&&et(xt,e);var i=it.current,a=rv(i,e.type);i!==a&&(et(dt,e),et(it,a))}function sa(e){dt.current===e&&(Y(it),Y(dt)),xt.current===e&&(Y(xt),Mo._currentValue=ct)}var ra,aa;function di(e){if(ra===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ra=i&&i[1]||"",aa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ra+e+aa}var Ol=!1;function pr(e,i){if(!e||Ol)return"";Ol=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(j){var B=j}Reflect.construct(e,[],Q)}else{try{Q.call()}catch(j){B=j}e.call(Q.prototype)}}else{try{throw Error()}catch(j){B=j}(Q=e())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(j){if(j&&B&&typeof j.stack=="string")return[j.stack,B.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),y=d[0],S=d[1];if(y&&S){var R=y.split(`
`),z=S.split(`
`);for(f=o=0;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(o===R.length||f===z.length)for(o=R.length-1,f=z.length-1;1<=o&&0<=f&&R[o]!==z[f];)f--;for(;1<=o&&0<=f;o--,f--)if(R[o]!==z[f]){if(o!==1||f!==1)do if(o--,f--,0>f||R[o]!==z[f]){var H=`
`+R[o].replace(" at new "," at ");return e.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",e.displayName)),H}while(1<=o&&0<=f);break}}}finally{Ol=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?di(a):""}function Ml(e,i){switch(e.tag){case 26:case 27:case 5:return di(e.type);case 16:return di("Lazy");case 13:return e.child!==i&&i!==null?di("Suspense Fallback"):di("Suspense");case 19:return di("SuspenseList");case 0:case 15:return pr(e.type,!1);case 11:return pr(e.type.render,!1);case 1:return pr(e.type,!0);case 31:return di("Activity");default:return""}}function Vl(e){try{var i="",a=null;do i+=Ml(e,a),a=e,e=e.return;while(e);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Ae=Object.prototype.hasOwnProperty,ke=s.unstable_scheduleCallback,_s=s.unstable_cancelCallback,nf=s.unstable_shouldYield,Au=s.unstable_requestPaint,fn=s.unstable_now,gr=s.unstable_getCurrentPriorityLevel,xl=s.unstable_ImmediatePriority,Ll=s.unstable_UserBlockingPriority,ys=s.unstable_NormalPriority,sf=s.unstable_LowPriority,bu=s.unstable_IdlePriority,Cu=s.log,wu=s.unstable_setDisableYieldValue,$n=null,Xe=null;function Ln(e){if(typeof Cu=="function"&&wu(e),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode($n,e)}catch{}}var ye=Math.clz32?Math.clz32:Iu,Ru=Math.log,la=Math.LN2;function Iu(e){return e>>>=0,e===0?32:31-(Ru(e)/la|0)|0}var mi=256,_r=262144,be=4194304;function pi(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function gi(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var f=0,d=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var S=o&134217727;return S!==0?(o=S&~d,o!==0?f=pi(o):(y&=S,y!==0?f=pi(y):a||(a=S&~e,a!==0&&(f=pi(a))))):(S=o&~d,S!==0?f=pi(S):y!==0?f=pi(y):a||(a=o&~e,a!==0&&(f=pi(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function Wn(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function rf(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nu(){var e=be;return be<<=1,(be&62914560)===0&&(be=4194304),e}function _i(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function yr(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function af(e,i,a,o,f,d){var y=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var S=e.entanglements,R=e.expirationTimes,z=e.hiddenUpdates;for(a=y&~a;0<a;){var H=31-ye(a),Q=1<<H;S[H]=0,R[H]=-1;var B=z[H];if(B!==null)for(z[H]=null,H=0;H<B.length;H++){var j=B[H];j!==null&&(j.lane&=-536870913)}a&=~Q}o!==0&&vr(e,o,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(y&~i))}function vr(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-ye(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function Ul(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-ye(a),f=1<<o;f&i|e[o]&i&&(e[o]|=i),a&=~f}}function kl(e,i){var a=i&-i;return a=(a&42)!==0?1:Er(a),(a&(e.suspendedLanes|i))!==0?0:a}function Er(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Hi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Du(){var e=tt.p;return e!==0?e:(e=window.event,e===void 0?32:Iv(e.type))}function Jn(e,i){var a=tt.p;try{return tt.p=e,i()}finally{tt.p=a}}var ti=Math.random().toString(36).slice(2),Ce="__reactFiber$"+ti,qe="__reactProps$"+ti,yi="__reactContainer$"+ti,oa="__reactEvents$"+ti,lf="__reactListeners$"+ti,Ou="__reactHandles$"+ti,Mu="__reactResources$"+ti,vi="__reactMarker$"+ti;function ua(e){delete e[Ce],delete e[qe],delete e[oa],delete e[lf],delete e[Ou]}function Ei(e){var i=e[Ce];if(i)return i;for(var a=e.parentNode;a;){if(i=a[yi]||a[Ce]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=fv(e);e!==null;){if(a=e[Ce])return a;e=fv(e)}return i}e=a,a=e.parentNode}return null}function Un(e){if(e=e[Ce]||e[yi]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function Cn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function Ti(e){var i=e[Mu];return i||(i=e[Mu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function we(e){e[vi]=!0}var zl=new Set,Pl={};function Si(e,i){Ai(e,i),Ai(e+"Capture",i)}function Ai(e,i){for(Pl[e]=i,e=0;e<i.length;e++)zl.add(i[e])}var Bl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ql={},jl={};function Vu(e){return Ae.call(jl,e)?!0:Ae.call(ql,e)?!1:Bl.test(e)?jl[e]=!0:(ql[e]=!0,!1)}function ca(e,i,a){if(Vu(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function wn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Re(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}function je(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vs(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Hl(e,i,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,d=o.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(y){a=""+y,d.call(this,y)}}),Object.defineProperty(e,i,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Kt(e){if(!e._valueTracker){var i=vs(e)?"checked":"value";e._valueTracker=Hl(e,i,""+e[i])}}function Tr(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=vs(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function bi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Sr=/[\n"\\]/g;function gn(e){return e.replace(Sr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ha(e,i,a,o,f,d,y,S){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),i!=null?y==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+je(i)):e.value!==""+je(i)&&(e.value=""+je(i)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),i!=null?Fl(e,y,je(i)):a!=null?Fl(e,y,je(a)):o!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+je(S):e.removeAttribute("name")}function xu(e,i,a,o,f,d,y,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Kt(e);return}a=a!=null?""+je(a):"",i=i!=null?""+je(i):a,S||i===e.value||(e.value=i),e.defaultValue=i}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=S?e.checked:!!o,e.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),Kt(e)}function Fl(e,i,a){i==="number"&&bi(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Es(e,i,a,o){if(e=e.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=i.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&o&&(e[a].defaultSelected=!0)}else{for(a=""+je(a),i=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,o&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function Lu(e,i,a){if(i!=null&&(i=""+je(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+je(a):""}function Ts(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(r(92));if(Le(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=je(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),Kt(e)}function _n(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Uu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gl(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||Uu.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Ql(e,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var f in i)o=i[f],i.hasOwnProperty(f)&&a[f]!==o&&Gl(e,f,o)}else for(var d in i)i.hasOwnProperty(d)&&Gl(e,d,i[d])}function fa(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ku=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ss=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function da(e){return Ss.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ei(){}var Yl=null;function kn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var As=null,Ci=null;function Ar(e){var i=Un(e);if(i&&(e=i.stateNode)){var a=e[qe]||null;t:switch(e=i.stateNode,i.type){case"input":if(ha(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+gn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var f=o[qe]||null;if(!f)throw Error(r(90));ha(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&Tr(o)}break t;case"textarea":Lu(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Es(e,!!a.multiple,i,!1)}}}var ma=!1;function bs(e,i,a){if(ma)return e(i,a);ma=!0;try{var o=e(i);return o}finally{if(ma=!1,(As!==null||Ci!==null)&&(Dc(),As&&(i=As,e=Ci,Ci=As=null,Ar(i),e)))for(i=0;i<e.length;i++)Ar(e[i])}}function ni(e,i){var a=e.stateNode;if(a===null)return null;var o=a[qe]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),br=!1;if(zn)try{var $t={};Object.defineProperty($t,"passive",{get:function(){br=!0}}),window.addEventListener("test",$t,$t),window.removeEventListener("test",$t,$t)}catch{br=!1}var wi=null,Kl=null,Cr=null;function Xl(){if(Cr)return Cr;var e,i=Kl,a=i.length,o,f="value"in wi?wi.value:wi.textContent,d=f.length;for(e=0;e<a&&i[e]===f[e];e++);var y=a-e;for(o=1;o<=y&&i[a-o]===f[d-o];o++);return Cr=f.slice(e,1<o?1-o:void 0)}function wr(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Fi(){return!0}function ii(){return!1}function Ze(e){function i(a,o,f,d,y){this._reactName=a,this._targetInst=f,this.type=o,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(a=e[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Fi:ii,this.isPropagationStopped=ii,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),i}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ri=Ze(Gi),Cs=T({},Gi,{view:0,detail:0}),Zl=Ze(Cs),ws,pa,Ii,ga=T({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ii&&(Ii&&e.type==="mousemove"?(ws=e.screenX-Ii.screenX,pa=e.screenY-Ii.screenY):pa=ws=0,Ii=e),ws)},movementY:function(e){return"movementY"in e?e.movementY:pa}}),$l=Ze(ga),Rr=T({},ga,{dataTransfer:0}),zu=Ze(Rr),Pu=T({},Cs,{relatedTarget:0}),Ir=Ze(Pu),Wl=T({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Bu=Ze(Wl),_a=T({},Gi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qu=Ze(_a),ju=T({},Gi,{data:0}),Ni=Ze(ju),Hu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qu(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Gu[e])?!!i[e]:!1}function Rs(){return Qu}var dn=T({},Cs,{key:function(e){if(e.key){var i=Hu[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=wr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rs,charCode:function(e){return e.type==="keypress"?wr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yu=Ze(dn),Ku=T({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qi=Ze(Ku),c=T({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rs}),p=Ze(c),v=T({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Ze(v),U=T({},ga,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),q=Ze(U),W=T({},Gi,{newState:0,oldState:0}),vt=Ze(W),ve=[9,13,27,32],Ft=zn&&"CompositionEvent"in window,he=null;zn&&"documentMode"in document&&(he=document.documentMode);var Pn=zn&&"TextEvent"in window&&!he,Di=zn&&(!Ft||he&&8<he&&11>=he),si=" ",ri=!1;function Nr(e,i){switch(e){case"keyup":return ve.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ya(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var va=!1;function ZS(e,i){switch(e){case"compositionend":return ya(i);case"keypress":return i.which!==32?null:(ri=!0,si);case"textInput":return e=i.data,e===si&&ri?null:e;default:return null}}function $S(e,i){if(va)return e==="compositionend"||!Ft&&Nr(e,i)?(e=Xl(),Cr=Kl=wi=null,va=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Di&&i.locale!=="ko"?null:i.data;default:return null}}var WS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pg(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!WS[e.type]:i==="textarea"}function gg(e,i,a,o){As?Ci?Ci.push(o):Ci=[o]:As=o,i=kc(i,"onChange"),0<i.length&&(a=new Ri("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var Jl=null,to=null;function JS(e){Wy(e,0)}function Xu(e){var i=Cn(e);if(Tr(i))return e}function _g(e,i){if(e==="change")return i}var yg=!1;if(zn){var of;if(zn){var uf="oninput"in document;if(!uf){var vg=document.createElement("div");vg.setAttribute("oninput","return;"),uf=typeof vg.oninput=="function"}of=uf}else of=!1;yg=of&&(!document.documentMode||9<document.documentMode)}function Eg(){Jl&&(Jl.detachEvent("onpropertychange",Tg),to=Jl=null)}function Tg(e){if(e.propertyName==="value"&&Xu(to)){var i=[];gg(i,to,e,kn(e)),bs(JS,i)}}function tA(e,i,a){e==="focusin"?(Eg(),Jl=i,to=a,Jl.attachEvent("onpropertychange",Tg)):e==="focusout"&&Eg()}function eA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xu(to)}function nA(e,i){if(e==="click")return Xu(i)}function iA(e,i){if(e==="input"||e==="change")return Xu(i)}function sA(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Rn=typeof Object.is=="function"?Object.is:sA;function eo(e,i){if(Rn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var f=a[o];if(!Ae.call(i,f)||!Rn(e[f],i[f]))return!1}return!0}function Sg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ag(e,i){var a=Sg(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Sg(a)}}function bg(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?bg(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Cg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=bi(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=bi(e.document)}return i}function cf(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var rA=zn&&"documentMode"in document&&11>=document.documentMode,Ea=null,hf=null,no=null,ff=!1;function wg(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ff||Ea==null||Ea!==bi(o)||(o=Ea,"selectionStart"in o&&cf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),no&&eo(no,o)||(no=o,o=kc(hf,"onSelect"),0<o.length&&(i=new Ri("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=Ea)))}function Dr(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Ta={animationend:Dr("Animation","AnimationEnd"),animationiteration:Dr("Animation","AnimationIteration"),animationstart:Dr("Animation","AnimationStart"),transitionrun:Dr("Transition","TransitionRun"),transitionstart:Dr("Transition","TransitionStart"),transitioncancel:Dr("Transition","TransitionCancel"),transitionend:Dr("Transition","TransitionEnd")},df={},Rg={};zn&&(Rg=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);function Or(e){if(df[e])return df[e];if(!Ta[e])return e;var i=Ta[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Rg)return df[e]=i[a];return e}var Ig=Or("animationend"),Ng=Or("animationiteration"),Dg=Or("animationstart"),aA=Or("transitionrun"),lA=Or("transitionstart"),oA=Or("transitioncancel"),Og=Or("transitionend"),Mg=new Map,mf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mf.push("scrollEnd");function ai(e,i){Mg.set(e,i),Si(i,[e])}var Zu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}},Bn=[],Sa=0,pf=0;function $u(){for(var e=Sa,i=pf=Sa=0;i<e;){var a=Bn[i];Bn[i++]=null;var o=Bn[i];Bn[i++]=null;var f=Bn[i];Bn[i++]=null;var d=Bn[i];if(Bn[i++]=null,o!==null&&f!==null){var y=o.pending;y===null?f.next=f:(f.next=y.next,y.next=f),o.pending=f}d!==0&&Vg(a,f,d)}}function Wu(e,i,a,o){Bn[Sa++]=e,Bn[Sa++]=i,Bn[Sa++]=a,Bn[Sa++]=o,pf|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function gf(e,i,a,o){return Wu(e,i,a,o),Ju(e)}function Mr(e,i){return Wu(e,null,null,i),Ju(e)}function Vg(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var f=!1,d=e.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&i!==null&&(f=31-ye(a),e=d.hiddenUpdates,o=e[f],o===null?e[f]=[i]:o.push(i),i.lane=a|536870912),d):null}function Ju(e){if(50<Co)throw Co=0,Cd=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Aa={};function uA(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(e,i,a,o){return new uA(e,i,a,o)}function _f(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Yi(e,i){var a=e.alternate;return a===null?(a=In(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function xg(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function tc(e,i,a,o,f,d){var y=0;if(o=e,typeof e=="function")_f(e)&&(y=1);else if(typeof e=="string")y=mb(e,a,it.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case I:return e=In(31,a,i,f),e.elementType=I,e.lanes=d,e;case J:return Vr(a.children,f,d,i);case $:y=8,f|=24;break;case mt:return e=In(12,a,i,f|2),e.elementType=mt,e.lanes=d,e;case ie:return e=In(13,a,i,f),e.elementType=ie,e.lanes=d,e;case Pt:return e=In(19,a,i,f),e.elementType=Pt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ot:y=10;break t;case yt:y=9;break t;case Vt:y=11;break t;case N:y=14;break t;case C:y=16,o=null;break t}y=29,a=Error(r(130,e===null?"null":typeof e,"")),o=null}return i=In(y,a,i,f),i.elementType=e,i.type=o,i.lanes=d,i}function Vr(e,i,a,o){return e=In(7,e,o,i),e.lanes=a,e}function yf(e,i,a){return e=In(6,e,null,i),e.lanes=a,e}function Lg(e){var i=In(18,null,null,0);return i.stateNode=e,i}function vf(e,i,a){return i=In(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Ug=new WeakMap;function qn(e,i){if(typeof e=="object"&&e!==null){var a=Ug.get(e);return a!==void 0?a:(i={value:e,source:i,stack:Vl(i)},Ug.set(e,i),i)}return{value:e,source:i,stack:Vl(i)}}var ba=[],Ca=0,ec=null,io=0,jn=[],Hn=0,Is=null,Oi=1,Mi="";function Ki(e,i){ba[Ca++]=io,ba[Ca++]=ec,ec=e,io=i}function kg(e,i,a){jn[Hn++]=Oi,jn[Hn++]=Mi,jn[Hn++]=Is,Is=e;var o=Oi;e=Mi;var f=32-ye(o)-1;o&=~(1<<f),a+=1;var d=32-ye(i)+f;if(30<d){var y=f-f%5;d=(o&(1<<y)-1).toString(32),o>>=y,f-=y,Oi=1<<32-ye(i)+f|a<<f|o,Mi=d+e}else Oi=1<<d|a<<f|o,Mi=e}function Ef(e){e.return!==null&&(Ki(e,1),kg(e,1,0))}function Tf(e){for(;e===ec;)ec=ba[--Ca],ba[Ca]=null,io=ba[--Ca],ba[Ca]=null;for(;e===Is;)Is=jn[--Hn],jn[Hn]=null,Mi=jn[--Hn],jn[Hn]=null,Oi=jn[--Hn],jn[Hn]=null}function zg(e,i){jn[Hn++]=Oi,jn[Hn++]=Mi,jn[Hn++]=Is,Oi=i.id,Mi=i.overflow,Is=e}var $e=null,se=null,Nt=!1,Ns=null,Fn=!1,Sf=Error(r(519));function Ds(e){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw so(qn(i,e)),Sf}function Pg(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Ce]=e,i[qe]=o,a){case"dialog":wt("cancel",i),wt("close",i);break;case"iframe":case"object":case"embed":wt("load",i);break;case"video":case"audio":for(a=0;a<Ro.length;a++)wt(Ro[a],i);break;case"source":wt("error",i);break;case"img":case"image":case"link":wt("error",i),wt("load",i);break;case"details":wt("toggle",i);break;case"input":wt("invalid",i),xu(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":wt("invalid",i);break;case"textarea":wt("invalid",i),Ts(i,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||nv(i.textContent,a)?(o.popover!=null&&(wt("beforetoggle",i),wt("toggle",i)),o.onScroll!=null&&wt("scroll",i),o.onScrollEnd!=null&&wt("scrollend",i),o.onClick!=null&&(i.onclick=ei),i=!0):i=!1,i||Ds(e,!0)}function Bg(e){for($e=e.return;$e;)switch($e.tag){case 5:case 31:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:$e=$e.return}}function wa(e){if(e!==$e)return!1;if(!Nt)return Bg(e),Nt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Bd(e.type,e.memoizedProps)),a=!a),a&&se&&Ds(e),Bg(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));se=hv(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));se=hv(e)}else i===27?(i=se,Fs(e.type)?(e=Gd,Gd=null,se=e):se=i):se=$e?Qn(e.stateNode.nextSibling):null;return!0}function xr(){se=$e=null,Nt=!1}function Af(){var e=Ns;return e!==null&&(Tn===null?Tn=e:Tn.push.apply(Tn,e),Ns=null),e}function so(e){Ns===null?Ns=[e]:Ns.push(e)}var bf=M(null),Lr=null,Xi=null;function Os(e,i,a){et(bf,i._currentValue),i._currentValue=a}function Zi(e){e._currentValue=bf.current,Y(bf)}function Cf(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function wf(e,i,a,o){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var y=f.child;d=d.firstContext;t:for(;d!==null;){var S=d;d=f;for(var R=0;R<i.length;R++)if(S.context===i[R]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),Cf(d.return,a,e),o||(y=null);break t}d=S.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(r(341));y.lanes|=a,d=y.alternate,d!==null&&(d.lanes|=a),Cf(y,a,e),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===e){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function Ra(e,i,a,o){e=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(r(387));if(y=y.memoizedProps,y!==null){var S=f.type;Rn(f.pendingProps.value,y.value)||(e!==null?e.push(S):e=[S])}}else if(f===xt.current){if(y=f.alternate,y===null)throw Error(r(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Mo):e=[Mo])}f=f.return}e!==null&&wf(i,e,a,o),i.flags|=262144}function nc(e){for(e=e.firstContext;e!==null;){if(!Rn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ur(e){Lr=e,Xi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function We(e){return qg(Lr,e)}function ic(e,i){return Lr===null&&Ur(e),qg(e,i)}function qg(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Xi===null){if(e===null)throw Error(r(308));Xi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Xi=Xi.next=i;return a}var cA=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},hA=s.unstable_scheduleCallback,fA=s.unstable_NormalPriority,Ie={$$typeof:ot,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rf(){return{controller:new cA,data:new Map,refCount:0}}function ro(e){e.refCount--,e.refCount===0&&hA(fA,function(){e.controller.abort()})}var ao=null,If=0,Ia=0,Na=null;function dA(e,i){if(ao===null){var a=ao=[];If=0,Ia=Od(),Na={status:"pending",value:void 0,then:function(o){a.push(o)}}}return If++,i.then(jg,jg),i}function jg(){if(--If===0&&ao!==null){Na!==null&&(Na.status="fulfilled");var e=ao;ao=null,Ia=0,Na=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function mA(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(o.status="rejected",o.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),o}var Hg=F.S;F.S=function(e,i){wy=fn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&dA(e,i),Hg!==null&&Hg(e,i)};var kr=M(null);function Nf(){var e=kr.current;return e!==null?e:ne.pooledCache}function sc(e,i){i===null?et(kr,kr.current):et(kr,i.pool)}function Fg(){var e=Nf();return e===null?null:{parent:Ie._currentValue,pool:e}}var Da=Error(r(460)),Df=Error(r(474)),rc=Error(r(542)),ac={then:function(){}};function Gg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Qg(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(ei,ei),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Kg(e),e;default:if(typeof i.status=="string")i.then(ei,ei);else{if(e=ne,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=o}},function(o){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Kg(e),e}throw Pr=i,Da}}function zr(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Pr=a,Da):a}}var Pr=null;function Yg(){if(Pr===null)throw Error(r(459));var e=Pr;return Pr=null,e}function Kg(e){if(e===Da||e===rc)throw Error(r(483))}var Oa=null,lo=0;function lc(e){var i=lo;return lo+=1,Oa===null&&(Oa=[]),Qg(Oa,e,i)}function oo(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function oc(e,i){throw i.$$typeof===b?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Xg(e){function i(x,D){if(e){var k=x.deletions;k===null?(x.deletions=[D],x.flags|=16):k.push(D)}}function a(x,D){if(!e)return null;for(;D!==null;)i(x,D),D=D.sibling;return null}function o(x){for(var D=new Map;x!==null;)x.key!==null?D.set(x.key,x):D.set(x.index,x),x=x.sibling;return D}function f(x,D){return x=Yi(x,D),x.index=0,x.sibling=null,x}function d(x,D,k){return x.index=k,e?(k=x.alternate,k!==null?(k=k.index,k<D?(x.flags|=67108866,D):k):(x.flags|=67108866,D)):(x.flags|=1048576,D)}function y(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function S(x,D,k,G){return D===null||D.tag!==6?(D=yf(k,x.mode,G),D.return=x,D):(D=f(D,k),D.return=x,D)}function R(x,D,k,G){var ut=k.type;return ut===J?H(x,D,k.props.children,G,k.key):D!==null&&(D.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===C&&zr(ut)===D.type)?(D=f(D,k.props),oo(D,k),D.return=x,D):(D=tc(k.type,k.key,k.props,null,x.mode,G),oo(D,k),D.return=x,D)}function z(x,D,k,G){return D===null||D.tag!==4||D.stateNode.containerInfo!==k.containerInfo||D.stateNode.implementation!==k.implementation?(D=vf(k,x.mode,G),D.return=x,D):(D=f(D,k.children||[]),D.return=x,D)}function H(x,D,k,G,ut){return D===null||D.tag!==7?(D=Vr(k,x.mode,G,ut),D.return=x,D):(D=f(D,k),D.return=x,D)}function Q(x,D,k){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=yf(""+D,x.mode,k),D.return=x,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case P:return k=tc(D.type,D.key,D.props,null,x.mode,k),oo(k,D),k.return=x,k;case X:return D=vf(D,x.mode,k),D.return=x,D;case C:return D=zr(D),Q(x,D,k)}if(Le(D)||L(D))return D=Vr(D,x.mode,k,null),D.return=x,D;if(typeof D.then=="function")return Q(x,lc(D),k);if(D.$$typeof===ot)return Q(x,ic(x,D),k);oc(x,D)}return null}function B(x,D,k,G){var ut=D!==null?D.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return ut!==null?null:S(x,D,""+k,G);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case P:return k.key===ut?R(x,D,k,G):null;case X:return k.key===ut?z(x,D,k,G):null;case C:return k=zr(k),B(x,D,k,G)}if(Le(k)||L(k))return ut!==null?null:H(x,D,k,G,null);if(typeof k.then=="function")return B(x,D,lc(k),G);if(k.$$typeof===ot)return B(x,D,ic(x,k),G);oc(x,k)}return null}function j(x,D,k,G,ut){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return x=x.get(k)||null,S(D,x,""+G,ut);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case P:return x=x.get(G.key===null?k:G.key)||null,R(D,x,G,ut);case X:return x=x.get(G.key===null?k:G.key)||null,z(D,x,G,ut);case C:return G=zr(G),j(x,D,k,G,ut)}if(Le(G)||L(G))return x=x.get(k)||null,H(D,x,G,ut,null);if(typeof G.then=="function")return j(x,D,k,lc(G),ut);if(G.$$typeof===ot)return j(x,D,k,ic(D,G),ut);oc(D,G)}return null}function at(x,D,k,G){for(var ut=null,jt=null,lt=D,At=D=0,It=null;lt!==null&&At<k.length;At++){lt.index>At?(It=lt,lt=null):It=lt.sibling;var Ht=B(x,lt,k[At],G);if(Ht===null){lt===null&&(lt=It);break}e&&lt&&Ht.alternate===null&&i(x,lt),D=d(Ht,D,At),jt===null?ut=Ht:jt.sibling=Ht,jt=Ht,lt=It}if(At===k.length)return a(x,lt),Nt&&Ki(x,At),ut;if(lt===null){for(;At<k.length;At++)lt=Q(x,k[At],G),lt!==null&&(D=d(lt,D,At),jt===null?ut=lt:jt.sibling=lt,jt=lt);return Nt&&Ki(x,At),ut}for(lt=o(lt);At<k.length;At++)It=j(lt,x,At,k[At],G),It!==null&&(e&&It.alternate!==null&&lt.delete(It.key===null?At:It.key),D=d(It,D,At),jt===null?ut=It:jt.sibling=It,jt=It);return e&&lt.forEach(function(Xs){return i(x,Xs)}),Nt&&Ki(x,At),ut}function ht(x,D,k,G){if(k==null)throw Error(r(151));for(var ut=null,jt=null,lt=D,At=D=0,It=null,Ht=k.next();lt!==null&&!Ht.done;At++,Ht=k.next()){lt.index>At?(It=lt,lt=null):It=lt.sibling;var Xs=B(x,lt,Ht.value,G);if(Xs===null){lt===null&&(lt=It);break}e&&lt&&Xs.alternate===null&&i(x,lt),D=d(Xs,D,At),jt===null?ut=Xs:jt.sibling=Xs,jt=Xs,lt=It}if(Ht.done)return a(x,lt),Nt&&Ki(x,At),ut;if(lt===null){for(;!Ht.done;At++,Ht=k.next())Ht=Q(x,Ht.value,G),Ht!==null&&(D=d(Ht,D,At),jt===null?ut=Ht:jt.sibling=Ht,jt=Ht);return Nt&&Ki(x,At),ut}for(lt=o(lt);!Ht.done;At++,Ht=k.next())Ht=j(lt,x,At,Ht.value,G),Ht!==null&&(e&&Ht.alternate!==null&&lt.delete(Ht.key===null?At:Ht.key),D=d(Ht,D,At),jt===null?ut=Ht:jt.sibling=Ht,jt=Ht);return e&&lt.forEach(function(Cb){return i(x,Cb)}),Nt&&Ki(x,At),ut}function te(x,D,k,G){if(typeof k=="object"&&k!==null&&k.type===J&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case P:t:{for(var ut=k.key;D!==null;){if(D.key===ut){if(ut=k.type,ut===J){if(D.tag===7){a(x,D.sibling),G=f(D,k.props.children),G.return=x,x=G;break t}}else if(D.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===C&&zr(ut)===D.type){a(x,D.sibling),G=f(D,k.props),oo(G,k),G.return=x,x=G;break t}a(x,D);break}else i(x,D);D=D.sibling}k.type===J?(G=Vr(k.props.children,x.mode,G,k.key),G.return=x,x=G):(G=tc(k.type,k.key,k.props,null,x.mode,G),oo(G,k),G.return=x,x=G)}return y(x);case X:t:{for(ut=k.key;D!==null;){if(D.key===ut)if(D.tag===4&&D.stateNode.containerInfo===k.containerInfo&&D.stateNode.implementation===k.implementation){a(x,D.sibling),G=f(D,k.children||[]),G.return=x,x=G;break t}else{a(x,D);break}else i(x,D);D=D.sibling}G=vf(k,x.mode,G),G.return=x,x=G}return y(x);case C:return k=zr(k),te(x,D,k,G)}if(Le(k))return at(x,D,k,G);if(L(k)){if(ut=L(k),typeof ut!="function")throw Error(r(150));return k=ut.call(k),ht(x,D,k,G)}if(typeof k.then=="function")return te(x,D,lc(k),G);if(k.$$typeof===ot)return te(x,D,ic(x,k),G);oc(x,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,D!==null&&D.tag===6?(a(x,D.sibling),G=f(D,k),G.return=x,x=G):(a(x,D),G=yf(k,x.mode,G),G.return=x,x=G),y(x)):a(x,D)}return function(x,D,k,G){try{lo=0;var ut=te(x,D,k,G);return Oa=null,ut}catch(lt){if(lt===Da||lt===rc)throw lt;var jt=In(29,lt,null,x.mode);return jt.lanes=G,jt.return=x,jt}}}var Br=Xg(!0),Zg=Xg(!1),Ms=!1;function Of(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Vs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xs(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Gt&2)!==0){var f=o.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),o.pending=i,i=Ju(e),Vg(e,null,a),i}return Wu(e,o,i,a),Ju(e)}function uo(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,Ul(e,a)}}function Vf(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=y:d=d.next=y,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var xf=!1;function co(){if(xf){var e=Na;if(e!==null)throw e}}function ho(e,i,a,o){xf=!1;var f=e.updateQueue;Ms=!1;var d=f.firstBaseUpdate,y=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var R=S,z=R.next;R.next=null,y===null?d=z:y.next=z,y=R;var H=e.alternate;H!==null&&(H=H.updateQueue,S=H.lastBaseUpdate,S!==y&&(S===null?H.firstBaseUpdate=z:S.next=z,H.lastBaseUpdate=R))}if(d!==null){var Q=f.baseState;y=0,H=z=R=null,S=d;do{var B=S.lane&-536870913,j=B!==S.lane;if(j?(Rt&B)===B:(o&B)===B){B!==0&&B===Ia&&(xf=!0),H!==null&&(H=H.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var at=e,ht=S;B=i;var te=a;switch(ht.tag){case 1:if(at=ht.payload,typeof at=="function"){Q=at.call(te,Q,B);break t}Q=at;break t;case 3:at.flags=at.flags&-65537|128;case 0:if(at=ht.payload,B=typeof at=="function"?at.call(te,Q,B):at,B==null)break t;Q=T({},Q,B);break t;case 2:Ms=!0}}B=S.callback,B!==null&&(e.flags|=64,j&&(e.flags|=8192),j=f.callbacks,j===null?f.callbacks=[B]:j.push(B))}else j={lane:B,tag:S.tag,payload:S.payload,callback:S.callback,next:null},H===null?(z=H=j,R=Q):H=H.next=j,y|=B;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;j=S,S=j.next,j.next=null,f.lastBaseUpdate=j,f.shared.pending=null}}while(!0);H===null&&(R=Q),f.baseState=R,f.firstBaseUpdate=z,f.lastBaseUpdate=H,d===null&&(f.shared.lanes=0),Ps|=y,e.lanes=y,e.memoizedState=Q}}function $g(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function Wg(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)$g(a[e],i)}var Ma=M(null),uc=M(0);function Jg(e,i){e=rs,et(uc,e),et(Ma,i),rs=e|i.baseLanes}function Lf(){et(uc,rs),et(Ma,Ma.current)}function Uf(){rs=uc.current,Y(Ma),Y(uc)}var Nn=M(null),Gn=null;function Ls(e){var i=e.alternate;et(Ee,Ee.current&1),et(Nn,e),Gn===null&&(i===null||Ma.current!==null||i.memoizedState!==null)&&(Gn=e)}function kf(e){et(Ee,Ee.current),et(Nn,e),Gn===null&&(Gn=e)}function t_(e){e.tag===22?(et(Ee,Ee.current),et(Nn,e),Gn===null&&(Gn=e)):Us()}function Us(){et(Ee,Ee.current),et(Nn,Nn.current)}function Dn(e){Y(Nn),Gn===e&&(Gn=null),Y(Ee)}var Ee=M(0);function cc(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Hd(a)||Fd(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var $i=0,Et=null,Wt=null,Ne=null,hc=!1,Va=!1,qr=!1,fc=0,fo=0,xa=null,pA=0;function ge(){throw Error(r(321))}function zf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!Rn(e[a],i[a]))return!1;return!0}function Pf(e,i,a,o,f,d){return $i=d,Et=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=e===null||e.memoizedState===null?k_:td,qr=!1,d=a(o,f),qr=!1,Va&&(d=n_(i,a,o,f)),e_(e),d}function e_(e){F.H=go;var i=Wt!==null&&Wt.next!==null;if($i=0,Ne=Wt=Et=null,hc=!1,fo=0,xa=null,i)throw Error(r(300));e===null||De||(e=e.dependencies,e!==null&&nc(e)&&(De=!0))}function n_(e,i,a,o){Et=e;var f=0;do{if(Va&&(xa=null),fo=0,Va=!1,25<=f)throw Error(r(301));if(f+=1,Ne=Wt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}F.H=z_,d=i(a,o)}while(Va);return d}function gA(){var e=F.H,i=e.useState()[0];return i=typeof i.then=="function"?mo(i):i,e=e.useState()[0],(Wt!==null?Wt.memoizedState:null)!==e&&(Et.flags|=1024),i}function Bf(){var e=fc!==0;return fc=0,e}function qf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function jf(e){if(hc){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}hc=!1}$i=0,Ne=Wt=Et=null,Va=!1,fo=fc=0,xa=null}function mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?Et.memoizedState=Ne=e:Ne=Ne.next=e,Ne}function Te(){if(Wt===null){var e=Et.alternate;e=e!==null?e.memoizedState:null}else e=Wt.next;var i=Ne===null?Et.memoizedState:Ne.next;if(i!==null)Ne=i,Wt=e;else{if(e===null)throw Et.alternate===null?Error(r(467)):Error(r(310));Wt=e,e={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Ne===null?Et.memoizedState=Ne=e:Ne=Ne.next=e}return Ne}function dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mo(e){var i=fo;return fo+=1,xa===null&&(xa=[]),e=Qg(xa,e,i),i=Et,(Ne===null?i.memoizedState:Ne.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?k_:td),e}function mc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return mo(e);if(e.$$typeof===ot)return We(e)}throw Error(r(438,String(e)))}function Hf(e){var i=null,a=Et.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Et.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=dc(),Et.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=V;return i.index++,a}function Wi(e,i){return typeof i=="function"?i(e):i}function pc(e){var i=Te();return Ff(i,Wt,e)}function Ff(e,i,a){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var f=e.baseQueue,d=o.pending;if(d!==null){if(f!==null){var y=f.next;f.next=d.next,d.next=y}i.baseQueue=f=d,o.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{i=f.next;var S=y=null,R=null,z=i,H=!1;do{var Q=z.lane&-536870913;if(Q!==z.lane?(Rt&Q)===Q:($i&Q)===Q){var B=z.revertLane;if(B===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),Q===Ia&&(H=!0);else if(($i&B)===B){z=z.next,B===Ia&&(H=!0);continue}else Q={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(S=R=Q,y=d):R=R.next=Q,Et.lanes|=B,Ps|=B;Q=z.action,qr&&a(d,Q),d=z.hasEagerState?z.eagerState:a(d,Q)}else B={lane:Q,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(S=R=B,y=d):R=R.next=B,Et.lanes|=Q,Ps|=Q;z=z.next}while(z!==null&&z!==i);if(R===null?y=d:R.next=S,!Rn(d,e.memoizedState)&&(De=!0,H&&(a=Na,a!==null)))throw a;e.memoizedState=d,e.baseState=y,e.baseQueue=R,o.lastRenderedState=d}return f===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Gf(e){var i=Te(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var o=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var y=f=f.next;do d=e(d,y.action),y=y.next;while(y!==f);Rn(d,i.memoizedState)||(De=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function i_(e,i,a){var o=Et,f=Te(),d=Nt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var y=!Rn((Wt||f).memoizedState,a);if(y&&(f.memoizedState=a,De=!0),f=f.queue,Kf(a_.bind(null,o,f,e),[e]),f.getSnapshot!==i||y||Ne!==null&&Ne.memoizedState.tag&1){if(o.flags|=2048,La(9,{destroy:void 0},r_.bind(null,o,f,a,i),null),ne===null)throw Error(r(349));d||($i&127)!==0||s_(o,i,a)}return a}function s_(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Et.updateQueue,i===null?(i=dc(),Et.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function r_(e,i,a,o){i.value=a,i.getSnapshot=o,l_(i)&&o_(e)}function a_(e,i,a){return a(function(){l_(i)&&o_(e)})}function l_(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!Rn(e,a)}catch{return!0}}function o_(e){var i=Mr(e,2);i!==null&&Sn(i,e,2)}function Qf(e){var i=mn();if(typeof e=="function"){var a=e;if(e=a(),qr){Ln(!0);try{a()}finally{Ln(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:e},i}function u_(e,i,a,o){return e.baseState=a,Ff(e,Wt,typeof o=="function"?o:Wi)}function _A(e,i,a,o,f){if(yc(e))throw Error(r(485));if(e=i.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};F.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,c_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function c_(e,i){var a=i.action,o=i.payload,f=e.state;if(i.isTransition){var d=F.T,y={};F.T=y;try{var S=a(f,o),R=F.S;R!==null&&R(y,S),h_(e,i,S)}catch(z){Yf(e,i,z)}finally{d!==null&&y.types!==null&&(d.types=y.types),F.T=d}}else try{d=a(f,o),h_(e,i,d)}catch(z){Yf(e,i,z)}}function h_(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){f_(e,i,o)},function(o){return Yf(e,i,o)}):f_(e,i,a)}function f_(e,i,a){i.status="fulfilled",i.value=a,d_(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,c_(e,a)))}function Yf(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,d_(i),i=i.next;while(i!==o)}e.action=null}function d_(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function m_(e,i){return i}function p_(e,i){if(Nt){var a=ne.formState;if(a!==null){t:{var o=Et;if(Nt){if(se){e:{for(var f=se,d=Fn;f.nodeType!==8;){if(!d){f=null;break e}if(f=Qn(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){se=Qn(f.nextSibling),o=f.data==="F!";break t}}Ds(o)}o=!1}o&&(i=a[0])}}return a=mn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m_,lastRenderedState:i},a.queue=o,a=x_.bind(null,Et,o),o.dispatch=a,o=Qf(!1),d=Jf.bind(null,Et,!1,o.queue),o=mn(),f={state:i,dispatch:null,action:e,pending:null},o.queue=f,a=_A.bind(null,Et,f,d,a),f.dispatch=a,o.memoizedState=e,[i,a,!1]}function g_(e){var i=Te();return __(i,Wt,e)}function __(e,i,a){if(i=Ff(e,i,m_)[0],e=pc(Wi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=mo(i)}catch(y){throw y===Da?rc:y}else o=i;i=Te();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Et.flags|=2048,La(9,{destroy:void 0},yA.bind(null,f,a),null)),[o,d,e]}function yA(e,i){e.action=i}function y_(e){var i=Te(),a=Wt;if(a!==null)return __(i,a,e);Te(),i=i.memoizedState,a=Te();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function La(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=Et.updateQueue,i===null&&(i=dc(),Et.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function v_(){return Te().memoizedState}function gc(e,i,a,o){var f=mn();Et.flags|=e,f.memoizedState=La(1|i,{destroy:void 0},a,o===void 0?null:o)}function _c(e,i,a,o){var f=Te();o=o===void 0?null:o;var d=f.memoizedState.inst;Wt!==null&&o!==null&&zf(o,Wt.memoizedState.deps)?f.memoizedState=La(i,d,a,o):(Et.flags|=e,f.memoizedState=La(1|i,d,a,o))}function E_(e,i){gc(8390656,8,e,i)}function Kf(e,i){_c(2048,8,e,i)}function vA(e){Et.flags|=4;var i=Et.updateQueue;if(i===null)i=dc(),Et.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function T_(e){var i=Te().memoizedState;return vA({ref:i,nextImpl:e}),function(){if((Gt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function S_(e,i){return _c(4,2,e,i)}function A_(e,i){return _c(4,4,e,i)}function b_(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function C_(e,i,a){a=a!=null?a.concat([e]):null,_c(4,4,b_.bind(null,i,e),a)}function Xf(){}function w_(e,i){var a=Te();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&zf(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function R_(e,i){var a=Te();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&zf(i,o[1]))return o[0];if(o=e(),qr){Ln(!0);try{e()}finally{Ln(!1)}}return a.memoizedState=[o,i],o}function Zf(e,i,a){return a===void 0||($i&1073741824)!==0&&(Rt&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=Iy(),Et.lanes|=e,Ps|=e,a)}function I_(e,i,a,o){return Rn(a,i)?a:Ma.current!==null?(e=Zf(e,a,o),Rn(e,i)||(De=!0),e):($i&42)===0||($i&1073741824)!==0&&(Rt&261930)===0?(De=!0,e.memoizedState=a):(e=Iy(),Et.lanes|=e,Ps|=e,i)}function N_(e,i,a,o,f){var d=tt.p;tt.p=d!==0&&8>d?d:8;var y=F.T,S={};F.T=S,Jf(e,!1,i,a);try{var R=f(),z=F.S;if(z!==null&&z(S,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var H=mA(R,o);po(e,i,H,Vn(e))}else po(e,i,o,Vn(e))}catch(Q){po(e,i,{then:function(){},status:"rejected",reason:Q},Vn())}finally{tt.p=d,y!==null&&S.types!==null&&(y.types=S.types),F.T=y}}function EA(){}function $f(e,i,a,o){if(e.tag!==5)throw Error(r(476));var f=D_(e).queue;N_(e,f,i,ct,a===null?EA:function(){return O_(e),a(o)})}function D_(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ct,baseState:ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:ct},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function O_(e){var i=D_(e);i.next===null&&(i=e.alternate.memoizedState),po(e,i.next.queue,{},Vn())}function Wf(){return We(Mo)}function M_(){return Te().memoizedState}function V_(){return Te().memoizedState}function TA(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=Vn();e=Vs(a);var o=xs(i,e,a);o!==null&&(Sn(o,i,a),uo(o,i,a)),i={cache:Rf()},e.payload=i;return}i=i.return}}function SA(e,i,a){var o=Vn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},yc(e)?L_(i,a):(a=gf(e,i,a,o),a!==null&&(Sn(a,e,o),U_(a,i,o)))}function x_(e,i,a){var o=Vn();po(e,i,a,o)}function po(e,i,a,o){var f={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(yc(e))L_(i,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var y=i.lastRenderedState,S=d(y,a);if(f.hasEagerState=!0,f.eagerState=S,Rn(S,y))return Wu(e,i,f,0),ne===null&&$u(),!1}catch{}if(a=gf(e,i,f,o),a!==null)return Sn(a,e,o),U_(a,i,o),!0}return!1}function Jf(e,i,a,o){if(o={lane:2,revertLane:Od(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},yc(e)){if(i)throw Error(r(479))}else i=gf(e,a,o,2),i!==null&&Sn(i,e,2)}function yc(e){var i=e.alternate;return e===Et||i!==null&&i===Et}function L_(e,i){Va=hc=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function U_(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,Ul(e,a)}}var go={readContext:We,use:mc,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useLayoutEffect:ge,useInsertionEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useSyncExternalStore:ge,useId:ge,useHostTransitionStatus:ge,useFormState:ge,useActionState:ge,useOptimistic:ge,useMemoCache:ge,useCacheRefresh:ge};go.useEffectEvent=ge;var k_={readContext:We,use:mc,useCallback:function(e,i){return mn().memoizedState=[e,i===void 0?null:i],e},useContext:We,useEffect:E_,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,gc(4194308,4,b_.bind(null,i,e),a)},useLayoutEffect:function(e,i){return gc(4194308,4,e,i)},useInsertionEffect:function(e,i){gc(4,2,e,i)},useMemo:function(e,i){var a=mn();i=i===void 0?null:i;var o=e();if(qr){Ln(!0);try{e()}finally{Ln(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=mn();if(a!==void 0){var f=a(i);if(qr){Ln(!0);try{a(i)}finally{Ln(!1)}}}else f=i;return o.memoizedState=o.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},o.queue=e,e=e.dispatch=SA.bind(null,Et,e),[o.memoizedState,e]},useRef:function(e){var i=mn();return e={current:e},i.memoizedState=e},useState:function(e){e=Qf(e);var i=e.queue,a=x_.bind(null,Et,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Xf,useDeferredValue:function(e,i){var a=mn();return Zf(a,e,i)},useTransition:function(){var e=Qf(!1);return e=N_.bind(null,Et,e.queue,!0,!1),mn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=Et,f=mn();if(Nt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ne===null)throw Error(r(349));(Rt&127)!==0||s_(o,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,E_(a_.bind(null,o,d,e),[e]),o.flags|=2048,La(9,{destroy:void 0},r_.bind(null,o,d,a,i),null),a},useId:function(){var e=mn(),i=ne.identifierPrefix;if(Nt){var a=Mi,o=Oi;a=(o&~(1<<32-ye(o)-1)).toString(32)+a,i="_"+i+"R_"+a,a=fc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=pA++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Wf,useFormState:p_,useActionState:p_,useOptimistic:function(e){var i=mn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Jf.bind(null,Et,!0,a),a.dispatch=i,[e,i]},useMemoCache:Hf,useCacheRefresh:function(){return mn().memoizedState=TA.bind(null,Et)},useEffectEvent:function(e){var i=mn(),a={impl:e};return i.memoizedState=a,function(){if((Gt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},td={readContext:We,use:mc,useCallback:w_,useContext:We,useEffect:Kf,useImperativeHandle:C_,useInsertionEffect:S_,useLayoutEffect:A_,useMemo:R_,useReducer:pc,useRef:v_,useState:function(){return pc(Wi)},useDebugValue:Xf,useDeferredValue:function(e,i){var a=Te();return I_(a,Wt.memoizedState,e,i)},useTransition:function(){var e=pc(Wi)[0],i=Te().memoizedState;return[typeof e=="boolean"?e:mo(e),i]},useSyncExternalStore:i_,useId:M_,useHostTransitionStatus:Wf,useFormState:g_,useActionState:g_,useOptimistic:function(e,i){var a=Te();return u_(a,Wt,e,i)},useMemoCache:Hf,useCacheRefresh:V_};td.useEffectEvent=T_;var z_={readContext:We,use:mc,useCallback:w_,useContext:We,useEffect:Kf,useImperativeHandle:C_,useInsertionEffect:S_,useLayoutEffect:A_,useMemo:R_,useReducer:Gf,useRef:v_,useState:function(){return Gf(Wi)},useDebugValue:Xf,useDeferredValue:function(e,i){var a=Te();return Wt===null?Zf(a,e,i):I_(a,Wt.memoizedState,e,i)},useTransition:function(){var e=Gf(Wi)[0],i=Te().memoizedState;return[typeof e=="boolean"?e:mo(e),i]},useSyncExternalStore:i_,useId:M_,useHostTransitionStatus:Wf,useFormState:y_,useActionState:y_,useOptimistic:function(e,i){var a=Te();return Wt!==null?u_(a,Wt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Hf,useCacheRefresh:V_};z_.useEffectEvent=T_;function ed(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var nd={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=Vn(),f=Vs(o);f.payload=i,a!=null&&(f.callback=a),i=xs(e,f,o),i!==null&&(Sn(i,e,o),uo(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=Vn(),f=Vs(o);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=xs(e,f,o),i!==null&&(Sn(i,e,o),uo(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=Vn(),o=Vs(a);o.tag=2,i!=null&&(o.callback=i),i=xs(e,o,a),i!==null&&(Sn(i,e,a),uo(i,e,a))}};function P_(e,i,a,o,f,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,y):i.prototype&&i.prototype.isPureReactComponent?!eo(a,o)||!eo(f,d):!0}function B_(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&nd.enqueueReplaceState(i,i.state,null)}function jr(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function q_(e){Zu(e)}function j_(e){}function H_(e){Zu(e)}function vc(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function F_(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function id(e,i,a){return a=Vs(a),a.tag=3,a.payload={element:null},a.callback=function(){vc(e,i)},a}function G_(e){return e=Vs(e),e.tag=3,e}function Q_(e,i,a,o){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=o.value;e.payload=function(){return f(d)},e.callback=function(){F_(i,a,o)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){F_(i,a,o),typeof f!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})})}function AA(e,i,a,o,f){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Ra(i,a,f,!0),a=Nn.current,a!==null){switch(a.tag){case 31:case 13:return Gn===null?Oc():a.alternate===null&&_e===0&&(_e=3),a.flags&=-257,a.flags|=65536,a.lanes=f,o===ac?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),Id(e,o,f)),!1;case 22:return a.flags|=65536,o===ac?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),Id(e,o,f)),!1}throw Error(r(435,a.tag))}return Id(e,o,f),Oc(),!1}if(Nt)return i=Nn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,o!==Sf&&(e=Error(r(422),{cause:o}),so(qn(e,a)))):(o!==Sf&&(i=Error(r(423),{cause:o}),so(qn(i,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,o=qn(o,a),f=id(e.stateNode,o,f),Vf(e,f),_e!==4&&(_e=2)),!1;var d=Error(r(520),{cause:o});if(d=qn(d,a),bo===null?bo=[d]:bo.push(d),_e!==4&&(_e=2),i===null)return!0;o=qn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=id(a.stateNode,o,e),Vf(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Bs===null||!Bs.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=G_(f),Q_(f,e,a,o),Vf(a,f),!1}a=a.return}while(a!==null);return!1}var sd=Error(r(461)),De=!1;function Je(e,i,a,o){i.child=e===null?Zg(i,null,a,o):Br(i,e.child,a,o)}function Y_(e,i,a,o,f){a=a.render;var d=i.ref;if("ref"in o){var y={};for(var S in o)S!=="ref"&&(y[S]=o[S])}else y=o;return Ur(i),o=Pf(e,i,a,y,d,f),S=Bf(),e!==null&&!De?(qf(e,i,f),Ji(e,i,f)):(Nt&&S&&Ef(i),i.flags|=1,Je(e,i,o,f),i.child)}function K_(e,i,a,o,f){if(e===null){var d=a.type;return typeof d=="function"&&!_f(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,X_(e,i,d,o,f)):(e=tc(a.type,null,o,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!fd(e,f)){var y=d.memoizedProps;if(a=a.compare,a=a!==null?a:eo,a(y,o)&&e.ref===i.ref)return Ji(e,i,f)}return i.flags|=1,e=Yi(d,o),e.ref=i.ref,e.return=i,i.child=e}function X_(e,i,a,o,f){if(e!==null){var d=e.memoizedProps;if(eo(d,o)&&e.ref===i.ref)if(De=!1,i.pendingProps=o=d,fd(e,f))(e.flags&131072)!==0&&(De=!0);else return i.lanes=e.lanes,Ji(e,i,f)}return rd(e,i,a,o,f)}function Z_(e,i,a,o){var f=o.children,d=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(o=i.child=e.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~d}else o=0,i.child=null;return $_(e,i,d,a,o)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&sc(i,d!==null?d.cachePool:null),d!==null?Jg(i,d):Lf(),t_(i);else return o=i.lanes=536870912,$_(e,i,d!==null?d.baseLanes|a:a,a,o)}else d!==null?(sc(i,d.cachePool),Jg(i,d),Us(),i.memoizedState=null):(e!==null&&sc(i,null),Lf(),Us());return Je(e,i,f,a),i.child}function _o(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function $_(e,i,a,o,f){var d=Nf();return d=d===null?null:{parent:Ie._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},e!==null&&sc(i,null),Lf(),t_(i),e!==null&&Ra(e,i,o,!0),i.childLanes=f,null}function Ec(e,i){return i=Sc({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function W_(e,i,a){return Br(i,e.child,null,a),e=Ec(i,i.pendingProps),e.flags|=2,Dn(i),i.memoizedState=null,e}function bA(e,i,a){var o=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Nt){if(o.mode==="hidden")return e=Ec(i,o),i.lanes=536870912,_o(null,e);if(kf(i),(e=se)?(e=cv(e,Fn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Is!==null?{id:Oi,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},a=Lg(e),a.return=i,i.child=a,$e=i,se=null)):e=null,e===null)throw Ds(i);return i.lanes=536870912,null}return Ec(i,o)}var d=e.memoizedState;if(d!==null){var y=d.dehydrated;if(kf(i),f)if(i.flags&256)i.flags&=-257,i=W_(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(r(558));else if(De||Ra(e,i,a,!1),f=(a&e.childLanes)!==0,De||f){if(o=ne,o!==null&&(y=kl(o,a),y!==0&&y!==d.retryLane))throw d.retryLane=y,Mr(e,y),Sn(o,e,y),sd;Oc(),i=W_(e,i,a)}else e=d.treeContext,se=Qn(y.nextSibling),$e=i,Nt=!0,Ns=null,Fn=!1,e!==null&&zg(i,e),i=Ec(i,o),i.flags|=4096;return i}return e=Yi(e.child,{mode:o.mode,children:o.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Tc(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function rd(e,i,a,o,f){return Ur(i),a=Pf(e,i,a,o,void 0,f),o=Bf(),e!==null&&!De?(qf(e,i,f),Ji(e,i,f)):(Nt&&o&&Ef(i),i.flags|=1,Je(e,i,a,f),i.child)}function J_(e,i,a,o,f,d){return Ur(i),i.updateQueue=null,a=n_(i,o,a,f),e_(e),o=Bf(),e!==null&&!De?(qf(e,i,d),Ji(e,i,d)):(Nt&&o&&Ef(i),i.flags|=1,Je(e,i,a,d),i.child)}function ty(e,i,a,o,f){if(Ur(i),i.stateNode===null){var d=Aa,y=a.contextType;typeof y=="object"&&y!==null&&(d=We(y)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=nd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},Of(i),y=a.contextType,d.context=typeof y=="object"&&y!==null?We(y):Aa,d.state=i.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(ed(i,a,y,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&nd.enqueueReplaceState(d,d.state,null),ho(i,o,d,f),co(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){d=i.stateNode;var S=i.memoizedProps,R=jr(a,S);d.props=R;var z=d.context,H=a.contextType;y=Aa,typeof H=="object"&&H!==null&&(y=We(H));var Q=a.getDerivedStateFromProps;H=typeof Q=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,H||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||z!==y)&&B_(i,d,o,y),Ms=!1;var B=i.memoizedState;d.state=B,ho(i,o,d,f),co(),z=i.memoizedState,S||B!==z||Ms?(typeof Q=="function"&&(ed(i,a,Q,o),z=i.memoizedState),(R=Ms||P_(i,a,R,o,B,z,y))?(H||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=z),d.props=o,d.state=z,d.context=y,o=R):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,Mf(e,i),y=i.memoizedProps,H=jr(a,y),d.props=H,Q=i.pendingProps,B=d.context,z=a.contextType,R=Aa,typeof z=="object"&&z!==null&&(R=We(z)),S=a.getDerivedStateFromProps,(z=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==Q||B!==R)&&B_(i,d,o,R),Ms=!1,B=i.memoizedState,d.state=B,ho(i,o,d,f),co();var j=i.memoizedState;y!==Q||B!==j||Ms||e!==null&&e.dependencies!==null&&nc(e.dependencies)?(typeof S=="function"&&(ed(i,a,S,o),j=i.memoizedState),(H=Ms||P_(i,a,H,o,B,j,R)||e!==null&&e.dependencies!==null&&nc(e.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,j,R),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,j,R)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=j),d.props=o,d.state=j,d.context=R,o=H):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(i.flags|=1024),o=!1)}return d=o,Tc(e,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&o?(i.child=Br(i,e.child,null,f),i.child=Br(i,null,a,f)):Je(e,i,a,f),i.memoizedState=d.state,e=i.child):e=Ji(e,i,f),e}function ey(e,i,a,o){return xr(),i.flags|=256,Je(e,i,a,o),i.child}var ad={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ld(e){return{baseLanes:e,cachePool:Fg()}}function od(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Mn),e}function ny(e,i,a){var o=i.pendingProps,f=!1,d=(i.flags&128)!==0,y;if((y=d)||(y=e!==null&&e.memoizedState===null?!1:(Ee.current&2)!==0),y&&(f=!0,i.flags&=-129),y=(i.flags&32)!==0,i.flags&=-33,e===null){if(Nt){if(f?Ls(i):Us(),(e=se)?(e=cv(e,Fn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Is!==null?{id:Oi,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},a=Lg(e),a.return=i,i.child=a,$e=i,se=null)):e=null,e===null)throw Ds(i);return Fd(e)?i.lanes=32:i.lanes=536870912,null}var S=o.children;return o=o.fallback,f?(Us(),f=i.mode,S=Sc({mode:"hidden",children:S},f),o=Vr(o,f,a,null),S.return=i,o.return=i,S.sibling=o,i.child=S,o=i.child,o.memoizedState=ld(a),o.childLanes=od(e,y,a),i.memoizedState=ad,_o(null,o)):(Ls(i),ud(i,S))}var R=e.memoizedState;if(R!==null&&(S=R.dehydrated,S!==null)){if(d)i.flags&256?(Ls(i),i.flags&=-257,i=cd(e,i,a)):i.memoizedState!==null?(Us(),i.child=e.child,i.flags|=128,i=null):(Us(),S=o.fallback,f=i.mode,o=Sc({mode:"visible",children:o.children},f),S=Vr(S,f,a,null),S.flags|=2,o.return=i,S.return=i,o.sibling=S,i.child=o,Br(i,e.child,null,a),o=i.child,o.memoizedState=ld(a),o.childLanes=od(e,y,a),i.memoizedState=ad,i=_o(null,o));else if(Ls(i),Fd(S)){if(y=S.nextSibling&&S.nextSibling.dataset,y)var z=y.dgst;y=z,o=Error(r(419)),o.stack="",o.digest=y,so({value:o,source:null,stack:null}),i=cd(e,i,a)}else if(De||Ra(e,i,a,!1),y=(a&e.childLanes)!==0,De||y){if(y=ne,y!==null&&(o=kl(y,a),o!==0&&o!==R.retryLane))throw R.retryLane=o,Mr(e,o),Sn(y,e,o),sd;Hd(S)||Oc(),i=cd(e,i,a)}else Hd(S)?(i.flags|=192,i.child=e.child,i=null):(e=R.treeContext,se=Qn(S.nextSibling),$e=i,Nt=!0,Ns=null,Fn=!1,e!==null&&zg(i,e),i=ud(i,o.children),i.flags|=4096);return i}return f?(Us(),S=o.fallback,f=i.mode,R=e.child,z=R.sibling,o=Yi(R,{mode:"hidden",children:o.children}),o.subtreeFlags=R.subtreeFlags&65011712,z!==null?S=Yi(z,S):(S=Vr(S,f,a,null),S.flags|=2),S.return=i,o.return=i,o.sibling=S,i.child=o,_o(null,o),o=i.child,S=e.child.memoizedState,S===null?S=ld(a):(f=S.cachePool,f!==null?(R=Ie._currentValue,f=f.parent!==R?{parent:R,pool:R}:f):f=Fg(),S={baseLanes:S.baseLanes|a,cachePool:f}),o.memoizedState=S,o.childLanes=od(e,y,a),i.memoizedState=ad,_o(e.child,o)):(Ls(i),a=e.child,e=a.sibling,a=Yi(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(y=i.deletions,y===null?(i.deletions=[e],i.flags|=16):y.push(e)),i.child=a,i.memoizedState=null,a)}function ud(e,i){return i=Sc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Sc(e,i){return e=In(22,e,null,i),e.lanes=0,e}function cd(e,i,a){return Br(i,e.child,null,a),e=ud(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function iy(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),Cf(e.return,i,a)}function hd(e,i,a,o,f,d){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:f,treeForkCount:d}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=a,y.tailMode=f,y.treeForkCount=d)}function sy(e,i,a){var o=i.pendingProps,f=o.revealOrder,d=o.tail;o=o.children;var y=Ee.current,S=(y&2)!==0;if(S?(y=y&1|2,i.flags|=128):y&=1,et(Ee,y),Je(e,i,o,a),o=Nt?io:0,!S&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&iy(e,a,i);else if(e.tag===19)iy(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)e=a.alternate,e!==null&&cc(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),hd(i,!1,f,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&cc(e)===null){i.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}hd(i,!0,a,null,d,o);break;case"together":hd(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function Ji(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Ps|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Ra(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,a=Yi(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Yi(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function fd(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&nc(e)))}function CA(e,i,a){switch(i.tag){case 3:Ue(i,i.stateNode.containerInfo),Os(i,Ie,e.memoizedState.cache),xr();break;case 27:case 5:mr(i);break;case 4:Ue(i,i.stateNode.containerInfo);break;case 10:Os(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,kf(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(Ls(i),i.flags|=128,null):(a&i.child.childLanes)!==0?ny(e,i,a):(Ls(i),e=Ji(e,i,a),e!==null?e.sibling:null);Ls(i);break;case 19:var f=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Ra(e,i,a,!1),o=(a&i.childLanes)!==0),f){if(o)return sy(e,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),et(Ee,Ee.current),o)break;return null;case 22:return i.lanes=0,Z_(e,i,a,i.pendingProps);case 24:Os(i,Ie,e.memoizedState.cache)}return Ji(e,i,a)}function ry(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)De=!0;else{if(!fd(e,a)&&(i.flags&128)===0)return De=!1,CA(e,i,a);De=(e.flags&131072)!==0}else De=!1,Nt&&(i.flags&1048576)!==0&&kg(i,io,i.index);switch(i.lanes=0,i.tag){case 16:t:{var o=i.pendingProps;if(e=zr(i.elementType),i.type=e,typeof e=="function")_f(e)?(o=jr(e,o),i.tag=1,i=ty(null,i,e,o,a)):(i.tag=0,i=rd(null,i,e,o,a));else{if(e!=null){var f=e.$$typeof;if(f===Vt){i.tag=11,i=Y_(null,i,e,o,a);break t}else if(f===N){i.tag=14,i=K_(null,i,e,o,a);break t}}throw i=ue(e)||e,Error(r(306,i,""))}}return i;case 0:return rd(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,f=jr(o,i.pendingProps),ty(e,i,o,f,a);case 3:t:{if(Ue(i,i.stateNode.containerInfo),e===null)throw Error(r(387));o=i.pendingProps;var d=i.memoizedState;f=d.element,Mf(e,i),ho(i,o,null,a);var y=i.memoizedState;if(o=y.cache,Os(i,Ie,o),o!==d.cache&&wf(i,[Ie],a,!0),co(),o=y.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:y.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=ey(e,i,o,a);break t}else if(o!==f){f=qn(Error(r(424)),i),so(f),i=ey(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(se=Qn(e.firstChild),$e=i,Nt=!0,Ns=null,Fn=!0,a=Zg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(xr(),o===f){i=Ji(e,i,a);break t}Je(e,i,o,a)}i=i.child}return i;case 26:return Tc(e,i),e===null?(a=gv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Nt||(a=i.type,e=i.pendingProps,o=zc(St.current).createElement(a),o[Ce]=i,o[qe]=e,tn(o,a,e),we(o),i.stateNode=o):i.memoizedState=gv(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return mr(i),e===null&&Nt&&(o=i.stateNode=dv(i.type,i.pendingProps,St.current),$e=i,Fn=!0,f=se,Fs(i.type)?(Gd=f,se=Qn(o.firstChild)):se=f),Je(e,i,i.pendingProps.children,a),Tc(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Nt&&((f=o=se)&&(o=eb(o,i.type,i.pendingProps,Fn),o!==null?(i.stateNode=o,$e=i,se=Qn(o.firstChild),Fn=!1,f=!0):f=!1),f||Ds(i)),mr(i),f=i.type,d=i.pendingProps,y=e!==null?e.memoizedProps:null,o=d.children,Bd(f,d)?o=null:y!==null&&Bd(f,y)&&(i.flags|=32),i.memoizedState!==null&&(f=Pf(e,i,gA,null,null,a),Mo._currentValue=f),Tc(e,i),Je(e,i,o,a),i.child;case 6:return e===null&&Nt&&((e=a=se)&&(a=nb(a,i.pendingProps,Fn),a!==null?(i.stateNode=a,$e=i,se=null,e=!0):e=!1),e||Ds(i)),null;case 13:return ny(e,i,a);case 4:return Ue(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=Br(i,null,o,a):Je(e,i,o,a),i.child;case 11:return Y_(e,i,i.type,i.pendingProps,a);case 7:return Je(e,i,i.pendingProps,a),i.child;case 8:return Je(e,i,i.pendingProps.children,a),i.child;case 12:return Je(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Os(i,i.type,o.value),Je(e,i,o.children,a),i.child;case 9:return f=i.type._context,o=i.pendingProps.children,Ur(i),f=We(f),o=o(f),i.flags|=1,Je(e,i,o,a),i.child;case 14:return K_(e,i,i.type,i.pendingProps,a);case 15:return X_(e,i,i.type,i.pendingProps,a);case 19:return sy(e,i,a);case 31:return bA(e,i,a);case 22:return Z_(e,i,a,i.pendingProps);case 24:return Ur(i),o=We(Ie),e===null?(f=Nf(),f===null&&(f=ne,d=Rf(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:o,cache:f},Of(i),Os(i,Ie,f)):((e.lanes&a)!==0&&(Mf(e,i),ho(i,null,null,a),co()),f=e.memoizedState,d=i.memoizedState,f.parent!==o?(f={parent:o,cache:o},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Os(i,Ie,o)):(o=d.cache,Os(i,Ie,o),o!==f.cache&&wf(i,[Ie],a,!0))),Je(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ts(e){e.flags|=4}function dd(e,i,a,o,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(My())e.flags|=8192;else throw Pr=ac,Df}else e.flags&=-16777217}function ay(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Tv(i))if(My())e.flags|=8192;else throw Pr=ac,Df}function Ac(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Nu():536870912,e.lanes|=i,Pa|=i)}function yo(e,i){if(!Nt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function re(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function wA(e,i,a){var o=i.pendingProps;switch(Tf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return re(i),null;case 1:return re(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Zi(Ie),ce(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(wa(i)?ts(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Af())),re(i),null;case 26:var f=i.type,d=i.memoizedState;return e===null?(ts(i),d!==null?(re(i),ay(i,d)):(re(i),dd(i,f,null,o,a))):d?d!==e.memoizedState?(ts(i),re(i),ay(i,d)):(re(i),i.flags&=-16777217):(e=e.memoizedProps,e!==o&&ts(i),re(i),dd(i,f,e,o,a)),null;case 27:if(sa(i),a=St.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ts(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return re(i),null}e=it.current,wa(i)?Pg(i):(e=dv(f,o,a),i.stateNode=e,ts(i))}return re(i),null;case 5:if(sa(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ts(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return re(i),null}if(d=it.current,wa(i))Pg(i);else{var y=zc(St.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?y.createElement(f,{is:o.is}):y.createElement(f)}}d[Ce]=i,d[qe]=o;t:for(y=i.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===i)break t;for(;y.sibling===null;){if(y.return===null||y.return===i)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}i.stateNode=d;t:switch(tn(d,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&ts(i)}}return re(i),dd(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&ts(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(r(166));if(e=St.current,wa(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,f=$e,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}e[Ce]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||nv(e.nodeValue,a)),e||Ds(i,!0)}else e=zc(e).createTextNode(o),e[Ce]=i,i.stateNode=e}return re(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(o=wa(i),a!==null){if(e===null){if(!o)throw Error(r(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Ce]=i}else xr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;re(i),e=!1}else a=Af(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(Dn(i),i):(Dn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return re(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=wa(i),o!==null&&o.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ce]=i}else xr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;re(i),f=!1}else f=Af(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Dn(i),i):(Dn(i),null)}return Dn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=i.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==f&&(o.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),Ac(i,i.updateQueue),re(i),null);case 4:return ce(),e===null&&Ld(i.stateNode.containerInfo),re(i),null;case 10:return Zi(i.type),re(i),null;case 19:if(Y(Ee),o=i.memoizedState,o===null)return re(i),null;if(f=(i.flags&128)!==0,d=o.rendering,d===null)if(f)yo(o,!1);else{if(_e!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=cc(e),d!==null){for(i.flags|=128,yo(o,!1),e=d.updateQueue,i.updateQueue=e,Ac(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)xg(a,e),a=a.sibling;return et(Ee,Ee.current&1|2),Nt&&Ki(i,o.treeForkCount),i.child}e=e.sibling}o.tail!==null&&fn()>Ic&&(i.flags|=128,f=!0,yo(o,!1),i.lanes=4194304)}else{if(!f)if(e=cc(d),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,Ac(i,e),yo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Nt)return re(i),null}else 2*fn()-o.renderingStartTime>Ic&&a!==536870912&&(i.flags|=128,f=!0,yo(o,!1),i.lanes=4194304);o.isBackwards?(d.sibling=i.child,i.child=d):(e=o.last,e!==null?e.sibling=d:i.child=d,o.last=d)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=fn(),e.sibling=null,a=Ee.current,et(Ee,f?a&1|2:a&1),Nt&&Ki(i,o.treeForkCount),e):(re(i),null);case 22:case 23:return Dn(i),Uf(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(re(i),i.subtreeFlags&6&&(i.flags|=8192)):re(i),a=i.updateQueue,a!==null&&Ac(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&Y(kr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Zi(Ie),re(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function RA(e,i){switch(Tf(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Zi(Ie),ce(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return sa(i),null;case 31:if(i.memoizedState!==null){if(Dn(i),i.alternate===null)throw Error(r(340));xr()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(Dn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));xr()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return Y(Ee),null;case 4:return ce(),null;case 10:return Zi(i.type),null;case 22:case 23:return Dn(i),Uf(),e!==null&&Y(kr),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Zi(Ie),null;case 25:return null;default:return null}}function ly(e,i){switch(Tf(i),i.tag){case 3:Zi(Ie),ce();break;case 26:case 27:case 5:sa(i);break;case 4:ce();break;case 31:i.memoizedState!==null&&Dn(i);break;case 13:Dn(i);break;case 19:Y(Ee);break;case 10:Zi(i.type);break;case 22:case 23:Dn(i),Uf(),e!==null&&Y(kr);break;case 24:Zi(Ie)}}function vo(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var f=o.next;a=f;do{if((a.tag&e)===e){o=void 0;var d=a.create,y=a.inst;o=d(),y.destroy=o}a=a.next}while(a!==f)}}catch(S){Zt(i,i.return,S)}}function ks(e,i,a){try{var o=i.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var d=f.next;o=d;do{if((o.tag&e)===e){var y=o.inst,S=y.destroy;if(S!==void 0){y.destroy=void 0,f=i;var R=a,z=S;try{z()}catch(H){Zt(f,R,H)}}}o=o.next}while(o!==d)}}catch(H){Zt(i,i.return,H)}}function oy(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Wg(i,a)}catch(o){Zt(e,e.return,o)}}}function uy(e,i,a){a.props=jr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Zt(e,i,o)}}function Eo(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(f){Zt(e,i,f)}}function Vi(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(f){Zt(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Zt(e,i,f)}else a.current=null}function cy(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(f){Zt(e,e.return,f)}}function md(e,i,a){try{var o=e.stateNode;XA(o,e.type,a,i),o[qe]=i}catch(f){Zt(e,e.return,f)}}function hy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Fs(e.type)||e.tag===4}function pd(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||hy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Fs(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gd(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ei));else if(o!==4&&(o===27&&Fs(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(gd(e,i,a),e=e.sibling;e!==null;)gd(e,i,a),e=e.sibling}function bc(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&Fs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(bc(e,i,a),e=e.sibling;e!==null;)bc(e,i,a),e=e.sibling}function fy(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);tn(i,o,a),i[Ce]=e,i[qe]=a}catch(d){Zt(e,e.return,d)}}var es=!1,Oe=!1,_d=!1,dy=typeof WeakSet=="function"?WeakSet:Set,He=null;function IA(e,i){if(e=e.containerInfo,zd=Gc,e=Cg(e),cf(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var f=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var y=0,S=-1,R=-1,z=0,H=0,Q=e,B=null;e:for(;;){for(var j;Q!==a||f!==0&&Q.nodeType!==3||(S=y+f),Q!==d||o!==0&&Q.nodeType!==3||(R=y+o),Q.nodeType===3&&(y+=Q.nodeValue.length),(j=Q.firstChild)!==null;)B=Q,Q=j;for(;;){if(Q===e)break e;if(B===a&&++z===f&&(S=y),B===d&&++H===o&&(R=y),(j=Q.nextSibling)!==null)break;Q=B,B=Q.parentNode}Q=j}a=S===-1||R===-1?null:{start:S,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Pd={focusedElem:e,selectionRange:a},Gc=!1,He=i;He!==null;)if(i=He,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,He=e;else for(;He!==null;){switch(i=He,d=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var at=jr(a.type,f);e=o.getSnapshotBeforeUpdate(at,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(ht){Zt(a,a.return,ht)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)jd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,He=e;break}He=i.return}}function my(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:is(e,a),o&4&&vo(5,a);break;case 1:if(is(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(y){Zt(a,a.return,y)}else{var f=jr(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Zt(a,a.return,y)}}o&64&&oy(a),o&512&&Eo(a,a.return);break;case 3:if(is(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Wg(e,i)}catch(y){Zt(a,a.return,y)}}break;case 27:i===null&&o&4&&fy(a);case 26:case 5:is(e,a),i===null&&o&4&&cy(a),o&512&&Eo(a,a.return);break;case 12:is(e,a);break;case 31:is(e,a),o&4&&_y(e,a);break;case 13:is(e,a),o&4&&yy(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=kA.bind(null,a),ib(e,a))));break;case 22:if(o=a.memoizedState!==null||es,!o){i=i!==null&&i.memoizedState!==null||Oe,f=es;var d=Oe;es=o,(Oe=i)&&!d?ss(e,a,(a.subtreeFlags&8772)!==0):is(e,a),es=f,Oe=d}break;case 30:break;default:is(e,a)}}function py(e){var i=e.alternate;i!==null&&(e.alternate=null,py(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ua(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var fe=null,yn=!1;function ns(e,i,a){for(a=a.child;a!==null;)gy(e,i,a),a=a.sibling}function gy(e,i,a){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount($n,a)}catch{}switch(a.tag){case 26:Oe||Vi(a,i),ns(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Oe||Vi(a,i);var o=fe,f=yn;Fs(a.type)&&(fe=a.stateNode,yn=!1),ns(e,i,a),No(a.stateNode),fe=o,yn=f;break;case 5:Oe||Vi(a,i);case 6:if(o=fe,f=yn,fe=null,ns(e,i,a),fe=o,yn=f,fe!==null)if(yn)try{(fe.nodeType===9?fe.body:fe.nodeName==="HTML"?fe.ownerDocument.body:fe).removeChild(a.stateNode)}catch(d){Zt(a,i,d)}else try{fe.removeChild(a.stateNode)}catch(d){Zt(a,i,d)}break;case 18:fe!==null&&(yn?(e=fe,ov(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ya(e)):ov(fe,a.stateNode));break;case 4:o=fe,f=yn,fe=a.stateNode.containerInfo,yn=!0,ns(e,i,a),fe=o,yn=f;break;case 0:case 11:case 14:case 15:ks(2,a,i),Oe||ks(4,a,i),ns(e,i,a);break;case 1:Oe||(Vi(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&uy(a,i,o)),ns(e,i,a);break;case 21:ns(e,i,a);break;case 22:Oe=(o=Oe)||a.memoizedState!==null,ns(e,i,a),Oe=o;break;default:ns(e,i,a)}}function _y(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ya(e)}catch(a){Zt(i,i.return,a)}}}function yy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ya(e)}catch(a){Zt(i,i.return,a)}}function NA(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new dy),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new dy),i;default:throw Error(r(435,e.tag))}}function Cc(e,i){var a=NA(e);i.forEach(function(o){if(!a.has(o)){a.add(o);var f=zA.bind(null,e,o);o.then(f,f)}})}function vn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var f=a[o],d=e,y=i,S=y;t:for(;S!==null;){switch(S.tag){case 27:if(Fs(S.type)){fe=S.stateNode,yn=!1;break t}break;case 5:fe=S.stateNode,yn=!1;break t;case 3:case 4:fe=S.stateNode.containerInfo,yn=!0;break t}S=S.return}if(fe===null)throw Error(r(160));gy(d,y,f),fe=null,yn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)vy(i,e),i=i.sibling}var li=null;function vy(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:vn(i,e),En(e),o&4&&(ks(3,e,e.return),vo(3,e),ks(5,e,e.return));break;case 1:vn(i,e),En(e),o&512&&(Oe||a===null||Vi(a,a.return)),o&64&&es&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var f=li;if(vn(i,e),En(e),o&512&&(Oe||a===null||Vi(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(o){case"title":d=f.getElementsByTagName("title")[0],(!d||d[vi]||d[Ce]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(o),f.head.insertBefore(d,f.querySelector("head > title"))),tn(d,o,a),d[Ce]=e,we(d),o=d;break t;case"link":var y=vv("link","href",f).get(o+(a.href||""));if(y){for(var S=0;S<y.length;S++)if(d=y[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(S,1);break e}}d=f.createElement(o),tn(d,o,a),f.head.appendChild(d);break;case"meta":if(y=vv("meta","content",f).get(o+(a.content||""))){for(S=0;S<y.length;S++)if(d=y[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(S,1);break e}}d=f.createElement(o),tn(d,o,a),f.head.appendChild(d);break;default:throw Error(r(468,o))}d[Ce]=e,we(d),o=d}e.stateNode=o}else Ev(f,e.type,e.stateNode);else e.stateNode=yv(f,o,e.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?Ev(f,e.type,e.stateNode):yv(f,o,e.memoizedProps)):o===null&&e.stateNode!==null&&md(e,e.memoizedProps,a.memoizedProps)}break;case 27:vn(i,e),En(e),o&512&&(Oe||a===null||Vi(a,a.return)),a!==null&&o&4&&md(e,e.memoizedProps,a.memoizedProps);break;case 5:if(vn(i,e),En(e),o&512&&(Oe||a===null||Vi(a,a.return)),e.flags&32){f=e.stateNode;try{_n(f,"")}catch(at){Zt(e,e.return,at)}}o&4&&e.stateNode!=null&&(f=e.memoizedProps,md(e,f,a!==null?a.memoizedProps:f)),o&1024&&(_d=!0);break;case 6:if(vn(i,e),En(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(at){Zt(e,e.return,at)}}break;case 3:if(qc=null,f=li,li=Pc(i.containerInfo),vn(i,e),li=f,En(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Ya(i.containerInfo)}catch(at){Zt(e,e.return,at)}_d&&(_d=!1,Ey(e));break;case 4:o=li,li=Pc(e.stateNode.containerInfo),vn(i,e),En(e),li=o;break;case 12:vn(i,e),En(e);break;case 31:vn(i,e),En(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Cc(e,o)));break;case 13:vn(i,e),En(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Rc=fn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Cc(e,o)));break;case 22:f=e.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,z=es,H=Oe;if(es=z||f,Oe=H||R,vn(i,e),Oe=H,es=z,En(e),o&8192)t:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||R||es||Oe||Hr(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){R=a=i;try{if(d=R.stateNode,f)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{S=R.stateNode;var Q=R.memoizedProps.style,B=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;S.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(at){Zt(R,R.return,at)}}}else if(i.tag===6){if(a===null){R=i;try{R.stateNode.nodeValue=f?"":R.memoizedProps}catch(at){Zt(R,R.return,at)}}}else if(i.tag===18){if(a===null){R=i;try{var j=R.stateNode;f?uv(j,!0):uv(R.stateNode,!1)}catch(at){Zt(R,R.return,at)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Cc(e,a))));break;case 19:vn(i,e),En(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Cc(e,o)));break;case 30:break;case 21:break;default:vn(i,e),En(e)}}function En(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(hy(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=pd(e);bc(e,d,f);break;case 5:var y=a.stateNode;a.flags&32&&(_n(y,""),a.flags&=-33);var S=pd(e);bc(e,S,y);break;case 3:case 4:var R=a.stateNode.containerInfo,z=pd(e);gd(e,z,R);break;default:throw Error(r(161))}}catch(H){Zt(e,e.return,H)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Ey(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Ey(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function is(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)my(e,i.alternate,i),i=i.sibling}function Hr(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:ks(4,i,i.return),Hr(i);break;case 1:Vi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&uy(i,i.return,a),Hr(i);break;case 27:No(i.stateNode);case 26:case 5:Vi(i,i.return),Hr(i);break;case 22:i.memoizedState===null&&Hr(i);break;case 30:Hr(i);break;default:Hr(i)}e=e.sibling}}function ss(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,f=e,d=i,y=d.flags;switch(d.tag){case 0:case 11:case 15:ss(f,d,a),vo(4,d);break;case 1:if(ss(f,d,a),o=d,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){Zt(o,o.return,z)}if(o=d,f=o.updateQueue,f!==null){var S=o.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)$g(R[f],S)}catch(z){Zt(o,o.return,z)}}a&&y&64&&oy(d),Eo(d,d.return);break;case 27:fy(d);case 26:case 5:ss(f,d,a),a&&o===null&&y&4&&cy(d),Eo(d,d.return);break;case 12:ss(f,d,a);break;case 31:ss(f,d,a),a&&y&4&&_y(f,d);break;case 13:ss(f,d,a),a&&y&4&&yy(f,d);break;case 22:d.memoizedState===null&&ss(f,d,a),Eo(d,d.return);break;case 30:break;default:ss(f,d,a)}i=i.sibling}}function yd(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ro(a))}function vd(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ro(e))}function oi(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ty(e,i,a,o),i=i.sibling}function Ty(e,i,a,o){var f=i.flags;switch(i.tag){case 0:case 11:case 15:oi(e,i,a,o),f&2048&&vo(9,i);break;case 1:oi(e,i,a,o);break;case 3:oi(e,i,a,o),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ro(e)));break;case 12:if(f&2048){oi(e,i,a,o),e=i.stateNode;try{var d=i.memoizedProps,y=d.id,S=d.onPostCommit;typeof S=="function"&&S(y,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Zt(i,i.return,R)}}else oi(e,i,a,o);break;case 31:oi(e,i,a,o);break;case 13:oi(e,i,a,o);break;case 23:break;case 22:d=i.stateNode,y=i.alternate,i.memoizedState!==null?d._visibility&2?oi(e,i,a,o):To(e,i):d._visibility&2?oi(e,i,a,o):(d._visibility|=2,Ua(e,i,a,o,(i.subtreeFlags&10256)!==0||!1)),f&2048&&yd(y,i);break;case 24:oi(e,i,a,o),f&2048&&vd(i.alternate,i);break;default:oi(e,i,a,o)}}function Ua(e,i,a,o,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=e,y=i,S=a,R=o,z=y.flags;switch(y.tag){case 0:case 11:case 15:Ua(d,y,S,R,f),vo(8,y);break;case 23:break;case 22:var H=y.stateNode;y.memoizedState!==null?H._visibility&2?Ua(d,y,S,R,f):To(d,y):(H._visibility|=2,Ua(d,y,S,R,f)),f&&z&2048&&yd(y.alternate,y);break;case 24:Ua(d,y,S,R,f),f&&z&2048&&vd(y.alternate,y);break;default:Ua(d,y,S,R,f)}i=i.sibling}}function To(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,f=o.flags;switch(o.tag){case 22:To(a,o),f&2048&&yd(o.alternate,o);break;case 24:To(a,o),f&2048&&vd(o.alternate,o);break;default:To(a,o)}i=i.sibling}}var So=8192;function ka(e,i,a){if(e.subtreeFlags&So)for(e=e.child;e!==null;)Sy(e,i,a),e=e.sibling}function Sy(e,i,a){switch(e.tag){case 26:ka(e,i,a),e.flags&So&&e.memoizedState!==null&&pb(a,li,e.memoizedState,e.memoizedProps);break;case 5:ka(e,i,a);break;case 3:case 4:var o=li;li=Pc(e.stateNode.containerInfo),ka(e,i,a),li=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=So,So=16777216,ka(e,i,a),So=o):ka(e,i,a));break;default:ka(e,i,a)}}function Ay(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Ao(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];He=o,Cy(o,e)}Ay(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)by(e),e=e.sibling}function by(e){switch(e.tag){case 0:case 11:case 15:Ao(e),e.flags&2048&&ks(9,e,e.return);break;case 3:Ao(e);break;case 12:Ao(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,wc(e)):Ao(e);break;default:Ao(e)}}function wc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];He=o,Cy(o,e)}Ay(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:ks(8,i,i.return),wc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,wc(i));break;default:wc(i)}e=e.sibling}}function Cy(e,i){for(;He!==null;){var a=He;switch(a.tag){case 0:case 11:case 15:ks(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ro(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,He=o;else t:for(a=e;He!==null;){o=He;var f=o.sibling,d=o.return;if(py(o),o===a){He=null;break t}if(f!==null){f.return=d,He=f;break t}He=d}}}var DA={getCacheForType:function(e){var i=We(Ie),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return We(Ie).controller.signal}},OA=typeof WeakMap=="function"?WeakMap:Map,Gt=0,ne=null,Ct=null,Rt=0,Xt=0,On=null,zs=!1,za=!1,Ed=!1,rs=0,_e=0,Ps=0,Fr=0,Td=0,Mn=0,Pa=0,bo=null,Tn=null,Sd=!1,Rc=0,wy=0,Ic=1/0,Nc=null,Bs=null,ze=0,qs=null,Ba=null,as=0,Ad=0,bd=null,Ry=null,Co=0,Cd=null;function Vn(){return(Gt&2)!==0&&Rt!==0?Rt&-Rt:F.T!==null?Od():Du()}function Iy(){if(Mn===0)if((Rt&536870912)===0||Nt){var e=_r;_r<<=1,(_r&3932160)===0&&(_r=262144),Mn=e}else Mn=536870912;return e=Nn.current,e!==null&&(e.flags|=32),Mn}function Sn(e,i,a){(e===ne&&(Xt===2||Xt===9)||e.cancelPendingCommit!==null)&&(qa(e,0),js(e,Rt,Mn,!1)),yr(e,a),((Gt&2)===0||e!==ne)&&(e===ne&&((Gt&2)===0&&(Fr|=a),_e===4&&js(e,Rt,Mn,!1)),xi(e))}function Ny(e,i,a){if((Gt&6)!==0)throw Error(r(327));var o=!a&&(i&127)===0&&(i&e.expiredLanes)===0||Wn(e,i),f=o?xA(e,i):Rd(e,i,!0),d=o;do{if(f===0){za&&!o&&js(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!MA(a)){f=Rd(e,i,!1),d=!1;continue}if(f===2){if(d=i,e.errorRecoveryDisabledLanes&d)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){i=y;t:{var S=e;f=bo;var R=S.current.memoizedState.isDehydrated;if(R&&(qa(S,y).flags|=256),y=Rd(S,y,!1),y!==2){if(Ed&&!R){S.errorRecoveryDisabledLanes|=d,Fr|=d,f=4;break t}d=Tn,Tn=f,d!==null&&(Tn===null?Tn=d:Tn.push.apply(Tn,d))}f=y}if(d=!1,f!==2)continue}}if(f===1){qa(e,0),js(e,i,0,!0);break}t:{switch(o=e,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:js(o,i,Mn,!zs);break t;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=Rc+300-fn(),10<f)){if(js(o,i,Mn,!zs),gi(o,0,!0)!==0)break t;as=i,o.timeoutHandle=av(Dy.bind(null,o,a,Tn,Nc,Sd,i,Mn,Fr,Pa,zs,d,"Throttled",-0,0),f);break t}Dy(o,a,Tn,Nc,Sd,i,Mn,Fr,Pa,zs,d,null,-0,0)}}break}while(!0);xi(e)}function Dy(e,i,a,o,f,d,y,S,R,z,H,Q,B,j){if(e.timeoutHandle=-1,Q=i.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},Sy(i,d,Q);var at=(d&62914560)===d?Rc-fn():(d&4194048)===d?wy-fn():0;if(at=gb(Q,at),at!==null){as=d,e.cancelPendingCommit=at(zy.bind(null,e,i,d,a,o,f,y,S,R,H,Q,null,B,j)),js(e,d,y,!z);return}}zy(e,i,d,a,o,f,y,S,R)}function MA(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var f=a[o],d=f.getSnapshot;f=f.value;try{if(!Rn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function js(e,i,a,o){i&=~Td,i&=~Fr,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var f=i;0<f;){var d=31-ye(f),y=1<<d;o[d]=-1,f&=~y}a!==0&&vr(e,a,i)}function Dc(){return(Gt&6)===0?(wo(0),!1):!0}function wd(){if(Ct!==null){if(Xt===0)var e=Ct.return;else e=Ct,Xi=Lr=null,jf(e),Oa=null,lo=0,e=Ct;for(;e!==null;)ly(e.alternate,e),e=e.return;Ct=null}}function qa(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,WA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),as=0,wd(),ne=e,Ct=a=Yi(e.current,null),Rt=i,Xt=0,On=null,zs=!1,za=Wn(e,i),Ed=!1,Pa=Mn=Td=Fr=Ps=_e=0,Tn=bo=null,Sd=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var f=31-ye(o),d=1<<f;i|=e[f],o&=~d}return rs=i,$u(),a}function Oy(e,i){Et=null,F.H=go,i===Da||i===rc?(i=Yg(),Xt=3):i===Df?(i=Yg(),Xt=4):Xt=i===sd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,On=i,Ct===null&&(_e=1,vc(e,qn(i,e.current)))}function My(){var e=Nn.current;return e===null?!0:(Rt&4194048)===Rt?Gn===null:(Rt&62914560)===Rt||(Rt&536870912)!==0?e===Gn:!1}function Vy(){var e=F.H;return F.H=go,e===null?go:e}function xy(){var e=F.A;return F.A=DA,e}function Oc(){_e=4,zs||(Rt&4194048)!==Rt&&Nn.current!==null||(za=!0),(Ps&134217727)===0&&(Fr&134217727)===0||ne===null||js(ne,Rt,Mn,!1)}function Rd(e,i,a){var o=Gt;Gt|=2;var f=Vy(),d=xy();(ne!==e||Rt!==i)&&(Nc=null,qa(e,i)),i=!1;var y=_e;t:do try{if(Xt!==0&&Ct!==null){var S=Ct,R=On;switch(Xt){case 8:wd(),y=6;break t;case 3:case 2:case 9:case 6:Nn.current===null&&(i=!0);var z=Xt;if(Xt=0,On=null,ja(e,S,R,z),a&&za){y=0;break t}break;default:z=Xt,Xt=0,On=null,ja(e,S,R,z)}}VA(),y=_e;break}catch(H){Oy(e,H)}while(!0);return i&&e.shellSuspendCounter++,Xi=Lr=null,Gt=o,F.H=f,F.A=d,Ct===null&&(ne=null,Rt=0,$u()),y}function VA(){for(;Ct!==null;)Ly(Ct)}function xA(e,i){var a=Gt;Gt|=2;var o=Vy(),f=xy();ne!==e||Rt!==i?(Nc=null,Ic=fn()+500,qa(e,i)):za=Wn(e,i);t:do try{if(Xt!==0&&Ct!==null){i=Ct;var d=On;e:switch(Xt){case 1:Xt=0,On=null,ja(e,i,d,1);break;case 2:case 9:if(Gg(d)){Xt=0,On=null,Uy(i);break}i=function(){Xt!==2&&Xt!==9||ne!==e||(Xt=7),xi(e)},d.then(i,i);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:Gg(d)?(Xt=0,On=null,Uy(i)):(Xt=0,On=null,ja(e,i,d,7));break;case 5:var y=null;switch(Ct.tag){case 26:y=Ct.memoizedState;case 5:case 27:var S=Ct;if(y?Tv(y):S.stateNode.complete){Xt=0,On=null;var R=S.sibling;if(R!==null)Ct=R;else{var z=S.return;z!==null?(Ct=z,Mc(z)):Ct=null}break e}}Xt=0,On=null,ja(e,i,d,5);break;case 6:Xt=0,On=null,ja(e,i,d,6);break;case 8:wd(),_e=6;break t;default:throw Error(r(462))}}LA();break}catch(H){Oy(e,H)}while(!0);return Xi=Lr=null,F.H=o,F.A=f,Gt=a,Ct!==null?0:(ne=null,Rt=0,$u(),_e)}function LA(){for(;Ct!==null&&!nf();)Ly(Ct)}function Ly(e){var i=ry(e.alternate,e,rs);e.memoizedProps=e.pendingProps,i===null?Mc(e):Ct=i}function Uy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=J_(a,i,i.pendingProps,i.type,void 0,Rt);break;case 11:i=J_(a,i,i.pendingProps,i.type.render,i.ref,Rt);break;case 5:jf(i);default:ly(a,i),i=Ct=xg(i,rs),i=ry(a,i,rs)}e.memoizedProps=e.pendingProps,i===null?Mc(e):Ct=i}function ja(e,i,a,o){Xi=Lr=null,jf(i),Oa=null,lo=0;var f=i.return;try{if(AA(e,f,i,a,Rt)){_e=1,vc(e,qn(a,e.current)),Ct=null;return}}catch(d){if(f!==null)throw Ct=f,d;_e=1,vc(e,qn(a,e.current)),Ct=null;return}i.flags&32768?(Nt||o===1?e=!0:za||(Rt&536870912)!==0?e=!1:(zs=e=!0,(o===2||o===9||o===3||o===6)&&(o=Nn.current,o!==null&&o.tag===13&&(o.flags|=16384))),ky(i,e)):Mc(i)}function Mc(e){var i=e;do{if((i.flags&32768)!==0){ky(i,zs);return}e=i.return;var a=wA(i.alternate,i,rs);if(a!==null){Ct=a;return}if(i=i.sibling,i!==null){Ct=i;return}Ct=i=e}while(i!==null);_e===0&&(_e=5)}function ky(e,i){do{var a=RA(e.alternate,e);if(a!==null){a.flags&=32767,Ct=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Ct=e;return}Ct=e=a}while(e!==null);_e=6,Ct=null}function zy(e,i,a,o,f,d,y,S,R){e.cancelPendingCommit=null;do Vc();while(ze!==0);if((Gt&6)!==0)throw Error(r(327));if(i!==null){if(i===e.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=pf,af(e,a,d,y,S,R),e===ne&&(Ct=ne=null,Rt=0),Ba=i,qs=e,as=a,Ad=d,bd=f,Ry=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,PA(ys,function(){return Hy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=F.T,F.T=null,f=tt.p,tt.p=2,y=Gt,Gt|=4;try{IA(e,i,a)}finally{Gt=y,tt.p=f,F.T=o}}ze=1,Py(),By(),qy()}}function Py(){if(ze===1){ze=0;var e=qs,i=Ba,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var o=tt.p;tt.p=2;var f=Gt;Gt|=4;try{vy(i,e);var d=Pd,y=Cg(e.containerInfo),S=d.focusedElem,R=d.selectionRange;if(y!==S&&S&&S.ownerDocument&&bg(S.ownerDocument.documentElement,S)){if(R!==null&&cf(S)){var z=R.start,H=R.end;if(H===void 0&&(H=z),"selectionStart"in S)S.selectionStart=z,S.selectionEnd=Math.min(H,S.value.length);else{var Q=S.ownerDocument||document,B=Q&&Q.defaultView||window;if(B.getSelection){var j=B.getSelection(),at=S.textContent.length,ht=Math.min(R.start,at),te=R.end===void 0?ht:Math.min(R.end,at);!j.extend&&ht>te&&(y=te,te=ht,ht=y);var x=Ag(S,ht),D=Ag(S,te);if(x&&D&&(j.rangeCount!==1||j.anchorNode!==x.node||j.anchorOffset!==x.offset||j.focusNode!==D.node||j.focusOffset!==D.offset)){var k=Q.createRange();k.setStart(x.node,x.offset),j.removeAllRanges(),ht>te?(j.addRange(k),j.extend(D.node,D.offset)):(k.setEnd(D.node,D.offset),j.addRange(k))}}}}for(Q=[],j=S;j=j.parentNode;)j.nodeType===1&&Q.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<Q.length;S++){var G=Q[S];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}Gc=!!zd,Pd=zd=null}finally{Gt=f,tt.p=o,F.T=a}}e.current=i,ze=2}}function By(){if(ze===2){ze=0;var e=qs,i=Ba,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var o=tt.p;tt.p=2;var f=Gt;Gt|=4;try{my(e,i.alternate,i)}finally{Gt=f,tt.p=o,F.T=a}}ze=3}}function qy(){if(ze===4||ze===3){ze=0,Au();var e=qs,i=Ba,a=as,o=Ry;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ze=5:(ze=0,Ba=qs=null,jy(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Bs=null),Hi(a),i=i.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot($n,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=F.T,f=tt.p,tt.p=2,F.T=null;try{for(var d=e.onRecoverableError,y=0;y<o.length;y++){var S=o[y];d(S.value,{componentStack:S.stack})}}finally{F.T=i,tt.p=f}}(as&3)!==0&&Vc(),xi(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===Cd?Co++:(Co=0,Cd=e):Co=0,wo(0)}}function jy(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,ro(i)))}function Vc(){return Py(),By(),qy(),Hy()}function Hy(){if(ze!==5)return!1;var e=qs,i=Ad;Ad=0;var a=Hi(as),o=F.T,f=tt.p;try{tt.p=32>a?32:a,F.T=null,a=bd,bd=null;var d=qs,y=as;if(ze=0,Ba=qs=null,as=0,(Gt&6)!==0)throw Error(r(331));var S=Gt;if(Gt|=4,by(d.current),Ty(d,d.current,y,a),Gt=S,wo(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot($n,d)}catch{}return!0}finally{tt.p=f,F.T=o,jy(e,i)}}function Fy(e,i,a){i=qn(a,i),i=id(e.stateNode,i,2),e=xs(e,i,2),e!==null&&(yr(e,2),xi(e))}function Zt(e,i,a){if(e.tag===3)Fy(e,e,a);else for(;i!==null;){if(i.tag===3){Fy(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Bs===null||!Bs.has(o))){e=qn(a,e),a=G_(2),o=xs(i,a,2),o!==null&&(Q_(a,o,i,e),yr(o,2),xi(o));break}}i=i.return}}function Id(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new OA;var f=new Set;o.set(i,f)}else f=o.get(i),f===void 0&&(f=new Set,o.set(i,f));f.has(a)||(Ed=!0,f.add(a),e=UA.bind(null,e,i,a),i.then(e,e))}function UA(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ne===e&&(Rt&a)===a&&(_e===4||_e===3&&(Rt&62914560)===Rt&&300>fn()-Rc?(Gt&2)===0&&qa(e,0):Td|=a,Pa===Rt&&(Pa=0)),xi(e)}function Gy(e,i){i===0&&(i=Nu()),e=Mr(e,i),e!==null&&(yr(e,i),xi(e))}function kA(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Gy(e,a)}function zA(e,i){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(i),Gy(e,a)}function PA(e,i){return ke(e,i)}var xc=null,Ha=null,Nd=!1,Lc=!1,Dd=!1,Hs=0;function xi(e){e!==Ha&&e.next===null&&(Ha===null?xc=Ha=e:Ha=Ha.next=e),Lc=!0,Nd||(Nd=!0,qA())}function wo(e,i){if(!Dd&&Lc){Dd=!0;do for(var a=!1,o=xc;o!==null;){if(e!==0){var f=o.pendingLanes;if(f===0)var d=0;else{var y=o.suspendedLanes,S=o.pingedLanes;d=(1<<31-ye(42|e)+1)-1,d&=f&~(y&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Xy(o,d))}else d=Rt,d=gi(o,o===ne?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Wn(o,d)||(a=!0,Xy(o,d));o=o.next}while(a);Dd=!1}}function BA(){Qy()}function Qy(){Lc=Nd=!1;var e=0;Hs!==0&&$A()&&(e=Hs);for(var i=fn(),a=null,o=xc;o!==null;){var f=o.next,d=Yy(o,i);d===0?(o.next=null,a===null?xc=f:a.next=f,f===null&&(Ha=a)):(a=o,(e!==0||(d&3)!==0)&&(Lc=!0)),o=f}ze!==0&&ze!==5||wo(e),Hs!==0&&(Hs=0)}function Yy(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var y=31-ye(d),S=1<<y,R=f[y];R===-1?((S&a)===0||(S&o)!==0)&&(f[y]=rf(S,i)):R<=i&&(e.expiredLanes|=S),d&=~S}if(i=ne,a=Rt,a=gi(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&(Xt===2||Xt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&_s(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Wn(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&_s(o),Hi(a)){case 2:case 8:a=Ll;break;case 32:a=ys;break;case 268435456:a=bu;break;default:a=ys}return o=Ky.bind(null,e),a=ke(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&_s(o),e.callbackPriority=2,e.callbackNode=null,2}function Ky(e,i){if(ze!==0&&ze!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Vc()&&e.callbackNode!==a)return null;var o=Rt;return o=gi(e,e===ne?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Ny(e,o,i),Yy(e,fn()),e.callbackNode!=null&&e.callbackNode===a?Ky.bind(null,e):null)}function Xy(e,i){if(Vc())return null;Ny(e,i,!0)}function qA(){JA(function(){(Gt&6)!==0?ke(xl,BA):Qy()})}function Od(){if(Hs===0){var e=Ia;e===0&&(e=mi,mi<<=1,(mi&261888)===0&&(mi=256)),Hs=e}return Hs}function Zy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:da(""+e)}function $y(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function jA(e,i,a,o,f){if(i==="submit"&&a&&a.stateNode===f){var d=Zy((f[qe]||null).action),y=o.submitter;y&&(i=(i=y[qe]||null)?Zy(i.formAction):y.getAttribute("formAction"),i!==null&&(d=i,y=null));var S=new Ri("action","action",null,o,f);e.push({event:S,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Hs!==0){var R=y?$y(f,y):new FormData(f);$f(a,{pending:!0,data:R,method:f.method,action:d},null,R)}}else typeof d=="function"&&(S.preventDefault(),R=y?$y(f,y):new FormData(f),$f(a,{pending:!0,data:R,method:f.method,action:d},d,R))},currentTarget:f}]})}}for(var Md=0;Md<mf.length;Md++){var Vd=mf[Md],HA=Vd.toLowerCase(),FA=Vd[0].toUpperCase()+Vd.slice(1);ai(HA,"on"+FA)}ai(Ig,"onAnimationEnd"),ai(Ng,"onAnimationIteration"),ai(Dg,"onAnimationStart"),ai("dblclick","onDoubleClick"),ai("focusin","onFocus"),ai("focusout","onBlur"),ai(aA,"onTransitionRun"),ai(lA,"onTransitionStart"),ai(oA,"onTransitionCancel"),ai(Og,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Si("onBeforeInput",["compositionend","keypress","textInput","paste"]),Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ro));function Wy(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],f=o.event;o=o.listeners;t:{var d=void 0;if(i)for(var y=o.length-1;0<=y;y--){var S=o[y],R=S.instance,z=S.currentTarget;if(S=S.listener,R!==d&&f.isPropagationStopped())break t;d=S,f.currentTarget=z;try{d(f)}catch(H){Zu(H)}f.currentTarget=null,d=R}else for(y=0;y<o.length;y++){if(S=o[y],R=S.instance,z=S.currentTarget,S=S.listener,R!==d&&f.isPropagationStopped())break t;d=S,f.currentTarget=z;try{d(f)}catch(H){Zu(H)}f.currentTarget=null,d=R}}}}function wt(e,i){var a=i[oa];a===void 0&&(a=i[oa]=new Set);var o=e+"__bubble";a.has(o)||(Jy(i,e,2,!1),a.add(o))}function xd(e,i,a){var o=0;i&&(o|=4),Jy(a,e,o,i)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function Ld(e){if(!e[Uc]){e[Uc]=!0,zl.forEach(function(a){a!=="selectionchange"&&(GA.has(a)||xd(a,!1,e),xd(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Uc]||(i[Uc]=!0,xd("selectionchange",!1,i))}}function Jy(e,i,a,o){switch(Iv(i)){case 2:var f=vb;break;case 8:f=Eb;break;default:f=Zd}a=f.bind(null,i,a,e),f=void 0,!br||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),o?f!==void 0?e.addEventListener(i,a,{capture:!0,passive:f}):e.addEventListener(i,a,!0):f!==void 0?e.addEventListener(i,a,{passive:f}):e.addEventListener(i,a,!1)}function Ud(e,i,a,o,f){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var S=o.stateNode.containerInfo;if(S===f)break;if(y===4)for(y=o.return;y!==null;){var R=y.tag;if((R===3||R===4)&&y.stateNode.containerInfo===f)return;y=y.return}for(;S!==null;){if(y=Ei(S),y===null)return;if(R=y.tag,R===5||R===6||R===26||R===27){o=d=y;continue t}S=S.parentNode}}o=o.return}bs(function(){var z=d,H=kn(a),Q=[];t:{var B=Mg.get(e);if(B!==void 0){var j=Ri,at=e;switch(e){case"keypress":if(wr(a)===0)break t;case"keydown":case"keyup":j=Yu;break;case"focusin":at="focus",j=Ir;break;case"focusout":at="blur",j=Ir;break;case"beforeblur":case"afterblur":j=Ir;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=$l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=zu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=p;break;case Ig:case Ng:case Dg:j=Bu;break;case Og:j=A;break;case"scroll":case"scrollend":j=Zl;break;case"wheel":j=q;break;case"copy":case"cut":case"paste":j=qu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Qi;break;case"toggle":case"beforetoggle":j=vt}var ht=(i&4)!==0,te=!ht&&(e==="scroll"||e==="scrollend"),x=ht?B!==null?B+"Capture":null:B;ht=[];for(var D=z,k;D!==null;){var G=D;if(k=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||k===null||x===null||(G=ni(D,x),G!=null&&ht.push(Io(D,G,k))),te)break;D=D.return}0<ht.length&&(B=new j(B,at,null,a,H),Q.push({event:B,listeners:ht}))}}if((i&7)===0){t:{if(B=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",B&&a!==Yl&&(at=a.relatedTarget||a.fromElement)&&(Ei(at)||at[yi]))break t;if((j||B)&&(B=H.window===H?H:(B=H.ownerDocument)?B.defaultView||B.parentWindow:window,j?(at=a.relatedTarget||a.toElement,j=z,at=at?Ei(at):null,at!==null&&(te=u(at),ht=at.tag,at!==te||ht!==5&&ht!==27&&ht!==6)&&(at=null)):(j=null,at=z),j!==at)){if(ht=$l,G="onMouseLeave",x="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(ht=Qi,G="onPointerLeave",x="onPointerEnter",D="pointer"),te=j==null?B:Cn(j),k=at==null?B:Cn(at),B=new ht(G,D+"leave",j,a,H),B.target=te,B.relatedTarget=k,G=null,Ei(H)===z&&(ht=new ht(x,D+"enter",at,a,H),ht.target=k,ht.relatedTarget=te,G=ht),te=G,j&&at)e:{for(ht=QA,x=j,D=at,k=0,G=x;G;G=ht(G))k++;G=0;for(var ut=D;ut;ut=ht(ut))G++;for(;0<k-G;)x=ht(x),k--;for(;0<G-k;)D=ht(D),G--;for(;k--;){if(x===D||D!==null&&x===D.alternate){ht=x;break e}x=ht(x),D=ht(D)}ht=null}else ht=null;j!==null&&tv(Q,B,j,ht,!1),at!==null&&te!==null&&tv(Q,te,at,ht,!0)}}t:{if(B=z?Cn(z):window,j=B.nodeName&&B.nodeName.toLowerCase(),j==="select"||j==="input"&&B.type==="file")var jt=_g;else if(pg(B))if(yg)jt=iA;else{jt=eA;var lt=tA}else j=B.nodeName,!j||j.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&fa(z.elementType)&&(jt=_g):jt=nA;if(jt&&(jt=jt(e,z))){gg(Q,jt,a,H);break t}lt&&lt(e,B,z),e==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&Fl(B,"number",B.value)}switch(lt=z?Cn(z):window,e){case"focusin":(pg(lt)||lt.contentEditable==="true")&&(Ea=lt,hf=z,no=null);break;case"focusout":no=hf=Ea=null;break;case"mousedown":ff=!0;break;case"contextmenu":case"mouseup":case"dragend":ff=!1,wg(Q,a,H);break;case"selectionchange":if(rA)break;case"keydown":case"keyup":wg(Q,a,H)}var At;if(Ft)t:{switch(e){case"compositionstart":var It="onCompositionStart";break t;case"compositionend":It="onCompositionEnd";break t;case"compositionupdate":It="onCompositionUpdate";break t}It=void 0}else va?Nr(e,a)&&(It="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(It="onCompositionStart");It&&(Di&&a.locale!=="ko"&&(va||It!=="onCompositionStart"?It==="onCompositionEnd"&&va&&(At=Xl()):(wi=H,Kl="value"in wi?wi.value:wi.textContent,va=!0)),lt=kc(z,It),0<lt.length&&(It=new Ni(It,e,null,a,H),Q.push({event:It,listeners:lt}),At?It.data=At:(At=ya(a),At!==null&&(It.data=At)))),(At=Pn?ZS(e,a):$S(e,a))&&(It=kc(z,"onBeforeInput"),0<It.length&&(lt=new Ni("onBeforeInput","beforeinput",null,a,H),Q.push({event:lt,listeners:It}),lt.data=At)),jA(Q,e,z,a,H)}Wy(Q,i)})}function Io(e,i,a){return{instance:e,listener:i,currentTarget:a}}function kc(e,i){for(var a=i+"Capture",o=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ni(e,a),f!=null&&o.unshift(Io(e,f,d)),f=ni(e,i),f!=null&&o.push(Io(e,f,d))),e.tag===3)return o;e=e.return}return[]}function QA(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function tv(e,i,a,o,f){for(var d=i._reactName,y=[];a!==null&&a!==o;){var S=a,R=S.alternate,z=S.stateNode;if(S=S.tag,R!==null&&R===o)break;S!==5&&S!==26&&S!==27||z===null||(R=z,f?(z=ni(a,d),z!=null&&y.unshift(Io(a,z,R))):f||(z=ni(a,d),z!=null&&y.push(Io(a,z,R)))),a=a.return}y.length!==0&&e.push({event:i,listeners:y})}var YA=/\r\n?/g,KA=/\u0000|\uFFFD/g;function ev(e){return(typeof e=="string"?e:""+e).replace(YA,`
`).replace(KA,"")}function nv(e,i){return i=ev(i),ev(e)===i}function Jt(e,i,a,o,f,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||_n(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&_n(e,""+o);break;case"className":wn(e,"class",o);break;case"tabIndex":wn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":wn(e,a,o);break;case"style":Ql(e,o,d);break;case"data":if(i!=="object"){wn(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=da(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Jt(e,i,"name",f.name,f,null),Jt(e,i,"formEncType",f.formEncType,f,null),Jt(e,i,"formMethod",f.formMethod,f,null),Jt(e,i,"formTarget",f.formTarget,f,null)):(Jt(e,i,"encType",f.encType,f,null),Jt(e,i,"method",f.method,f,null),Jt(e,i,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=da(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=ei);break;case"onScroll":o!=null&&wt("scroll",e);break;case"onScrollEnd":o!=null&&wt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=da(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":wt("beforetoggle",e),wt("toggle",e),ca(e,"popover",o);break;case"xlinkActuate":Re(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Re(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Re(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Re(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Re(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Re(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Re(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Re(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Re(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ca(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ku.get(a)||a,ca(e,a,o))}}function kd(e,i,a,o,f,d){switch(a){case"style":Ql(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof o=="string"?_n(e,o):(typeof o=="number"||typeof o=="bigint")&&_n(e,""+o);break;case"onScroll":o!=null&&wt("scroll",e);break;case"onScrollEnd":o!=null&&wt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pl.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=e[qe]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,f),typeof o=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,f);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):ca(e,a,o)}}}function tn(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",e),wt("load",e);var o=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var y=a[d];if(y!=null)switch(d){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Jt(e,i,d,y,a,null)}}f&&Jt(e,i,"srcSet",a.srcSet,a,null),o&&Jt(e,i,"src",a.src,a,null);return;case"input":wt("invalid",e);var S=d=y=f=null,R=null,z=null;for(o in a)if(a.hasOwnProperty(o)){var H=a[o];if(H!=null)switch(o){case"name":f=H;break;case"type":y=H;break;case"checked":R=H;break;case"defaultChecked":z=H;break;case"value":d=H;break;case"defaultValue":S=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:Jt(e,i,o,H,a,null)}}xu(e,d,S,R,z,y,f,!1);return;case"select":wt("invalid",e),o=y=d=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":d=S;break;case"defaultValue":y=S;break;case"multiple":o=S;default:Jt(e,i,f,S,a,null)}i=d,a=y,e.multiple=!!o,i!=null?Es(e,!!o,i,!1):a!=null&&Es(e,!!o,a,!0);return;case"textarea":wt("invalid",e),d=f=o=null;for(y in a)if(a.hasOwnProperty(y)&&(S=a[y],S!=null))switch(y){case"value":o=S;break;case"defaultValue":f=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:Jt(e,i,y,S,a,null)}Ts(e,o,f,d);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(o=a[R],o!=null))switch(R){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Jt(e,i,R,o,a,null)}return;case"dialog":wt("beforetoggle",e),wt("toggle",e),wt("cancel",e),wt("close",e);break;case"iframe":case"object":wt("load",e);break;case"video":case"audio":for(o=0;o<Ro.length;o++)wt(Ro[o],e);break;case"image":wt("error",e),wt("load",e);break;case"details":wt("toggle",e);break;case"embed":case"source":case"link":wt("error",e),wt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(o=a[z],o!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Jt(e,i,z,o,a,null)}return;default:if(fa(i)){for(H in a)a.hasOwnProperty(H)&&(o=a[H],o!==void 0&&kd(e,i,H,o,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(o=a[S],o!=null&&Jt(e,i,S,o,a,null))}function XA(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,y=null,S=null,R=null,z=null,H=null;for(j in a){var Q=a[j];if(a.hasOwnProperty(j)&&Q!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":R=Q;default:o.hasOwnProperty(j)||Jt(e,i,j,null,o,Q)}}for(var B in o){var j=o[B];if(Q=a[B],o.hasOwnProperty(B)&&(j!=null||Q!=null))switch(B){case"type":d=j;break;case"name":f=j;break;case"checked":z=j;break;case"defaultChecked":H=j;break;case"value":y=j;break;case"defaultValue":S=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,i));break;default:j!==Q&&Jt(e,i,B,j,o,Q)}}ha(e,y,S,R,z,H,d,f);return;case"select":j=y=S=B=null;for(d in a)if(R=a[d],a.hasOwnProperty(d)&&R!=null)switch(d){case"value":break;case"multiple":j=R;default:o.hasOwnProperty(d)||Jt(e,i,d,null,o,R)}for(f in o)if(d=o[f],R=a[f],o.hasOwnProperty(f)&&(d!=null||R!=null))switch(f){case"value":B=d;break;case"defaultValue":S=d;break;case"multiple":y=d;default:d!==R&&Jt(e,i,f,d,o,R)}i=S,a=y,o=j,B!=null?Es(e,!!a,B,!1):!!o!=!!a&&(i!=null?Es(e,!!a,i,!0):Es(e,!!a,a?[]:"",!1));return;case"textarea":j=B=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!o.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Jt(e,i,S,null,o,f)}for(y in o)if(f=o[y],d=a[y],o.hasOwnProperty(y)&&(f!=null||d!=null))switch(y){case"value":B=f;break;case"defaultValue":j=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&Jt(e,i,y,f,o,d)}Lu(e,B,j);return;case"option":for(var at in a)if(B=a[at],a.hasOwnProperty(at)&&B!=null&&!o.hasOwnProperty(at))switch(at){case"selected":e.selected=!1;break;default:Jt(e,i,at,null,o,B)}for(R in o)if(B=o[R],j=a[R],o.hasOwnProperty(R)&&B!==j&&(B!=null||j!=null))switch(R){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Jt(e,i,R,B,o,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ht in a)B=a[ht],a.hasOwnProperty(ht)&&B!=null&&!o.hasOwnProperty(ht)&&Jt(e,i,ht,null,o,B);for(z in o)if(B=o[z],j=a[z],o.hasOwnProperty(z)&&B!==j&&(B!=null||j!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,i));break;default:Jt(e,i,z,B,o,j)}return;default:if(fa(i)){for(var te in a)B=a[te],a.hasOwnProperty(te)&&B!==void 0&&!o.hasOwnProperty(te)&&kd(e,i,te,void 0,o,B);for(H in o)B=o[H],j=a[H],!o.hasOwnProperty(H)||B===j||B===void 0&&j===void 0||kd(e,i,H,B,o,j);return}}for(var x in a)B=a[x],a.hasOwnProperty(x)&&B!=null&&!o.hasOwnProperty(x)&&Jt(e,i,x,null,o,B);for(Q in o)B=o[Q],j=a[Q],!o.hasOwnProperty(Q)||B===j||B==null&&j==null||Jt(e,i,Q,B,o,j)}function iv(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZA(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var f=a[o],d=f.transferSize,y=f.initiatorType,S=f.duration;if(d&&S&&iv(y)){for(y=0,S=f.responseEnd,o+=1;o<a.length;o++){var R=a[o],z=R.startTime;if(z>S)break;var H=R.transferSize,Q=R.initiatorType;H&&iv(Q)&&(R=R.responseEnd,y+=H*(R<S?1:(S-z)/(R-z)))}if(--o,i+=8*(d+y)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var zd=null,Pd=null;function zc(e){return e.nodeType===9?e:e.ownerDocument}function sv(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rv(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Bd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var qd=null;function $A(){var e=window.event;return e&&e.type==="popstate"?e===qd?!1:(qd=e,!0):(qd=null,!1)}var av=typeof setTimeout=="function"?setTimeout:void 0,WA=typeof clearTimeout=="function"?clearTimeout:void 0,lv=typeof Promise=="function"?Promise:void 0,JA=typeof queueMicrotask=="function"?queueMicrotask:typeof lv<"u"?function(e){return lv.resolve(null).then(e).catch(tb)}:av;function tb(e){setTimeout(function(){throw e})}function Fs(e){return e==="head"}function ov(e,i){var a=i,o=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(f),Ya(i);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")No(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,No(a);for(var d=a.firstChild;d;){var y=d.nextSibling,S=d.nodeName;d[vi]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=y}}else a==="body"&&No(e.ownerDocument.body);a=f}while(a);Ya(i)}function uv(e,i){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function jd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":jd(a),ua(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function eb(e,i,a,o){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[vi])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Qn(e.nextSibling),e===null)break}return null}function nb(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Qn(e.nextSibling),e===null))return null;return e}function cv(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Qn(e.nextSibling),e===null))return null;return e}function Hd(e){return e.data==="$?"||e.data==="$~"}function Fd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ib(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Qn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var Gd=null;function hv(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return Qn(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function fv(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function dv(e,i,a){switch(i=zc(a),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function No(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ua(e)}var Yn=new Map,mv=new Set;function Pc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ls=tt.d;tt.d={f:sb,r:rb,D:ab,C:lb,L:ob,m:ub,X:hb,S:cb,M:fb};function sb(){var e=ls.f(),i=Dc();return e||i}function rb(e){var i=Un(e);i!==null&&i.tag===5&&i.type==="form"?O_(i):ls.r(e)}var Fa=typeof document>"u"?null:document;function pv(e,i,a){var o=Fa;if(o&&typeof i=="string"&&i){var f=gn(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),mv.has(f)||(mv.add(f),e={rel:e,crossOrigin:a,href:i},o.querySelector(f)===null&&(i=o.createElement("link"),tn(i,"link",e),we(i),o.head.appendChild(i)))}}function ab(e){ls.D(e),pv("dns-prefetch",e,null)}function lb(e,i){ls.C(e,i),pv("preconnect",e,i)}function ob(e,i,a){ls.L(e,i,a);var o=Fa;if(o&&e&&i){var f='link[rel="preload"][as="'+gn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+gn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+gn(a.imageSizes)+'"]')):f+='[href="'+gn(e)+'"]';var d=f;switch(i){case"style":d=Ga(e);break;case"script":d=Qa(e)}Yn.has(d)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Yn.set(d,e),o.querySelector(f)!==null||i==="style"&&o.querySelector(Do(d))||i==="script"&&o.querySelector(Oo(d))||(i=o.createElement("link"),tn(i,"link",e),we(i),o.head.appendChild(i)))}}function ub(e,i){ls.m(e,i);var a=Fa;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+gn(o)+'"][href="'+gn(e)+'"]',d=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Qa(e)}if(!Yn.has(d)&&(e=T({rel:"modulepreload",href:e},i),Yn.set(d,e),a.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Oo(d)))return}o=a.createElement("link"),tn(o,"link",e),we(o),a.head.appendChild(o)}}}function cb(e,i,a){ls.S(e,i,a);var o=Fa;if(o&&e){var f=Ti(o).hoistableStyles,d=Ga(e);i=i||"default";var y=f.get(d);if(!y){var S={loading:0,preload:null};if(y=o.querySelector(Do(d)))S.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Yn.get(d))&&Qd(e,a);var R=y=o.createElement("link");we(R),tn(R,"link",e),R._p=new Promise(function(z,H){R.onload=z,R.onerror=H}),R.addEventListener("load",function(){S.loading|=1}),R.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Bc(y,i,o)}y={type:"stylesheet",instance:y,count:1,state:S},f.set(d,y)}}}function hb(e,i){ls.X(e,i);var a=Fa;if(a&&e){var o=Ti(a).hoistableScripts,f=Qa(e),d=o.get(f);d||(d=a.querySelector(Oo(f)),d||(e=T({src:e,async:!0},i),(i=Yn.get(f))&&Yd(e,i),d=a.createElement("script"),we(d),tn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(f,d))}}function fb(e,i){ls.M(e,i);var a=Fa;if(a&&e){var o=Ti(a).hoistableScripts,f=Qa(e),d=o.get(f);d||(d=a.querySelector(Oo(f)),d||(e=T({src:e,async:!0,type:"module"},i),(i=Yn.get(f))&&Yd(e,i),d=a.createElement("script"),we(d),tn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(f,d))}}function gv(e,i,a,o){var f=(f=St.current)?Pc(f):null;if(!f)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ga(a.href),a=Ti(f).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ga(a.href);var d=Ti(f).hoistableStyles,y=d.get(e);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,y),(d=f.querySelector(Do(e)))&&!d._p&&(y.instance=d,y.state.loading=5),Yn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(e,a),d||db(f,e,a,y.state))),i&&o===null)throw Error(r(528,""));return y}if(i&&o!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Qa(a),a=Ti(f).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Ga(e){return'href="'+gn(e)+'"'}function Do(e){return'link[rel="stylesheet"]['+e+"]"}function _v(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function db(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),tn(i,"link",a),we(i),e.head.appendChild(i))}function Qa(e){return'[src="'+gn(e)+'"]'}function Oo(e){return"script[async]"+e}function yv(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+gn(a.href)+'"]');if(o)return i.instance=o,we(o),o;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),we(o),tn(o,"style",f),Bc(o,a.precedence,e),i.instance=o;case"stylesheet":f=Ga(a.href);var d=e.querySelector(Do(f));if(d)return i.state.loading|=4,i.instance=d,we(d),d;o=_v(a),(f=Yn.get(f))&&Qd(o,f),d=(e.ownerDocument||e).createElement("link"),we(d);var y=d;return y._p=new Promise(function(S,R){y.onload=S,y.onerror=R}),tn(d,"link",o),i.state.loading|=4,Bc(d,a.precedence,e),i.instance=d;case"script":return d=Qa(a.src),(f=e.querySelector(Oo(d)))?(i.instance=f,we(f),f):(o=a,(f=Yn.get(d))&&(o=T({},a),Yd(o,f)),e=e.ownerDocument||e,f=e.createElement("script"),we(f),tn(f,"link",o),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Bc(o,a.precedence,e));return i.instance}function Bc(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,d=f,y=0;y<o.length;y++){var S=o[y];if(S.dataset.precedence===i)d=S;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Qd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Yd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var qc=null;function vv(e,i,a){if(qc===null){var o=new Map,f=qc=new Map;f.set(a,o)}else f=qc,o=f.get(a),o||(o=new Map,f.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var d=a[f];if(!(d[vi]||d[Ce]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(i)||"";y=e+y;var S=o.get(y);S?S.push(d):o.set(y,[d])}}return o}function Ev(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function mb(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Tv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function pb(e,i,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Ga(o.href),d=i.querySelector(Do(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=jc.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=d,we(d);return}d=i.ownerDocument||i,o=_v(o),(f=Yn.get(f))&&Qd(o,f),d=d.createElement("link"),we(d);var y=d;y._p=new Promise(function(S,R){y.onload=S,y.onerror=R}),tn(d,"link",o),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=jc.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var Kd=0;function gb(e,i){return e.stylesheets&&e.count===0&&Fc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&Fc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+i);0<e.imgBytes&&Kd===0&&(Kd=62500*ZA());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Fc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Kd?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function jc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Hc=null;function Fc(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Hc=new Map,i.forEach(_b,e),Hc=null,jc.call(e))}function _b(e,i){if(!(i.state.loading&4)){var a=Hc.get(e);if(a)var o=a.get(null);else{a=new Map,Hc.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var y=f[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),o=y)}o&&a.set(null,o)}f=i.instance,y=f.getAttribute("data-precedence"),d=a.get(y)||o,d===o&&a.set(null,f),a.set(y,f),this.count++,o=jc.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var Mo={$$typeof:ot,Provider:null,Consumer:null,_currentValue:ct,_currentValue2:ct,_threadCount:0};function yb(e,i,a,o,f,d,y,S,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.hiddenUpdates=_i(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function Sv(e,i,a,o,f,d,y,S,R,z,H,Q){return e=new yb(e,i,a,y,R,z,H,Q,S),i=1,d===!0&&(i|=24),d=In(3,null,null,i),e.current=d,d.stateNode=e,i=Rf(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},Of(d),e}function Av(e){return e?(e=Aa,e):Aa}function bv(e,i,a,o,f,d){f=Av(f),o.context===null?o.context=f:o.pendingContext=f,o=Vs(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=xs(e,o,i),a!==null&&(Sn(a,e,i),uo(a,e,i))}function Cv(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Xd(e,i){Cv(e,i),(e=e.alternate)&&Cv(e,i)}function wv(e){if(e.tag===13||e.tag===31){var i=Mr(e,67108864);i!==null&&Sn(i,e,67108864),Xd(e,67108864)}}function Rv(e){if(e.tag===13||e.tag===31){var i=Vn();i=Er(i);var a=Mr(e,i);a!==null&&Sn(a,e,i),Xd(e,i)}}var Gc=!0;function vb(e,i,a,o){var f=F.T;F.T=null;var d=tt.p;try{tt.p=2,Zd(e,i,a,o)}finally{tt.p=d,F.T=f}}function Eb(e,i,a,o){var f=F.T;F.T=null;var d=tt.p;try{tt.p=8,Zd(e,i,a,o)}finally{tt.p=d,F.T=f}}function Zd(e,i,a,o){if(Gc){var f=$d(o);if(f===null)Ud(e,i,o,Qc,a),Nv(e,o);else if(Sb(f,e,i,a,o))o.stopPropagation();else if(Nv(e,o),i&4&&-1<Tb.indexOf(e)){for(;f!==null;){var d=Un(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=pi(d.pendingLanes);if(y!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;y;){var R=1<<31-ye(y);S.entanglements[1]|=R,y&=~R}xi(d),(Gt&6)===0&&(Ic=fn()+500,wo(0))}}break;case 31:case 13:S=Mr(d,2),S!==null&&Sn(S,d,2),Dc(),Xd(d,2)}if(d=$d(o),d===null&&Ud(e,i,o,Qc,a),d===f)break;f=d}f!==null&&o.stopPropagation()}else Ud(e,i,o,null,a)}}function $d(e){return e=kn(e),Wd(e)}var Qc=null;function Wd(e){if(Qc=null,e=Ei(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=h(i),e!==null)return e;e=null}else if(a===31){if(e=m(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Qc=e,null}function Iv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gr()){case xl:return 2;case Ll:return 8;case ys:case sf:return 32;case bu:return 268435456;default:return 32}default:return 32}}var Jd=!1,Gs=null,Qs=null,Ys=null,Vo=new Map,xo=new Map,Ks=[],Tb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nv(e,i){switch(e){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":Vo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":xo.delete(i.pointerId)}}function Lo(e,i,a,o,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Un(i),i!==null&&wv(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function Sb(e,i,a,o,f){switch(i){case"focusin":return Gs=Lo(Gs,e,i,a,o,f),!0;case"dragenter":return Qs=Lo(Qs,e,i,a,o,f),!0;case"mouseover":return Ys=Lo(Ys,e,i,a,o,f),!0;case"pointerover":var d=f.pointerId;return Vo.set(d,Lo(Vo.get(d)||null,e,i,a,o,f)),!0;case"gotpointercapture":return d=f.pointerId,xo.set(d,Lo(xo.get(d)||null,e,i,a,o,f)),!0}return!1}function Dv(e){var i=Ei(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){e.blockedOn=i,Jn(e.priority,function(){Rv(a)});return}}else if(i===31){if(i=m(a),i!==null){e.blockedOn=i,Jn(e.priority,function(){Rv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=$d(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Yl=o,a.target.dispatchEvent(o),Yl=null}else return i=Un(a),i!==null&&wv(i),e.blockedOn=a,!1;i.shift()}return!0}function Ov(e,i,a){Yc(e)&&a.delete(i)}function Ab(){Jd=!1,Gs!==null&&Yc(Gs)&&(Gs=null),Qs!==null&&Yc(Qs)&&(Qs=null),Ys!==null&&Yc(Ys)&&(Ys=null),Vo.forEach(Ov),xo.forEach(Ov)}function Kc(e,i){e.blockedOn===i&&(e.blockedOn=null,Jd||(Jd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ab)))}var Xc=null;function Mv(e){Xc!==e&&(Xc=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Xc===e&&(Xc=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],f=e[i+2];if(typeof o!="function"){if(Wd(o||a)===null)continue;break}var d=Un(a);d!==null&&(e.splice(i,3),i-=3,$f(d,{pending:!0,data:f,method:a.method,action:o},o,f))}}))}function Ya(e){function i(R){return Kc(R,e)}Gs!==null&&Kc(Gs,e),Qs!==null&&Kc(Qs,e),Ys!==null&&Kc(Ys,e),Vo.forEach(i),xo.forEach(i);for(var a=0;a<Ks.length;a++){var o=Ks[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Ks.length&&(a=Ks[0],a.blockedOn===null);)Dv(a),a.blockedOn===null&&Ks.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var f=a[o],d=a[o+1],y=f[qe]||null;if(typeof d=="function")y||Mv(a);else if(y){var S=null;if(d&&d.hasAttribute("formAction")){if(f=d,y=d[qe]||null)S=y.formAction;else if(Wd(f)!==null)continue}else S=y.action;typeof S=="function"?a[o+1]=S:(a.splice(o,3),o-=3),Mv(a)}}}function Vv(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return f=y})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function tm(e){this._internalRoot=e}Zc.prototype.render=tm.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,o=Vn();bv(a,o,e,i,null,null)},Zc.prototype.unmount=tm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;bv(e.current,2,null,e,null,null),Dc(),i[yi]=null}};function Zc(e){this._internalRoot=e}Zc.prototype.unstable_scheduleHydration=function(e){if(e){var i=Du();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Ks.length&&i!==0&&i<Ks[a].priority;a++);Ks.splice(a,0,e),a===0&&Dv(e)}};var xv=t.version;if(xv!=="19.2.3")throw Error(r(527,xv,"19.2.3"));tt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=g(i),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var bb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$c.isDisabled&&$c.supportsFiber)try{$n=$c.inject(bb),Xe=$c}catch{}}return ko.createRoot=function(e,i){if(!l(e))throw Error(r(299));var a=!1,o="",f=q_,d=j_,y=H_;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),i=Sv(e,1,!1,null,null,a,o,null,f,d,y,Vv),e[yi]=i.current,Ld(e),new tm(i)},ko.hydrateRoot=function(e,i,a){if(!l(e))throw Error(r(299));var o=!1,f="",d=q_,y=j_,S=H_,R=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(R=a.formState)),i=Sv(e,1,!0,i,a??null,o,f,R,d,y,S,Vv),i.context=Av(null),a=i.current,o=Vn(),o=Er(o),f=Vs(o),f.callback=null,xs(a,f,o),a=o,i.current.lanes=a,yr(i,a),xi(i),e[yi]=i.current,Ld(e),new Zc(i)},ko.version="19.2.3",ko}var Gv;function AC(){if(Gv)return im.exports;Gv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch{}}return s(),im.exports=SC(),im.exports}var bC=AC();const CC=P0(bC);let Ja=null;const Go=[],wC=s=>new Promise((t,n)=>{chrome.identity.getAuthToken({interactive:s},r=>{chrome.runtime.lastError?n(chrome.runtime.lastError):r&&typeof r=="string"?t(r):r&&typeof r=="object"&&"token"in r?t(r.token):n(new Error("No token received"))})}),RC=async s=>{const t=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${s}`}});if(!t.ok)throw new Error("Failed to get user info");const n=await t.json();return{email:n.email,id:n.id,name:n.name,picture:n.picture}},IC=async()=>{try{await K0();const s=await wC(!0),t=await RC(s);return Ja=t,Go.forEach(n=>n(t)),await chrome.storage.local.set({chromeUser:t,authToken:s}),t}catch(s){throw Y0.error("Sign In Error: "+(s.message||s)),s}},NC=async()=>{try{await K0(),Ja=null,Go.forEach(s=>s(null)),await chrome.storage.local.remove(["chromeUser","authToken"])}catch{}},K0=async()=>new Promise(s=>{chrome.identity.getAuthToken({interactive:!1},t=>{const n=typeof t=="string"?t:t?.token;n?chrome.identity.removeCachedAuthToken({token:n},()=>s()):s()})}),DC=s=>{Go.push(s),chrome.storage.local.get(["chromeUser"],n=>{n.chromeUser?(Ja=n.chromeUser,s(Ja)):s(null)});const t=(n,r)=>{r==="local"&&n.chromeUser&&(Ja=n.chromeUser.newValue||null,s(Ja))};return chrome.storage.onChanged.addListener(t),()=>{const n=Go.indexOf(s);n>-1&&Go.splice(n,1),chrome.storage.onChanged.removeListener(t)}},OC=()=>{};var Qv={};const X0={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const nt=function(s,t){if(!s)throw Tl(t)},Tl=function(s){return new Error("Firebase Database ("+X0.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};const Z0=function(s){const t=[];let n=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},MC=function(s){const t=[];let n=0,r=0;for(;n<s.length;){const l=s[n++];if(l<128)t[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[n++];t[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[n++],h=s[n++],m=s[n++],_=((l&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(_>>10)),t[r++]=String.fromCharCode(56320+(_&1023))}else{const u=s[n++],h=s[n++];t[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|h&63)}}return t.join("")},fp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const u=s[l],h=l+1<s.length,m=h?s[l+1]:0,_=l+2<s.length,g=_?s[l+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let b=(m&15)<<2|g>>6,P=g&63;_||(P=64,h||(b=64)),r.push(n[E],n[T],n[b],n[P])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(Z0(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):MC(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const u=n[s.charAt(l++)],m=l<s.length?n[s.charAt(l)]:0;++l;const g=l<s.length?n[s.charAt(l)]:64;++l;const T=l<s.length?n[s.charAt(l)]:64;if(++l,u==null||m==null||g==null||T==null)throw new VC;const b=u<<2|m>>4;if(r.push(b),g!==64){const P=m<<4&240|g>>2;if(r.push(P),T!==64){const X=g<<6&192|T;r.push(X)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class VC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $0=function(s){const t=Z0(s);return fp.encodeByteArray(t,!0)},ph=function(s){return $0(s).replace(/\./g,"")},wm=function(s){try{return fp.decodeString(s,!0)}catch{}return null};function xC(s){return W0(void 0,s)}function W0(s,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!LC(n)||(s[n]=W0(s[n],t[n]));return s}function LC(s){return s!=="__proto__"}function UC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const kC=()=>UC().__FIREBASE_DEFAULTS__,zC=()=>{if(typeof process>"u"||typeof Qv>"u")return;const s=Qv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},PC=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&wm(s[1]);return t&&JSON.parse(t)},dp=()=>{try{return OC()||kC()||zC()||PC()}catch{return}},BC=s=>dp()?.emulatorHosts?.[s],J0=s=>{const t=BC(s);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},tT=()=>dp()?.config;class mp{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}function du(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eT(s){return(await fetch(s,{credentials:"include"})).ok}function nT(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ph(JSON.stringify(n)),ph(JSON.stringify(h)),""].join(".")}const Qo={};function qC(){const s={prod:[],emulator:[]};for(const t of Object.keys(Qo))Qo[t]?s.emulator.push(t):s.prod.push(t);return s}function jC(s){let t=document.getElementById(s),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),n=!0),{created:n,element:t}}let Yv=!1;function iT(s,t){if(typeof window>"u"||typeof document>"u"||!du(window.location.host)||Qo[s]===t||Qo[s]||Yv)return;Qo[s]=t;function n(b){return`__firebase__banner__${b}`}const r="__firebase__banner",u=qC().prod.length>0;function h(){const b=document.getElementById(r);b&&b.remove()}function m(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function _(b,P){b.setAttribute("width","24"),b.setAttribute("id",P),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Yv=!0,h()},b}function E(b,P){b.setAttribute("id",P),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function T(){const b=jC(r),P=n("text"),X=document.getElementById(P)||document.createElement("span"),J=n("learnmore"),$=document.getElementById(J)||document.createElement("a"),mt=n("preprendIcon"),yt=document.getElementById(mt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const ot=b.element;m(ot),E($,J);const Vt=g();_(yt,mt),ot.append(yt,X,$,Vt),document.body.appendChild(ot)}u?(X.innerText="Preview backend disconnected.",yt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(yt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function sT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sT())}function HC(){const s=dp()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GC(){return X0.NODE_ADMIN===!0}function QC(){return!HC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YC(){try{return typeof indexedDB=="object"}catch{return!1}}function KC(){return new Promise((s,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}const XC="FirebaseError";class Sl extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=XC,Object.setPrototypeOf(this,Sl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,aT.prototype.create)}}class aT{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},l=`${this.service}/${t}`,u=this.errors[t],h=u?ZC(u,r):"Error",m=`${this.serviceName}: ${h} (${l}).`;return new Sl(l,m,r)}}function ZC(s,t){return s.replace($C,(n,r)=>{const l=t[r];return l!=null?String(l):`<${r}?>`})}const $C=/\{\$([^}]+)}/g;function eu(s){return JSON.parse(s)}function en(s){return JSON.stringify(s)}const lT=function(s){let t={},n={},r={},l="";try{const u=s.split(".");t=eu(wm(u[0])||""),n=eu(wm(u[1])||""),l=u[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:l}},WC=function(s){const t=lT(s),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},JC=function(s){const t=lT(s).claims;return typeof t=="object"&&t.admin===!0};function gs(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function ul(s,t){if(Object.prototype.hasOwnProperty.call(s,t))return s[t]}function Kv(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function gh(s,t,n){const r={};for(const l in s)Object.prototype.hasOwnProperty.call(s,l)&&(r[l]=t.call(n,s[l],l,s));return r}function nu(s,t){if(s===t)return!0;const n=Object.keys(s),r=Object.keys(t);for(const l of n){if(!r.includes(l))return!1;const u=s[l],h=t[l];if(Xv(u)&&Xv(h)){if(!nu(u,h))return!1}else if(u!==h)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function Xv(s){return s!==null&&typeof s=="object"}function tw(s){const t=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}class ew{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const r=this.W_;if(typeof t=="string")for(let T=0;T<16;T++)r[T]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let T=0;T<16;T++)r[T]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let T=16;T<80;T++){const b=r[T-3]^r[T-8]^r[T-14]^r[T-16];r[T]=(b<<1|b>>>31)&4294967295}let l=this.chain_[0],u=this.chain_[1],h=this.chain_[2],m=this.chain_[3],_=this.chain_[4],g,E;for(let T=0;T<80;T++){T<40?T<20?(g=m^u&(h^m),E=1518500249):(g=u^h^m,E=1859775393):T<60?(g=u&h|m&(u|h),E=2400959708):(g=u^h^m,E=3395469782);const b=(l<<5|l>>>27)+g+_+E+r[T]&4294967295;_=m,m=h,h=(u<<30|u>>>2)&4294967295,u=l,l=b}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+_&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const r=n-this.blockSize;let l=0;const u=this.buf_;let h=this.inbuf_;for(;l<n;){if(h===0)for(;l<=r;)this.compress_(t,l),l+=this.blockSize;if(typeof t=="string"){for(;l<n;)if(u[h]=t.charCodeAt(l),++h,++l,h===this.blockSize){this.compress_(u),h=0;break}}else for(;l<n;)if(u[h]=t[l],++h,++l,h===this.blockSize){this.compress_(u),h=0;break}}this.inbuf_=h,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let l=0;l<5;l++)for(let u=24;u>=0;u-=8)t[r]=this.chain_[l]>>u&255,++r;return t}}function nw(s,t){return`${s} failed: ${t} argument `}const iw=function(s){const t=[];let n=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);if(l>=55296&&l<=56319){const u=l-55296;r++,nt(r<s.length,"Surrogate pair missing trail surrogate.");const h=s.charCodeAt(r)-56320;l=65536+(u<<10)+h}l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):l<65536?(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},kh=function(s){let t=0;for(let n=0;n<s.length;n++){const r=s.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function cl(s){return s&&s._delegate?s._delegate:s}class hl{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Gr="[DEFAULT]";class sw{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new mp;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(aw(t))try{this.getOrInitializeService({instanceIdentifier:Gr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(t=Gr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Gr){return this.instances.has(t)}getOptions(t=Gr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&h.resolve(l)}return l}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(t),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&t(u,r),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rw(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Gr){return this.component?this.component.multipleInstances?t:Gr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rw(s){return s===Gr?void 0:s}function aw(s){return s.instantiationMode==="EAGER"}class lw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new sw(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var Dt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Dt||(Dt={}));const ow={debug:Dt.DEBUG,verbose:Dt.VERBOSE,info:Dt.INFO,warn:Dt.WARN,error:Dt.ERROR,silent:Dt.SILENT},uw=Dt.INFO,cw={[Dt.DEBUG]:"log",[Dt.VERBOSE]:"log",[Dt.INFO]:"info",[Dt.WARN]:"warn",[Dt.ERROR]:"error"},hw=(s,t,...n)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),l=cw[t];if(!l)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class pp{constructor(t){this.name=t,this._logLevel=uw,this._logHandler=hw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Dt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?ow[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Dt.DEBUG,...t),this._logHandler(this,Dt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Dt.VERBOSE,...t),this._logHandler(this,Dt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Dt.INFO,...t),this._logHandler(this,Dt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Dt.WARN,...t),this._logHandler(this,Dt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Dt.ERROR,...t),this._logHandler(this,Dt.ERROR,...t)}}const fw=(s,t)=>t.some(n=>s instanceof n);let Zv,$v;function dw(){return Zv||(Zv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mw(){return $v||($v=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oT=new WeakMap,Rm=new WeakMap,uT=new WeakMap,lm=new WeakMap,gp=new WeakMap;function pw(s){const t=new Promise((n,r)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n(Js(s.result)),l()},h=()=>{r(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",h)});return t.then(n=>{n instanceof IDBCursor&&oT.set(n,s)}).catch(()=>{}),gp.set(t,s),t}function gw(s){if(Rm.has(s))return;const t=new Promise((n,r)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),l()},h=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});Rm.set(s,t)}let Im={get(s,t,n){if(s instanceof IDBTransaction){if(t==="done")return Rm.get(s);if(t==="objectStoreNames")return s.objectStoreNames||uT.get(s);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Js(s[t])},set(s,t,n){return s[t]=n,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function _w(s){Im=s(Im)}function yw(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=s.call(om(this),t,...n);return uT.set(r,t.sort?t.sort():[t]),Js(r)}:mw().includes(s)?function(...t){return s.apply(om(this),t),Js(oT.get(this))}:function(...t){return Js(s.apply(om(this),t))}}function vw(s){return typeof s=="function"?yw(s):(s instanceof IDBTransaction&&gw(s),fw(s,dw())?new Proxy(s,Im):s)}function Js(s){if(s instanceof IDBRequest)return pw(s);if(lm.has(s))return lm.get(s);const t=vw(s);return t!==s&&(lm.set(s,t),gp.set(t,s)),t}const om=s=>gp.get(s);function Ew(s,t,{blocked:n,upgrade:r,blocking:l,terminated:u}={}){const h=indexedDB.open(s,t),m=Js(h);return r&&h.addEventListener("upgradeneeded",_=>{r(Js(h.result),_.oldVersion,_.newVersion,Js(h.transaction),_)}),n&&h.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),m.then(_=>{u&&_.addEventListener("close",()=>u()),l&&_.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const Tw=["get","getKey","getAll","getAllKeys","count"],Sw=["put","add","delete","clear"],um=new Map;function Wv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(um.get(t))return um.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,l=Sw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||Tw.includes(n)))return;const u=async function(h,...m){const _=this.transaction(h,l?"readwrite":"readonly");let g=_.store;return r&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),l&&_.done]))[0]};return um.set(t,u),u}_w(s=>({...s,get:(t,n,r)=>Wv(t,n)||s.get(t,n,r),has:(t,n)=>!!Wv(t,n)||s.has(t,n)}));class Aw{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function bw(s){return s.getComponent()?.type==="VERSION"}const Nm="@firebase/app",Jv="0.14.6";const ds=new pp("@firebase/app"),Cw="@firebase/app-compat",ww="@firebase/analytics-compat",Rw="@firebase/analytics",Iw="@firebase/app-check-compat",Nw="@firebase/app-check",Dw="@firebase/auth",Ow="@firebase/auth-compat",Mw="@firebase/database",Vw="@firebase/data-connect",xw="@firebase/database-compat",Lw="@firebase/functions",Uw="@firebase/functions-compat",kw="@firebase/installations",zw="@firebase/installations-compat",Pw="@firebase/messaging",Bw="@firebase/messaging-compat",qw="@firebase/performance",jw="@firebase/performance-compat",Hw="@firebase/remote-config",Fw="@firebase/remote-config-compat",Gw="@firebase/storage",Qw="@firebase/storage-compat",Yw="@firebase/firestore",Kw="@firebase/ai",Xw="@firebase/firestore-compat",Zw="firebase",$w="12.6.0";const Dm="[DEFAULT]",Ww={[Nm]:"fire-core",[Cw]:"fire-core-compat",[Rw]:"fire-analytics",[ww]:"fire-analytics-compat",[Nw]:"fire-app-check",[Iw]:"fire-app-check-compat",[Dw]:"fire-auth",[Ow]:"fire-auth-compat",[Mw]:"fire-rtdb",[Vw]:"fire-data-connect",[xw]:"fire-rtdb-compat",[Lw]:"fire-fn",[Uw]:"fire-fn-compat",[kw]:"fire-iid",[zw]:"fire-iid-compat",[Pw]:"fire-fcm",[Bw]:"fire-fcm-compat",[qw]:"fire-perf",[jw]:"fire-perf-compat",[Hw]:"fire-rc",[Fw]:"fire-rc-compat",[Gw]:"fire-gcs",[Qw]:"fire-gcs-compat",[Yw]:"fire-fst",[Xw]:"fire-fst-compat",[Kw]:"fire-vertex","fire-js":"fire-js",[Zw]:"fire-js-all"};const _h=new Map,Jw=new Map,Om=new Map;function tE(s,t){try{s.container.addComponent(t)}catch(n){ds.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,n)}}function iu(s){const t=s.name;if(Om.has(t))return ds.debug(`There were multiple attempts to register component ${t}.`),!1;Om.set(t,s);for(const n of _h.values())tE(n,s);for(const n of Jw.values())tE(n,s);return!0}function cT(s,t){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(t)}function hT(s){return s==null?!1:s.settings!==void 0}const tR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new aT("app","Firebase",tR);class eR{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}const fT=$w;function dT(s,t={}){let n=s;typeof t!="object"&&(t={name:t});const r={name:Dm,automaticDataCollectionEnabled:!0,...t},l=r.name;if(typeof l!="string"||!l)throw tr.create("bad-app-name",{appName:String(l)});if(n||(n=tT()),!n)throw tr.create("no-options");const u=_h.get(l);if(u){if(nu(n,u.options)&&nu(r,u.config))return u;throw tr.create("duplicate-app",{appName:l})}const h=new lw(l);for(const _ of Om.values())h.addComponent(_);const m=new eR(n,r,h);return _h.set(l,m),m}function mT(s=Dm){const t=_h.get(s);if(!t&&s===Dm&&tT())return dT();if(!t)throw tr.create("no-app",{appName:s});return t}function er(s,t,n){let r=Ww[s]??s;n&&(r+=`-${n}`);const l=r.match(/\s|\//),u=t.match(/\s|\//);if(l||u){const h=[`Unable to register library "${r}" with version "${t}":`];l&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ds.warn(h.join(" "));return}iu(new hl(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const nR="firebase-heartbeat-database",iR=1,su="firebase-heartbeat-store";let cm=null;function pT(){return cm||(cm=Ew(nR,iR,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(su)}catch{}}}}).catch(s=>{throw tr.create("idb-open",{originalErrorMessage:s.message})})),cm}async function sR(s){try{const n=(await pT()).transaction(su),r=await n.objectStore(su).get(gT(s));return await n.done,r}catch(t){if(t instanceof Sl)ds.warn(t.message);else{const n=tr.create("idb-get",{originalErrorMessage:t?.message});ds.warn(n.message)}}}async function eE(s,t){try{const r=(await pT()).transaction(su,"readwrite");await r.objectStore(su).put(t,gT(s)),await r.done}catch(n){if(n instanceof Sl)ds.warn(n.message);else{const r=tr.create("idb-set",{originalErrorMessage:n?.message});ds.warn(r.message)}}}function gT(s){return`${s.name}!${s.options.appId}`}const rR=1024,aR=30;class lR{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=nE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>aR){const l=cR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ds.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=nE(),{heartbeatsToSend:n,unsentEntries:r}=oR(this._heartbeatsCache.heartbeats),l=ph(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ds.warn(t),""}}}function nE(){return new Date().toISOString().substring(0,10)}function oR(s,t=rR){const n=[];let r=s.slice();for(const l of s){const u=n.find(h=>h.agent===l.agent);if(u){if(u.dates.push(l.date),iE(n)>t){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),iE(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YC()?KC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return eE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return eE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function iE(s){return ph(JSON.stringify({version:2,heartbeats:s})).length}function cR(s){if(s.length===0)return-1;let t=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,t=r);return t}function hR(s){iu(new hl("platform-logger",t=>new Aw(t),"PRIVATE")),iu(new hl("heartbeat",t=>new lR(t),"PRIVATE")),er(Nm,Jv,s),er(Nm,Jv,"esm2020"),er("fire-js","")}hR("");var fR="firebase",dR="12.6.0";er(fR,dR,"app");var sE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var nr,_T;(function(){var s;function t(N,C){function I(){}I.prototype=C.prototype,N.F=C.prototype,N.prototype=new I,N.prototype.constructor=N,N.D=function(V,O,L){for(var w=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)w[ue-2]=arguments[ue];return C.prototype[O].apply(V,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(N,C,I){I||(I=0);const V=Array(16);if(typeof C=="string")for(var O=0;O<16;++O)V[O]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(O=0;O<16;++O)V[O]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=N.g[0],I=N.g[1],O=N.g[2];let L=N.g[3],w;w=C+(L^I&(O^L))+V[0]+3614090360&4294967295,C=I+(w<<7&4294967295|w>>>25),w=L+(O^C&(I^O))+V[1]+3905402710&4294967295,L=C+(w<<12&4294967295|w>>>20),w=O+(I^L&(C^I))+V[2]+606105819&4294967295,O=L+(w<<17&4294967295|w>>>15),w=I+(C^O&(L^C))+V[3]+3250441966&4294967295,I=O+(w<<22&4294967295|w>>>10),w=C+(L^I&(O^L))+V[4]+4118548399&4294967295,C=I+(w<<7&4294967295|w>>>25),w=L+(O^C&(I^O))+V[5]+1200080426&4294967295,L=C+(w<<12&4294967295|w>>>20),w=O+(I^L&(C^I))+V[6]+2821735955&4294967295,O=L+(w<<17&4294967295|w>>>15),w=I+(C^O&(L^C))+V[7]+4249261313&4294967295,I=O+(w<<22&4294967295|w>>>10),w=C+(L^I&(O^L))+V[8]+1770035416&4294967295,C=I+(w<<7&4294967295|w>>>25),w=L+(O^C&(I^O))+V[9]+2336552879&4294967295,L=C+(w<<12&4294967295|w>>>20),w=O+(I^L&(C^I))+V[10]+4294925233&4294967295,O=L+(w<<17&4294967295|w>>>15),w=I+(C^O&(L^C))+V[11]+2304563134&4294967295,I=O+(w<<22&4294967295|w>>>10),w=C+(L^I&(O^L))+V[12]+1804603682&4294967295,C=I+(w<<7&4294967295|w>>>25),w=L+(O^C&(I^O))+V[13]+4254626195&4294967295,L=C+(w<<12&4294967295|w>>>20),w=O+(I^L&(C^I))+V[14]+2792965006&4294967295,O=L+(w<<17&4294967295|w>>>15),w=I+(C^O&(L^C))+V[15]+1236535329&4294967295,I=O+(w<<22&4294967295|w>>>10),w=C+(O^L&(I^O))+V[1]+4129170786&4294967295,C=I+(w<<5&4294967295|w>>>27),w=L+(I^O&(C^I))+V[6]+3225465664&4294967295,L=C+(w<<9&4294967295|w>>>23),w=O+(C^I&(L^C))+V[11]+643717713&4294967295,O=L+(w<<14&4294967295|w>>>18),w=I+(L^C&(O^L))+V[0]+3921069994&4294967295,I=O+(w<<20&4294967295|w>>>12),w=C+(O^L&(I^O))+V[5]+3593408605&4294967295,C=I+(w<<5&4294967295|w>>>27),w=L+(I^O&(C^I))+V[10]+38016083&4294967295,L=C+(w<<9&4294967295|w>>>23),w=O+(C^I&(L^C))+V[15]+3634488961&4294967295,O=L+(w<<14&4294967295|w>>>18),w=I+(L^C&(O^L))+V[4]+3889429448&4294967295,I=O+(w<<20&4294967295|w>>>12),w=C+(O^L&(I^O))+V[9]+568446438&4294967295,C=I+(w<<5&4294967295|w>>>27),w=L+(I^O&(C^I))+V[14]+3275163606&4294967295,L=C+(w<<9&4294967295|w>>>23),w=O+(C^I&(L^C))+V[3]+4107603335&4294967295,O=L+(w<<14&4294967295|w>>>18),w=I+(L^C&(O^L))+V[8]+1163531501&4294967295,I=O+(w<<20&4294967295|w>>>12),w=C+(O^L&(I^O))+V[13]+2850285829&4294967295,C=I+(w<<5&4294967295|w>>>27),w=L+(I^O&(C^I))+V[2]+4243563512&4294967295,L=C+(w<<9&4294967295|w>>>23),w=O+(C^I&(L^C))+V[7]+1735328473&4294967295,O=L+(w<<14&4294967295|w>>>18),w=I+(L^C&(O^L))+V[12]+2368359562&4294967295,I=O+(w<<20&4294967295|w>>>12),w=C+(I^O^L)+V[5]+4294588738&4294967295,C=I+(w<<4&4294967295|w>>>28),w=L+(C^I^O)+V[8]+2272392833&4294967295,L=C+(w<<11&4294967295|w>>>21),w=O+(L^C^I)+V[11]+1839030562&4294967295,O=L+(w<<16&4294967295|w>>>16),w=I+(O^L^C)+V[14]+4259657740&4294967295,I=O+(w<<23&4294967295|w>>>9),w=C+(I^O^L)+V[1]+2763975236&4294967295,C=I+(w<<4&4294967295|w>>>28),w=L+(C^I^O)+V[4]+1272893353&4294967295,L=C+(w<<11&4294967295|w>>>21),w=O+(L^C^I)+V[7]+4139469664&4294967295,O=L+(w<<16&4294967295|w>>>16),w=I+(O^L^C)+V[10]+3200236656&4294967295,I=O+(w<<23&4294967295|w>>>9),w=C+(I^O^L)+V[13]+681279174&4294967295,C=I+(w<<4&4294967295|w>>>28),w=L+(C^I^O)+V[0]+3936430074&4294967295,L=C+(w<<11&4294967295|w>>>21),w=O+(L^C^I)+V[3]+3572445317&4294967295,O=L+(w<<16&4294967295|w>>>16),w=I+(O^L^C)+V[6]+76029189&4294967295,I=O+(w<<23&4294967295|w>>>9),w=C+(I^O^L)+V[9]+3654602809&4294967295,C=I+(w<<4&4294967295|w>>>28),w=L+(C^I^O)+V[12]+3873151461&4294967295,L=C+(w<<11&4294967295|w>>>21),w=O+(L^C^I)+V[15]+530742520&4294967295,O=L+(w<<16&4294967295|w>>>16),w=I+(O^L^C)+V[2]+3299628645&4294967295,I=O+(w<<23&4294967295|w>>>9),w=C+(O^(I|~L))+V[0]+4096336452&4294967295,C=I+(w<<6&4294967295|w>>>26),w=L+(I^(C|~O))+V[7]+1126891415&4294967295,L=C+(w<<10&4294967295|w>>>22),w=O+(C^(L|~I))+V[14]+2878612391&4294967295,O=L+(w<<15&4294967295|w>>>17),w=I+(L^(O|~C))+V[5]+4237533241&4294967295,I=O+(w<<21&4294967295|w>>>11),w=C+(O^(I|~L))+V[12]+1700485571&4294967295,C=I+(w<<6&4294967295|w>>>26),w=L+(I^(C|~O))+V[3]+2399980690&4294967295,L=C+(w<<10&4294967295|w>>>22),w=O+(C^(L|~I))+V[10]+4293915773&4294967295,O=L+(w<<15&4294967295|w>>>17),w=I+(L^(O|~C))+V[1]+2240044497&4294967295,I=O+(w<<21&4294967295|w>>>11),w=C+(O^(I|~L))+V[8]+1873313359&4294967295,C=I+(w<<6&4294967295|w>>>26),w=L+(I^(C|~O))+V[15]+4264355552&4294967295,L=C+(w<<10&4294967295|w>>>22),w=O+(C^(L|~I))+V[6]+2734768916&4294967295,O=L+(w<<15&4294967295|w>>>17),w=I+(L^(O|~C))+V[13]+1309151649&4294967295,I=O+(w<<21&4294967295|w>>>11),w=C+(O^(I|~L))+V[4]+4149444226&4294967295,C=I+(w<<6&4294967295|w>>>26),w=L+(I^(C|~O))+V[11]+3174756917&4294967295,L=C+(w<<10&4294967295|w>>>22),w=O+(C^(L|~I))+V[2]+718787259&4294967295,O=L+(w<<15&4294967295|w>>>17),w=I+(L^(O|~C))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+C&4294967295,N.g[1]=N.g[1]+(O+(w<<21&4294967295|w>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+L&4294967295}r.prototype.v=function(N,C){C===void 0&&(C=N.length);const I=C-this.blockSize,V=this.C;let O=this.h,L=0;for(;L<C;){if(O==0)for(;L<=I;)l(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<C;)if(V[O++]=N.charCodeAt(L++),O==this.blockSize){l(this,V),O=0;break}}else for(;L<C;)if(V[O++]=N[L++],O==this.blockSize){l(this,V),O=0;break}}this.h=O,this.o+=C},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var C=1;C<N.length-8;++C)N[C]=0;C=this.o*8;for(var I=N.length-8;I<N.length;++I)N[I]=C&255,C/=256;for(this.v(N),N=Array(16),C=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)N[C++]=this.g[I]>>>V&255;return N};function u(N,C){var I=m;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=C(N)}function h(N,C){this.h=C;const I=[];let V=!0;for(let O=N.length-1;O>=0;O--){const L=N[O]|0;V&&L==C||(I[O]=L,V=!1)}this.g=I}var m={};function _(N){return-128<=N&&N<128?u(N,function(C){return new h([C|0],C<0?-1:0)}):new h([N|0],N<0?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return T;if(N<0)return $(g(-N));const C=[];let I=1;for(let V=0;N>=I;V++)C[V]=N/I|0,I*=4294967296;return new h(C,0)}function E(N,C){if(N.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(N.charAt(0)=="-")return $(E(N.substring(1),C));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(C,8));let V=T;for(let L=0;L<N.length;L+=8){var O=Math.min(8,N.length-L);const w=parseInt(N.substring(L,L+O),C);O<8?(O=g(Math.pow(C,O)),V=V.j(O).add(g(w))):(V=V.j(I),V=V.add(g(w)))}return V}var T=_(0),b=_(1),P=_(16777216);s=h.prototype,s.m=function(){if(J(this))return-$(this).m();let N=0,C=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);N+=(V>=0?V:4294967296+V)*C,C*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(X(this))return"0";if(J(this))return"-"+$(this).toString(N);const C=g(Math.pow(N,6));var I=this;let V="";for(;;){const O=Vt(I,C).g;I=mt(I,O.j(C));let L=((I.g.length>0?I.g[0]:I.h)>>>0).toString(N);if(I=O,X(I))return L+V;for(;L.length<6;)L="0"+L;V=L+V}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function X(N){if(N.h!=0)return!1;for(let C=0;C<N.g.length;C++)if(N.g[C]!=0)return!1;return!0}function J(N){return N.h==-1}s.l=function(N){return N=mt(this,N),J(N)?-1:X(N)?0:1};function $(N){const C=N.g.length,I=[];for(let V=0;V<C;V++)I[V]=~N.g[V];return new h(I,~N.h).add(b)}s.abs=function(){return J(this)?$(this):this},s.add=function(N){const C=Math.max(this.g.length,N.g.length),I=[];let V=0;for(let O=0;O<=C;O++){let L=V+(this.i(O)&65535)+(N.i(O)&65535),w=(L>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);V=w>>>16,L&=65535,w&=65535,I[O]=w<<16|L}return new h(I,I[I.length-1]&-2147483648?-1:0)};function mt(N,C){return N.add($(C))}s.j=function(N){if(X(this)||X(N))return T;if(J(this))return J(N)?$(this).j($(N)):$($(this).j(N));if(J(N))return $(this.j($(N)));if(this.l(P)<0&&N.l(P)<0)return g(this.m()*N.m());const C=this.g.length+N.g.length,I=[];for(var V=0;V<2*C;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let O=0;O<N.g.length;O++){const L=this.i(V)>>>16,w=this.i(V)&65535,ue=N.i(O)>>>16,Le=N.i(O)&65535;I[2*V+2*O]+=w*Le,yt(I,2*V+2*O),I[2*V+2*O+1]+=L*Le,yt(I,2*V+2*O+1),I[2*V+2*O+1]+=w*ue,yt(I,2*V+2*O+1),I[2*V+2*O+2]+=L*ue,yt(I,2*V+2*O+2)}for(N=0;N<C;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=C;N<2*C;N++)I[N]=0;return new h(I,0)};function yt(N,C){for(;(N[C]&65535)!=N[C];)N[C+1]+=N[C]>>>16,N[C]&=65535,C++}function ot(N,C){this.g=N,this.h=C}function Vt(N,C){if(X(C))throw Error("division by zero");if(X(N))return new ot(T,T);if(J(N))return C=Vt($(N),C),new ot($(C.g),$(C.h));if(J(C))return C=Vt(N,$(C)),new ot($(C.g),C.h);if(N.g.length>30){if(J(N)||J(C))throw Error("slowDivide_ only works with positive integers.");for(var I=b,V=C;V.l(N)<=0;)I=ie(I),V=ie(V);var O=Pt(I,1),L=Pt(V,1);for(V=Pt(V,2),I=Pt(I,2);!X(V);){var w=L.add(V);w.l(N)<=0&&(O=O.add(I),L=w),V=Pt(V,1),I=Pt(I,1)}return C=mt(N,O.j(C)),new ot(O,C)}for(O=T;N.l(C)>=0;){for(I=Math.max(1,Math.floor(N.m()/C.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),L=g(I),w=L.j(C);J(w)||w.l(N)>0;)I-=V,L=g(I),w=L.j(C);X(L)&&(L=b),O=O.add(L),N=mt(N,w)}return new ot(O,N)}s.B=function(N){return Vt(this,N).h},s.and=function(N){const C=Math.max(this.g.length,N.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)&N.i(V);return new h(I,this.h&N.h)},s.or=function(N){const C=Math.max(this.g.length,N.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)|N.i(V);return new h(I,this.h|N.h)},s.xor=function(N){const C=Math.max(this.g.length,N.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)^N.i(V);return new h(I,this.h^N.h)};function ie(N){const C=N.g.length+1,I=[];for(let V=0;V<C;V++)I[V]=N.i(V)<<1|N.i(V-1)>>>31;return new h(I,N.h)}function Pt(N,C){const I=C>>5;C%=32;const V=N.g.length-I,O=[];for(let L=0;L<V;L++)O[L]=C>0?N.i(L+I)>>>C|N.i(L+I+1)<<32-C:N.i(L+I);return new h(O,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,_T=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=E,nr=h}).apply(typeof sE<"u"?sE:typeof self<"u"?self:typeof window<"u"?window:{});var Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var yT,jo,vT,oh,Mm,ET,TT,ST;(function(){var s,t=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jc=="object"&&Jc];for(var p=0;p<c.length;++p){var v=c[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function l(c,p){if(p)t:{var v=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var U=c[A];if(!(U in v))break t;v=v[U]}c=c[c.length-1],A=v[c],p=p(A),p!=A&&p!=null&&t(v,c,{configurable:!0,writable:!0,value:p})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(p){var v=[],A;for(A in p)Object.prototype.hasOwnProperty.call(p,A)&&v.push([A,p[A]]);return v}});var u=u||{},h=this||self;function m(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function _(c,p,v){return c.call.apply(c.bind,arguments)}function g(c,p,v){return g=_,g.apply(null,arguments)}function E(c,p){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function T(c,p){function v(){}v.prototype=p.prototype,c.Z=p.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(A,U,q){for(var W=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)W[vt-2]=arguments[vt];return p.prototype[U].apply(A,W)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function P(c){const p=c.length;if(p>0){const v=Array(p);for(let A=0;A<p;A++)v[A]=c[A];return v}return[]}function X(c,p){for(let A=1;A<arguments.length;A++){const U=arguments[A];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=c.length||0;const q=U.length||0;c.length=v+q;for(let W=0;W<q;W++)c[v+W]=U[W]}else c.push(U)}}class J{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function $(c){h.setTimeout(()=>{throw c},0)}function mt(){var c=N;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class yt{constructor(){this.h=this.g=null}add(p,v){const A=ot.get();A.set(p,v),this.h?this.h.next=A:this.g=A,this.h=A}}var ot=new J(()=>new Vt,c=>c.reset());class Vt{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,Pt=!1,N=new yt,C=()=>{const c=Promise.resolve(void 0);ie=()=>{c.then(I)}};function I(){for(var c;c=mt();){try{c.h.call(c.g)}catch(v){$(v)}var p=ot;p.j(c),p.h<100&&(p.h++,c.next=p.g,p.g=c)}Pt=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};h.addEventListener("test",v,p),h.removeEventListener("test",v,p)}catch{}return c})();function w(c){return/^[\s\xa0]*$/.test(c)}function ue(c,p){O.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,p)}T(ue,O),ue.prototype.init=function(c,p){const v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget,p||(v=="mouseover"?p=c.fromElement:v=="mouseout"&&(p=c.toElement)),this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Le="closure_listenable_"+(Math.random()*1e6|0),F=0;function tt(c,p,v,A,U){this.listener=c,this.proxy=null,this.src=p,this.type=v,this.capture=!!A,this.ha=U,this.key=++F,this.da=this.fa=!1}function ct(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Bt(c,p,v){for(const A in c)p.call(v,c[A],A,c)}function Yt(c,p){for(const v in c)p.call(void 0,c[v],v,c)}function M(c){const p={};for(const v in c)p[v]=c[v];return p}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function et(c,p){let v,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(v in A)c[v]=A[v];for(let q=0;q<Y.length;q++)v=Y[q],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function it(c){this.src=c,this.g={},this.h=0}it.prototype.add=function(c,p,v,A,U){const q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);const W=St(c,p,A,U);return W>-1?(p=c[W],v||(p.fa=!1)):(p=new tt(p,this.src,q,!!A,U),p.fa=v,c.push(p)),p};function dt(c,p){const v=p.type;if(v in c.g){var A=c.g[v],U=Array.prototype.indexOf.call(A,p,void 0),q;(q=U>=0)&&Array.prototype.splice.call(A,U,1),q&&(ct(p),c.g[v].length==0&&(delete c.g[v],c.h--))}}function St(c,p,v,A){for(let U=0;U<c.length;++U){const q=c[U];if(!q.da&&q.listener==p&&q.capture==!!v&&q.ha==A)return U}return-1}var xt="closure_lm_"+(Math.random()*1e6|0),Ue={};function ce(c,p,v,A,U){if(Array.isArray(p)){for(let q=0;q<p.length;q++)ce(c,p[q],v,A,U);return null}return v=Vl(v),c&&c[Le]?c.J(p,v,m(A)?!!A.capture:!1,U):mr(c,p,v,!1,A,U)}function mr(c,p,v,A,U,q){if(!p)throw Error("Invalid event type");const W=m(U)?!!U.capture:!!U;let vt=pr(c);if(vt||(c[xt]=vt=new it(c)),v=vt.add(p,v,A,W,q),v.proxy)return v;if(A=sa(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)L||(U=W),U===void 0&&(U=!1),c.addEventListener(p.toString(),A,U);else if(c.attachEvent)c.attachEvent(di(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function sa(){function c(v){return p.call(c.src,c.listener,v)}const p=Ol;return c}function ra(c,p,v,A,U){if(Array.isArray(p))for(var q=0;q<p.length;q++)ra(c,p[q],v,A,U);else A=m(A)?!!A.capture:!!A,v=Vl(v),c&&c[Le]?(c=c.i,q=String(p).toString(),q in c.g&&(p=c.g[q],v=St(p,v,A,U),v>-1&&(ct(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete c.g[q],c.h--)))):c&&(c=pr(c))&&(p=c.g[p.toString()],c=-1,p&&(c=St(p,v,A,U)),(v=c>-1?p[c]:null)&&aa(v))}function aa(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Le])dt(p.i,c);else{var v=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(v,A,c.capture):p.detachEvent?p.detachEvent(di(v),A):p.addListener&&p.removeListener&&p.removeListener(A),(v=pr(p))?(dt(v,c),v.h==0&&(v.src=null,p[xt]=null)):ct(c)}}}function di(c){return c in Ue?Ue[c]:Ue[c]="on"+c}function Ol(c,p){if(c.da)c=!0;else{p=new ue(p,this);const v=c.listener,A=c.ha||c.src;c.fa&&aa(c),c=v.call(A,p)}return c}function pr(c){return c=c[xt],c instanceof it?c:null}var Ml="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vl(c){return typeof c=="function"?c:(c[Ml]||(c[Ml]=function(p){return c.handleEvent(p)}),c[Ml])}function Ae(){V.call(this),this.i=new it(this),this.M=this,this.G=null}T(Ae,V),Ae.prototype[Le]=!0,Ae.prototype.removeEventListener=function(c,p,v,A){ra(this,c,p,v,A)};function ke(c,p){var v,A=c.G;if(A)for(v=[];A;A=A.G)v.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new O(p,c);else if(p instanceof O)p.target=p.target||c;else{var U=p;p=new O(A,c),et(p,U)}U=!0;let q,W;if(v)for(W=v.length-1;W>=0;W--)q=p.g=v[W],U=_s(q,A,!0,p)&&U;if(q=p.g=c,U=_s(q,A,!0,p)&&U,U=_s(q,A,!1,p)&&U,v)for(W=0;W<v.length;W++)q=p.g=v[W],U=_s(q,A,!1,p)&&U}Ae.prototype.N=function(){if(Ae.Z.N.call(this),this.i){var c=this.i;for(const p in c.g){const v=c.g[p];for(let A=0;A<v.length;A++)ct(v[A]);delete c.g[p],c.h--}}this.G=null},Ae.prototype.J=function(c,p,v,A){return this.i.add(String(c),p,!1,v,A)},Ae.prototype.K=function(c,p,v,A){return this.i.add(String(c),p,!0,v,A)};function _s(c,p,v,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();let U=!0;for(let q=0;q<p.length;++q){const W=p[q];if(W&&!W.da&&W.capture==v){const vt=W.listener,ve=W.ha||W.src;W.fa&&dt(c.i,W),U=vt.call(ve,A)!==!1&&U}}return U&&!A.defaultPrevented}function nf(c,p){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(c,p||0)}function Au(c){c.g=nf(()=>{c.g=null,c.i&&(c.i=!1,Au(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class fn extends V{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Au(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(c){V.call(this),this.h=c,this.g={}}T(gr,V);var xl=[];function Ll(c){Bt(c.g,function(p,v){this.g.hasOwnProperty(v)&&aa(p)},c),c.g={}}gr.prototype.N=function(){gr.Z.N.call(this),Ll(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ys=h.JSON.stringify,sf=h.JSON.parse,bu=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Cu(){}function wu(){}var $n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xe(){O.call(this,"d")}T(Xe,O);function Ln(){O.call(this,"c")}T(Ln,O);var ye={},Ru=null;function la(){return Ru=Ru||new Ae}ye.Ia="serverreachability";function Iu(c){O.call(this,ye.Ia,c)}T(Iu,O);function mi(c){const p=la();ke(p,new Iu(p))}ye.STAT_EVENT="statevent";function _r(c,p){O.call(this,ye.STAT_EVENT,c),this.stat=p}T(_r,O);function be(c){const p=la();ke(p,new _r(p,c))}ye.Ja="timingevent";function pi(c,p){O.call(this,ye.Ja,c),this.size=p}T(pi,O);function gi(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},p)}function Wn(){this.g=!0}Wn.prototype.ua=function(){this.g=!1};function rf(c,p,v,A,U,q){c.info(function(){if(c.g)if(q){var W="",vt=q.split("&");for(let Ft=0;Ft<vt.length;Ft++){var ve=vt[Ft].split("=");if(ve.length>1){const he=ve[0];ve=ve[1];const Pn=he.split("_");W=Pn.length>=2&&Pn[1]=="type"?W+(he+"="+ve+"&"):W+(he+"=redacted&")}}}else W=null;else W=q;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+p+`
`+v+`
`+W})}function Nu(c,p,v,A,U,q,W){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+p+`
`+v+`
`+q+" "+W})}function _i(c,p,v,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+af(c,v)+(A?" "+A:"")})}function yr(c,p){c.info(function(){return"TIMEOUT: "+p})}Wn.prototype.info=function(){};function af(c,p){if(!c.g)return p;if(!p)return null;try{const q=JSON.parse(p);if(q){for(c=0;c<q.length;c++)if(Array.isArray(q[c])){var v=q[c];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var U=A[0];if(U!="noop"&&U!="stop"&&U!="close")for(let W=1;W<A.length;W++)A[W]=""}}}}return ys(q)}catch{return p}}var vr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ul={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},kl;function Er(){}T(Er,Cu),Er.prototype.g=function(){return new XMLHttpRequest},kl=new Er;function Hi(c){return encodeURIComponent(String(c))}function Du(c){var p=1;c=c.split(":");const v=[];for(;p>0&&c.length;)v.push(c.shift()),p--;return c.length&&v.push(c.join(":")),v}function Jn(c,p,v,A){this.j=c,this.i=p,this.l=v,this.S=A||1,this.V=new gr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ti}function ti(){this.i=null,this.g="",this.h=!1}var Ce={},qe={};function yi(c,p,v){c.M=1,c.A=Tr(Re(p)),c.u=v,c.R=!0,oa(c,null)}function oa(c,p){c.F=Date.now(),vi(c),c.B=Re(c.A);var v=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),fa(v.i,"t",A),c.C=0,v=c.j.L,c.h=new ti,c.g=Gu(c.j,v?p:null,!c.u),c.P>0&&(c.O=new fn(g(c.Y,c,c.g),c.P)),p=c.V,v=c.g,A=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(xl[0]=U.toString()),U=xl);for(let q=0;q<U.length;q++){const W=ce(v,U[q],A||p.handleEvent,!1,p.h||p);if(!W)break;p.g[W.key]=W}p=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,p)):(c.v="GET",c.g.ea(c.B,c.v,null,p)),mi(),rf(c.i,c.v,c.B,c.l,c.S,c.u)}Jn.prototype.ba=function(c){c=c.target;const p=this.O;p&&ii(c)==3?p.j():this.Y(c)},Jn.prototype.Y=function(c){try{if(c==this.g)t:{const vt=ii(this.g),ve=this.g.ya(),Ft=this.g.ca();if(!(vt<3)&&(vt!=3||this.g&&(this.h.h||this.g.la()||Ze(this.g)))){this.K||vt!=4||ve==7||(ve==8||Ft<=0?mi(3):mi(2)),Ei(this);var p=this.g.ca();this.X=p;var v=lf(this);if(this.o=p==200,Nu(this.i,this.v,this.B,this.l,this.S,vt,p),this.o){if(this.U&&!this.L){e:{if(this.g){var A,U=this.g;if((A=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(A)){var q=A;break e}}q=null}if(c=q)_i(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ti(this,c);else{this.o=!1,this.m=3,be(12),Cn(this),Un(this);break t}}if(this.R){c=!0;let he;for(;!this.K&&this.C<v.length;)if(he=Mu(this,v),he==qe){vt==4&&(this.m=4,be(14),c=!1),_i(this.i,this.l,null,"[Incomplete Response]");break}else if(he==Ce){this.m=4,be(15),_i(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else _i(this.i,this.l,he,null),Ti(this,he);if(Ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||v.length!=0||this.h.h||(this.m=1,be(16),c=!1),this.o=this.o&&c,!c)_i(this.i,this.l,v,"[Invalid Chunked Response]"),Cn(this),Un(this);else if(v.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Wl(W),W.P=!0,be(11))}}else _i(this.i,this.l,v,null),Ti(this,v);vt==4&&Cn(this),this.o&&!this.K&&(vt==4?qu(this.j,this):(this.o=!1,vi(this)))}else Gi(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Cn(this),Un(this)}}}catch{}};function lf(c){if(!Ou(c))return c.g.la();const p=Ze(c.g);if(p==="")return"";let v="";const A=p.length,U=ii(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Cn(c),Un(c),"";c.h.i=new h.TextDecoder}for(let q=0;q<A;q++)c.h.h=!0,v+=c.h.i.decode(p[q],{stream:!(U&&q==A-1)});return p.length=0,c.h.g+=v,c.C=0,c.h.g}function Ou(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Mu(c,p){var v=c.C,A=p.indexOf(`
`,v);return A==-1?qe:(v=Number(p.substring(v,A)),isNaN(v)?Ce:(A+=1,A+v>p.length?qe:(p=p.slice(A,A+v),c.C=A+v,p)))}Jn.prototype.cancel=function(){this.K=!0,Cn(this)};function vi(c){c.T=Date.now()+c.H,ua(c,c.H)}function ua(c,p){if(c.D!=null)throw Error("WatchDog timer not null");c.D=gi(g(c.aa,c),p)}function Ei(c){c.D&&(h.clearTimeout(c.D),c.D=null)}Jn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(yr(this.i,this.B),this.M!=2&&(mi(),be(17)),Cn(this),this.m=2,Un(this)):ua(this,this.T-c)};function Un(c){c.j.I==0||c.K||qu(c.j,c)}function Cn(c){Ei(c);var p=c.O;p&&typeof p.dispose=="function"&&p.dispose(),c.O=null,Ll(c.V),c.g&&(p=c.g,c.g=null,p.abort(),p.dispose())}function Ti(c,p){try{var v=c.j;if(v.I!=0&&(v.g==c||Ai(v.h,c))){if(!c.L&&Ai(v.h,c)&&v.I==3){try{var A=v.Ba.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)_a(v),ws(v);else break t;Ir(v),be(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=gi(g(v.Va,v),6e3));Si(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ni(v,11)}else if((c.L||v.g==c)&&_a(v),!w(p))for(U=v.Ba.g.parse(p),p=0;p<U.length;p++){let Ft=U[p];const he=Ft[0];if(!(he<=v.K))if(v.K=he,Ft=Ft[1],v.I==2)if(Ft[0]=="c"){v.M=Ft[1],v.ba=Ft[2];const Pn=Ft[3];Pn!=null&&(v.ka=Pn,v.j.info("VER="+v.ka));const Di=Ft[4];Di!=null&&(v.za=Di,v.j.info("SVER="+v.za));const si=Ft[5];si!=null&&typeof si=="number"&&si>0&&(A=1.5*si,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const ri=c.g;if(ri){const Nr=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nr){var q=A.h;q.g||Nr.indexOf("spdy")==-1&&Nr.indexOf("quic")==-1&&Nr.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Bl(q,q.h),q.h=null))}if(A.G){const ya=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;ya&&(A.wa=ya,Kt(A.J,A.G,ya))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var W=c;if(A.na=Fu(A,A.L?A.ba:null,A.W),W.L){ql(A.h,W);var vt=W,ve=A.O;ve&&(vt.H=ve),vt.D&&(Ei(vt),vi(vt)),A.g=W}else Pu(A);v.i.length>0&&Ii(v)}else Ft[0]!="stop"&&Ft[0]!="close"||Ni(v,7);else v.I==3&&(Ft[0]=="stop"||Ft[0]=="close"?Ft[0]=="stop"?Ni(v,7):Zl(v):Ft[0]!="noop"&&v.l&&v.l.qa(Ft),v.A=0)}}mi(4)}catch{}}var we=class{constructor(c,p){this.g=c,this.map=p}};function zl(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Pl(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Si(c){return c.h?1:c.g?c.g.size:0}function Ai(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Bl(c,p){c.g?c.g.add(p):c.h=p}function ql(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}zl.prototype.cancel=function(){if(this.i=jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function jl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const v of c.g.values())p=p.concat(v.G);return p}return P(c.i)}var Vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ca(c,p){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const A=c[v].indexOf("=");let U,q=null;A>=0?(U=c[v].substring(0,A),q=c[v].substring(A+1)):U=c[v],p(U,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function wn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;c instanceof wn?(this.l=c.l,je(this,c.j),this.o=c.o,this.g=c.g,vs(this,c.u),this.h=c.h,Hl(this,ku(c.i)),this.m=c.m):c&&(p=String(c).match(Vu))?(this.l=!1,je(this,p[1]||"",!0),this.o=bi(p[2]||""),this.g=bi(p[3]||"",!0),vs(this,p[4]),this.h=bi(p[5]||"",!0),Hl(this,p[6]||"",!0),this.m=bi(p[7]||"")):(this.l=!1,this.i=new Ts(null,this.l))}wn.prototype.toString=function(){const c=[];var p=this.j;p&&c.push(Sr(p,ha,!0),":");var v=this.g;return(v||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Sr(p,ha,!0),"@"),c.push(Hi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Sr(v,v.charAt(0)=="/"?Fl:xu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Sr(v,Lu)),c.join("")},wn.prototype.resolve=function(c){const p=Re(this);let v=!!c.j;v?je(p,c.j):v=!!c.o,v?p.o=c.o:v=!!c.g,v?p.g=c.g:v=c.u!=null;var A=c.h;if(v)vs(p,c.u);else if(v=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var U=p.h.lastIndexOf("/");U!=-1&&(A=p.h.slice(0,U+1)+A)}if(U=A,U==".."||U==".")A="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){A=U.lastIndexOf("/",0)==0,U=U.split("/");const q=[];for(let W=0;W<U.length;){const vt=U[W++];vt=="."?A&&W==U.length&&q.push(""):vt==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),A&&W==U.length&&q.push("")):(q.push(vt),A=!0)}A=q.join("/")}else A=U}return v?p.h=A:v=c.i.toString()!=="",v?Hl(p,ku(c.i)):v=!!c.m,v&&(p.m=c.m),p};function Re(c){return new wn(c)}function je(c,p,v){c.j=v?bi(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function vs(c,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);c.u=p}else c.u=null}function Hl(c,p,v){p instanceof Ts?(c.i=p,da(c.i,c.l)):(v||(p=Sr(p,Es)),c.i=new Ts(p,c.l))}function Kt(c,p,v){c.i.set(p,v)}function Tr(c){return Kt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function bi(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Sr(c,p,v){return typeof c=="string"?(c=encodeURI(c).replace(p,gn),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function gn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ha=/[#\/\?@]/g,xu=/[#\?:]/g,Fl=/[#\?]/g,Es=/[#\?@]/g,Lu=/#/g;function Ts(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function _n(c){c.g||(c.g=new Map,c.h=0,c.i&&ca(c.i,function(p,v){c.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}s=Ts.prototype,s.add=function(c,p){_n(this),this.i=null,c=Ss(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(p),this.h+=1,this};function Uu(c,p){_n(c),p=Ss(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Gl(c,p){return _n(c),p=Ss(c,p),c.g.has(p)}s.forEach=function(c,p){_n(this),this.g.forEach(function(v,A){v.forEach(function(U){c.call(p,U,A,this)},this)},this)};function Ql(c,p){_n(c);let v=[];if(typeof p=="string")Gl(c,p)&&(v=v.concat(c.g.get(Ss(c,p))));else for(c=Array.from(c.g.values()),p=0;p<c.length;p++)v=v.concat(c[p]);return v}s.set=function(c,p){return _n(this),this.i=null,c=Ss(this,c),Gl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},s.get=function(c,p){return c?(c=Ql(this,c),c.length>0?String(c[0]):p):p};function fa(c,p,v){Uu(c,p),v.length>0&&(c.i=null,c.g.set(Ss(c,p),P(v)),c.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(let A=0;A<p.length;A++){var v=p[A];const U=Hi(v);v=Ql(this,v);for(let q=0;q<v.length;q++){let W=U;v[q]!==""&&(W+="="+Hi(v[q])),c.push(W)}}return this.i=c.join("&")};function ku(c){const p=new Ts;return p.i=c.i,c.g&&(p.g=new Map(c.g),p.h=c.h),p}function Ss(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function da(c,p){p&&!c.j&&(_n(c),c.i=null,c.g.forEach(function(v,A){const U=A.toLowerCase();A!=U&&(Uu(this,A),fa(this,U,v))},c)),c.j=p}function ei(c,p){const v=new Wn;if(h.Image){const A=new Image;A.onload=E(kn,v,"TestLoadImage: loaded",!0,p,A),A.onerror=E(kn,v,"TestLoadImage: error",!1,p,A),A.onabort=E(kn,v,"TestLoadImage: abort",!1,p,A),A.ontimeout=E(kn,v,"TestLoadImage: timeout",!1,p,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function Yl(c,p){const v=new Wn,A=new AbortController,U=setTimeout(()=>{A.abort(),kn(v,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(q=>{clearTimeout(U),q.ok?kn(v,"TestPingServer: ok",!0,p):kn(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(U),kn(v,"TestPingServer: error",!1,p)})}function kn(c,p,v,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(v)}catch{}}function As(){this.g=new bu}function Ci(c){this.i=c.Sb||null,this.h=c.ab||!1}T(Ci,Cu),Ci.prototype.g=function(){return new Ar(this.i,this.h)};function Ar(c,p){Ae.call(this),this.H=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Ar,Ae),s=Ar.prototype,s.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=p,this.readyState=1,ni(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(p.body=c),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bs(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ma(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ma(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?bs(this):ni(this),this.readyState==3&&ma(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,bs(this))},s.Na=function(c){this.g&&(this.response=c,bs(this))},s.ga=function(){this.g&&bs(this)};function bs(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ni(c)}s.setRequestHeader=function(c,p){this.A.append(c,p)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=p.next();return c.join(`\r
`)};function ni(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ar.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function zn(c){let p="";return Bt(c,function(v,A){p+=A,p+=":",p+=v,p+=`\r
`}),p}function br(c,p,v){t:{for(A in v){var A=!1;break t}A=!0}A||(v=zn(v),typeof c=="string"?v!=null&&Hi(v):Kt(c,p,v))}function $t(c){Ae.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T($t,Ae);var wi=/^https?$/i,Kl=["POST","PUT"];s=$t.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,p,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():kl.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(q){Cr(this,q);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)v.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const q of A.keys())v.set(q,A.get(q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(q=>q.toLowerCase()=="content-type"),U=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(Kl,p,void 0)>=0)||A||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,W]of v)this.g.setRequestHeader(q,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(q){Cr(this,q)}};function Cr(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.o=5,Xl(c),Fi(c)}function Xl(c){c.A||(c.A=!0,ke(c,"complete"),ke(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,ke(this,"complete"),ke(this,"abort"),Fi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fi(this,!0)),$t.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?wr(this):this.Xa())},s.Xa=function(){wr(this)};function wr(c){if(c.h&&typeof u<"u"){if(c.v&&ii(c)==4)setTimeout(c.Ca.bind(c),0);else if(ke(c,"readystatechange"),ii(c)==4){c.h=!1;try{const q=c.ca();t:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var v;if(!(v=p)){var A;if(A=q===0){let W=String(c.D).match(Vu)[1]||null;!W&&h.self&&h.self.location&&(W=h.self.location.protocol.slice(0,-1)),A=!wi.test(W?W.toLowerCase():"")}v=A}if(v)ke(c,"complete"),ke(c,"success");else{c.o=6;try{var U=ii(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",Xl(c)}}finally{Fi(c)}}}}function Fi(c,p){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,p||ke(c,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ii(c){return c.g?c.g.readyState:0}s.ca=function(){try{return ii(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),sf(p)}};function Ze(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Gi(c){const p={};c=(c.g&&ii(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(w(c[A]))continue;var v=Du(c[A]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const q=p[U]||[];p[U]=q,q.push(v)}Yt(p,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ri(c,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||p}function Cs(c){this.za=0,this.i=[],this.j=new Wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ri("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ri("baseRetryDelayMs",5e3,c),this.Za=Ri("retryDelaySeedMs",1e4,c),this.Ta=Ri("forwardChannelMaxRetries",2,c),this.va=Ri("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new zl(c&&c.concurrentRequestLimit),this.Ba=new As,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Cs.prototype,s.ka=8,s.I=1,s.connect=function(c,p,v,A){be(0),this.W=c,this.H=p||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=Fu(this,null,this.W),Ii(this)};function Zl(c){if(pa(c),c.I==3){var p=c.V++,v=Re(c.J);if(Kt(v,"SID",c.M),Kt(v,"RID",p),Kt(v,"TYPE","terminate"),Rr(c,v),p=new Jn(c,c.j,p),p.M=2,p.A=Tr(Re(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=p.A,v=!0),v||(p.g=Gu(p.j,null),p.g.ea(p.A)),p.F=Date.now(),vi(p)}Hu(c)}function ws(c){c.g&&(Wl(c),c.g.cancel(),c.g=null)}function pa(c){ws(c),c.v&&(h.clearTimeout(c.v),c.v=null),_a(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function Ii(c){if(!Pl(c.h)&&!c.m){c.m=!0;var p=c.Ea;ie||C(),Pt||(ie(),Pt=!0),N.add(p,c),c.D=0}}function ga(c,p){return Si(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=p.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=gi(g(c.Ea,c,p),ju(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new Jn(this,this.j,c);let q=this.o;if(this.U&&(q?(q=M(q),et(q,this.U)):q=this.U),this.u!==null||this.R||(U.J=q,q=null),this.S)t:{for(var p=0,v=0;v<this.i.length;v++){e:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(p+=A,p>4096){p=v;break t}if(p===4096||v===this.i.length-1){p=v+1;break t}}p=1e3}else p=1e3;p=zu(this,U,p),v=Re(this.J),Kt(v,"RID",c),Kt(v,"CVER",22),this.G&&Kt(v,"X-HTTP-Session-Id",this.G),Rr(this,v),q&&(this.R?p="headers="+Hi(zn(q))+"&"+p:this.u&&br(v,this.u,q)),Bl(this.h,U),this.Ra&&Kt(v,"TYPE","init"),this.S?(Kt(v,"$req",p),Kt(v,"SID","null"),U.U=!0,yi(U,v,null)):yi(U,v,p),this.I=2}}else this.I==3&&(c?$l(this,c):this.i.length==0||Pl(this.h)||$l(this))};function $l(c,p){var v;p?v=p.l:v=c.V++;const A=Re(c.J);Kt(A,"SID",c.M),Kt(A,"RID",v),Kt(A,"AID",c.K),Rr(c,A),c.u&&c.o&&br(A,c.u,c.o),v=new Jn(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),p&&(c.i=p.G.concat(c.i)),p=zu(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Bl(c.h,v),yi(v,A,p)}function Rr(c,p){c.H&&Bt(c.H,function(v,A){Kt(p,A,v)}),c.l&&Bt({},function(v,A){Kt(p,A,v)})}function zu(c,p,v){v=Math.min(c.i.length,v);const A=c.l?g(c.l.Ka,c.l,c):null;t:{var U=c.i;let vt=-1;for(;;){const ve=["count="+v];vt==-1?v>0?(vt=U[0].g,ve.push("ofs="+vt)):vt=0:ve.push("ofs="+vt);let Ft=!0;for(let he=0;he<v;he++){var q=U[he].g;const Pn=U[he].map;if(q-=vt,q<0)vt=Math.max(0,U[he].g-100),Ft=!1;else try{q="req"+q+"_"||"";try{var W=Pn instanceof Map?Pn:Object.entries(Pn);for(const[Di,si]of W){let ri=si;m(si)&&(ri=ys(si)),ve.push(q+Di+"="+encodeURIComponent(ri))}}catch(Di){throw ve.push(q+"type="+encodeURIComponent("_badmap")),Di}}catch{A&&A(Pn)}}if(Ft){W=ve.join("&");break t}}W=void 0}return c=c.i.splice(0,v),p.G=c,W}function Pu(c){if(!c.g&&!c.v){c.Y=1;var p=c.Da;ie||C(),Pt||(ie(),Pt=!0),N.add(p,c),c.A=0}}function Ir(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=gi(g(c.Da,c),ju(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,Bu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=gi(g(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),ws(this),Bu(this))};function Wl(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function Bu(c){c.g=new Jn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var p=Re(c.na);Kt(p,"RID","rpc"),Kt(p,"SID",c.M),Kt(p,"AID",c.K),Kt(p,"CI",c.F?"0":"1"),!c.F&&c.ia&&Kt(p,"TO",c.ia),Kt(p,"TYPE","xmlhttp"),Rr(c,p),c.u&&c.o&&br(p,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=Tr(Re(p)),v.u=null,v.R=!0,oa(v,c)}s.Va=function(){this.C!=null&&(this.C=null,ws(this),Ir(this),be(19))};function _a(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function qu(c,p){var v=null;if(c.g==p){_a(c),Wl(c),c.g=null;var A=2}else if(Ai(c.h,p))v=p.G,ql(c.h,p),A=1;else return;if(c.I!=0){if(p.o)if(A==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var U=c.D;A=la(),ke(A,new pi(A,v)),Ii(c)}else Pu(c);else if(U=p.m,U==3||U==0&&p.X>0||!(A==1&&ga(c,p)||A==2&&Ir(c)))switch(v&&v.length>0&&(p=c.h,p.i=p.i.concat(v)),U){case 1:Ni(c,5);break;case 4:Ni(c,10);break;case 3:Ni(c,6);break;default:Ni(c,2)}}}function ju(c,p){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*p}function Ni(c,p){if(c.j.info("Error code "+p),p==2){var v=g(c.bb,c),A=c.Ua;const U=!A;A=new wn(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||je(A,"https"),Tr(A),U?ei(A.toString(),v):Yl(A.toString(),v)}else be(2);c.I=0,c.l&&c.l.pa(p),Hu(c),pa(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))};function Hu(c){if(c.I=0,c.ja=[],c.l){const p=jl(c.h);(p.length!=0||c.i.length!=0)&&(X(c.ja,p),X(c.ja,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.oa()}}function Fu(c,p,v){var A=v instanceof wn?Re(v):new wn(v);if(A.g!="")p&&(A.g=p+"."+A.g),vs(A,A.u);else{var U=h.location;A=U.protocol,p=p?p+"."+U.hostname:U.hostname,U=+U.port;const q=new wn(null);A&&je(q,A),p&&(q.g=p),U&&vs(q,U),v&&(q.h=v),A=q}return v=c.G,p=c.wa,v&&p&&Kt(A,v,p),Kt(A,"VER",c.ka),Rr(c,A),A}function Gu(c,p,v){if(p&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Aa&&!c.ma?new $t(new Ci({ab:v})):new $t(c.ma),p.Fa(c.L),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qu(){}s=Qu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Rs(){}Rs.prototype.g=function(c,p){return new dn(c,p)};function dn(c,p){Ae.call(this),this.g=new Cs(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(c?c["X-WebChannel-Client-Profile"]=p.sa:c={"X-WebChannel-Client-Profile":p.sa}),this.g.U=c,(c=p&&p.Qb)&&!w(c)&&(this.g.u=c),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!w(p)&&(this.g.G=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Qi(this)}T(dn,Ae),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Zl(this.g)},dn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=ys(c),c=v);p.i.push(new we(p.Ya++,c)),p.I==3&&Ii(p)},dn.prototype.N=function(){this.g.l=null,delete this.j,Zl(this.g),delete this.g,dn.Z.N.call(this)};function Yu(c){Xe.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const v in p){c=v;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}T(Yu,Xe);function Ku(){Ln.call(this),this.status=1}T(Ku,Ln);function Qi(c){this.g=c}T(Qi,Qu),Qi.prototype.ra=function(){ke(this.g,"a")},Qi.prototype.qa=function(c){ke(this.g,new Yu(c))},Qi.prototype.pa=function(c){ke(this.g,new Ku)},Qi.prototype.oa=function(){ke(this.g,"b")},Rs.prototype.createWebChannel=Rs.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,ST=function(){return new Rs},TT=function(){return la()},ET=ye,Mm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vr.NO_ERROR=0,vr.TIMEOUT=8,vr.HTTP_ERROR=6,oh=vr,Ul.COMPLETE="complete",vT=Ul,wu.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",Ae.prototype.listen=Ae.prototype.J,jo=wu,$t.prototype.listenOnce=$t.prototype.K,$t.prototype.getLastError=$t.prototype.Ha,$t.prototype.getLastErrorCode=$t.prototype.ya,$t.prototype.getStatus=$t.prototype.ca,$t.prototype.getResponseJson=$t.prototype.La,$t.prototype.getResponseText=$t.prototype.la,$t.prototype.send=$t.prototype.ea,$t.prototype.setWithCredentials=$t.prototype.Fa,yT=$t}).apply(typeof Jc<"u"?Jc:typeof self<"u"?self:typeof window<"u"?window:{});const rE="@firebase/firestore",aE="4.9.2";class an{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");let Al="12.3.0";const $r=new pp("@firebase/firestore");function Xa(){return $r.logLevel}function st(s,...t){if($r.logLevel<=Dt.DEBUG){const n=t.map(_p);$r.debug(`Firestore (${Al}): ${s}`,...n)}}function ms(s,...t){if($r.logLevel<=Dt.ERROR){const n=t.map(_p);$r.error(`Firestore (${Al}): ${s}`,...n)}}function fl(s,...t){if($r.logLevel<=Dt.WARN){const n=t.map(_p);$r.warn(`Firestore (${Al}): ${s}`,...n)}}function _p(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function _t(s,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,AT(s,r,n)}function AT(s,t,n){let r=`FIRESTORE (${Al}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ms(r),new Error(r)}function pe(s,t,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,s||AT(t,l,r)}function zt(s,t){return s}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rt extends Sl{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xr{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class bT{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class mR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(an.UNAUTHENTICATED)))}shutdown(){}}class pR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class gR{constructor(t){this.t=t,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){pe(this.o===void 0,42304);let r=this.i;const l=_=>this.i!==r?(r=this.i,n(_)):Promise.resolve();let u=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Xr,t.enqueueRetryable((()=>l(this.currentUser)))};const h=()=>{const _=u;t.enqueueRetryable((async()=>{await _.promise,await l(this.currentUser)}))},m=_=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((_=>m(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?m(_):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Xr)}}),0),h()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string",31837,{l:r}),new bT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return pe(t===null||typeof t=="string",2055,{h:t}),new an(t)}}class _R{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=an.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yR{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new _R(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(an.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hT(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){pe(this.o===void 0,3512);const r=u=>{u.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,st("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const l=u=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new lE(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new lE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ER(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}class CT{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=ER(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<n&&(r+=t.charAt(l[u]%62))}return r}}function Ot(s,t){return s<t?-1:s>t?1:0}function Vm(s,t){const n=Math.min(s.length,t.length);for(let r=0;r<n;r++){const l=s.charAt(r),u=t.charAt(r);if(l!==u)return hm(l)===hm(u)?Ot(l,u):hm(l)?1:-1}return Ot(s.length,t.length)}const TR=55296,SR=57343;function hm(s){const t=s.charCodeAt(0);return t>=TR&&t<=SR}function dl(s,t,n){return s.length===t.length&&s.every(((r,l)=>n(r,t[l])))}const oE="__name__";class Li{constructor(t,n,r){n===void 0?n=0:n>t.length&&_t(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&_t(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Li.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Li?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let l=0;l<r;l++){const u=Li.compareSegments(t.get(l),n.get(l));if(u!==0)return u}return Ot(t.length,n.length)}static compareSegments(t,n){const r=Li.isNumericId(t),l=Li.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?Li.extractNumericId(t).compare(Li.extractNumericId(n)):Vm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return nr.fromString(t.substring(4,t.length-2))}}class de extends Li{construct(t,n,r){return new de(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new rt(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new de(n)}static emptyPath(){return new de([])}}const AR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Li{construct(t,n,r){return new cn(t,n,r)}static isValidIdentifier(t){return AR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===oE}static keyField(){return new cn([oE])}static fromServerFormat(t){const n=[];let r="",l=0;const u=()=>{if(r.length===0)throw new rt(Z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;l<t.length;){const m=t[l];if(m==="\\"){if(l+1===t.length)throw new rt(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const _=t[l+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new rt(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=_,l+=2}else m==="`"?(h=!h,l++):m!=="."||h?(r+=m,l++):(u(),l++)}if(u(),h)throw new rt(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new cn(n)}static emptyPath(){return new cn([])}}class ft{constructor(t){this.path=t}static fromPath(t){return new ft(de.fromString(t))}static fromName(t){return new ft(de.fromString(t).popFirst(5))}static empty(){return new ft(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&de.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return de.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ft(new de(t.slice()))}}function bR(s,t,n){if(!n)throw new rt(Z.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function CR(s,t,n,r){if(t===!0&&r===!0)throw new rt(Z.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function uE(s){if(ft.isDocumentKey(s))throw new rt(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function wT(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function zh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":_t(12329,{type:typeof s})}function xm(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new rt(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zh(s);throw new rt(Z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return s}function xe(s,t){const n={typeString:s};return t&&(n.value=t),n}function mu(s,t){if(!wT(s))throw new rt(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const l=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const h=s[r];if(l&&typeof h!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new rt(Z.INVALID_ARGUMENT,n);return!0}const cE=-62135596800,hE=1e6;class me{static now(){return me.fromMillis(Date.now())}static fromDate(t){return me.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*hE);return new me(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new rt(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new rt(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<cE)throw new rt(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new rt(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hE}_compareTo(t){return this.seconds===t.seconds?Ot(this.nanoseconds,t.nanoseconds):Ot(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(mu(t,me._jsonSchema))return new me(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-cE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}me._jsonSchemaVersion="firestore/timestamp/1.0",me._jsonSchema={type:xe("string",me._jsonSchemaVersion),seconds:xe("number"),nanoseconds:xe("number")};class gt{static fromTimestamp(t){return new gt(t)}static min(){return new gt(new me(0,0))}static max(){return new gt(new me(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ru=-1;function wR(s,t){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=gt.fromTimestamp(r===1e9?new me(n+1,0):new me(n,r));return new rr(l,ft.empty(),t)}function RR(s){return new rr(s.readTime,s.key,ru)}class rr{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new rr(gt.min(),ft.empty(),ru)}static max(){return new rr(gt.max(),ft.empty(),ru)}}function IR(s,t){let n=s.readTime.compareTo(t.readTime);return n!==0?n:(n=ft.comparator(s.documentKey,t.documentKey),n!==0?n:Ot(s.largestBatchId,t.largestBatchId))}const NR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Ph(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==NR)throw s;st("LocalStore","Unexpectedly lost primary lease")}class K{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&_t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new K(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):K.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):K.reject(n)}static resolve(t){return new K(((n,r)=>{n(t)}))}static reject(t){return new K(((n,r)=>{r(t)}))}static waitFor(t){return new K(((n,r)=>{let l=0,u=0,h=!1;t.forEach((m=>{++l,m.next((()=>{++u,h&&u===l&&n()}),(_=>r(_)))})),h=!0,u===l&&n()}))}static or(t){let n=K.resolve(!1);for(const r of t)n=n.next((l=>l?K.resolve(l):r()));return n}static forEach(t,n){const r=[];return t.forEach(((l,u)=>{r.push(n.call(this,l,u))})),this.waitFor(r)}static mapArray(t,n){return new K(((r,l)=>{const u=t.length,h=new Array(u);let m=0;for(let _=0;_<u;_++){const g=_;n(t[g]).next((E=>{h[g]=E,++m,m===u&&r(h)}),(E=>l(E)))}}))}static doWhile(t,n){return new K(((r,l)=>{const u=()=>{t()===!0?n().next((()=>{u()}),l):r()};u()}))}}function OR(s){const t=s.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bl(s){return s.name==="IndexedDbTransactionError"}class Bh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Bh.ce=-1;const MR=-1;function qh(s){return s==null}function yh(s){return s===0&&1/s==-1/0}function VR(s){return typeof s=="number"&&Number.isInteger(s)&&!yh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const RT="";function xR(s){let t="";for(let n=0;n<s.length;n++)t.length>0&&(t=fE(t)),t=LR(s.get(n),t);return fE(t)}function LR(s,t){let n=t;const r=s.length;for(let l=0;l<r;l++){const u=s.charAt(l);switch(u){case"\0":n+="";break;case RT:n+="";break;default:n+=u}}return n}function fE(s){return s+RT+""}function dE(s){let t=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t++;return t}function Cl(s,t){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t(n,s[n])}function IT(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}let Ke=class Lm{constructor(t,n){this.comparator=t,this.root=n||ir.EMPTY}insert(t,n){return new Lm(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ir.BLACK,null,null))}remove(t){return new Lm(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ir.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(t,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new th(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new th(this.root,t,this.comparator,!1)}getReverseIterator(){return new th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new th(this.root,t,this.comparator,!0)}},th=class{constructor(t,n,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?r(t.key,n):1,n&&l&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},ir=class us{constructor(t,n,r,l,u){this.key=t,this.value=n,this.color=r??us.RED,this.left=l??us.EMPTY,this.right=u??us.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,l,u){return new us(t??this.key,n??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let l=this;const u=r(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,n,r),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return us.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return us.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,us.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,us.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _t(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw _t(27949);return t+(this.isRed()?0:1)}};ir.EMPTY=null,ir.RED=!0,ir.BLACK=!1;ir.EMPTY=new class{constructor(){this.size=0}get key(){throw _t(57766)}get value(){throw _t(16141)}get color(){throw _t(16727)}get left(){throw _t(29726)}get right(){throw _t(36894)}copy(t,n,r,l,u){return this}insert(t,n,r){return new ir(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Be{constructor(t){this.comparator=t,this.data=new Ke(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new mE(this.data.getIterator())}getIteratorFrom(t){return new mE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof Be)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Be(this.comparator);return n.data=t,n}}class mE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class $s{constructor(t){this.fields=t,t.sort(cn.comparator)}static empty(){return new $s([])}unionWith(t){let n=new Be(cn.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new $s(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return dl(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}class NT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new NT("Invalid base64 string: "+u):u}})(t);return new nn(n)}static fromUint8Array(t){const n=(function(l){let u="";for(let h=0;h<l.length;++h)u+=String.fromCharCode(l[h]);return u})(t);return new nn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ot(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const UR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(s){if(pe(!!s,39018),typeof s=="string"){let t=0;const n=UR.exec(s);if(pe(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Se(s.seconds),nanos:Se(s.nanos)}}function Se(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function lr(s){return typeof s=="string"?nn.fromBase64String(s):nn.fromUint8Array(s)}const DT="server_timestamp",OT="__type__",MT="__previous_value__",VT="__local_write_time__";function yp(s){return(s?.mapValue?.fields||{})[OT]?.stringValue===DT}function jh(s){const t=s.mapValue.fields[MT];return yp(t)?jh(t):t}function au(s){const t=ar(s.mapValue.fields[VT].timestampValue);return new me(t.seconds,t.nanos)}class kR{constructor(t,n,r,l,u,h,m,_,g,E){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=_,this.useFetchStreams=g,this.isUsingEmulator=E}}const vh="(default)";class lu{constructor(t,n){this.projectId=t,this.database=n||vh}static empty(){return new lu("","")}get isDefaultDatabase(){return this.database===vh}isEqual(t){return t instanceof lu&&t.projectId===this.projectId&&t.database===this.database}}const xT="__type__",zR="__max__",eh={mapValue:{}},LT="__vector__",Eh="value";function or(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?yp(s)?4:BR(s)?9007199254740991:PR(s)?10:11:_t(28295,{value:s})}function ji(s,t){if(s===t)return!0;const n=or(s);if(n!==or(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return au(s).isEqual(au(t));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const h=ar(l.timestampValue),m=ar(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(l,u){return lr(l.bytesValue).isEqual(lr(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(l,u){return Se(l.geoPointValue.latitude)===Se(u.geoPointValue.latitude)&&Se(l.geoPointValue.longitude)===Se(u.geoPointValue.longitude)})(s,t);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Se(l.integerValue)===Se(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const h=Se(l.doubleValue),m=Se(u.doubleValue);return h===m?yh(h)===yh(m):isNaN(h)&&isNaN(m)}return!1})(s,t);case 9:return dl(s.arrayValue.values||[],t.arrayValue.values||[],ji);case 10:case 11:return(function(l,u){const h=l.mapValue.fields||{},m=u.mapValue.fields||{};if(dE(h)!==dE(m))return!1;for(const _ in h)if(h.hasOwnProperty(_)&&(m[_]===void 0||!ji(h[_],m[_])))return!1;return!0})(s,t);default:return _t(52216,{left:s})}}function ou(s,t){return(s.values||[]).find((n=>ji(n,t)))!==void 0}function ml(s,t){if(s===t)return 0;const n=or(s),r=or(t);if(n!==r)return Ot(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ot(s.booleanValue,t.booleanValue);case 2:return(function(u,h){const m=Se(u.integerValue||u.doubleValue),_=Se(h.integerValue||h.doubleValue);return m<_?-1:m>_?1:m===_?0:isNaN(m)?isNaN(_)?0:-1:1})(s,t);case 3:return pE(s.timestampValue,t.timestampValue);case 4:return pE(au(s),au(t));case 5:return Vm(s.stringValue,t.stringValue);case 6:return(function(u,h){const m=lr(u),_=lr(h);return m.compareTo(_)})(s.bytesValue,t.bytesValue);case 7:return(function(u,h){const m=u.split("/"),_=h.split("/");for(let g=0;g<m.length&&g<_.length;g++){const E=Ot(m[g],_[g]);if(E!==0)return E}return Ot(m.length,_.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,h){const m=Ot(Se(u.latitude),Se(h.latitude));return m!==0?m:Ot(Se(u.longitude),Se(h.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return gE(s.arrayValue,t.arrayValue);case 10:return(function(u,h){const m=u.fields||{},_=h.fields||{},g=m[Eh]?.arrayValue,E=_[Eh]?.arrayValue,T=Ot(g?.values?.length||0,E?.values?.length||0);return T!==0?T:gE(g,E)})(s.mapValue,t.mapValue);case 11:return(function(u,h){if(u===eh.mapValue&&h===eh.mapValue)return 0;if(u===eh.mapValue)return 1;if(h===eh.mapValue)return-1;const m=u.fields||{},_=Object.keys(m),g=h.fields||{},E=Object.keys(g);_.sort(),E.sort();for(let T=0;T<_.length&&T<E.length;++T){const b=Vm(_[T],E[T]);if(b!==0)return b;const P=ml(m[_[T]],g[E[T]]);if(P!==0)return P}return Ot(_.length,E.length)})(s.mapValue,t.mapValue);default:throw _t(23264,{he:n})}}function pE(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Ot(s,t);const n=ar(s),r=ar(t),l=Ot(n.seconds,r.seconds);return l!==0?l:Ot(n.nanos,r.nanos)}function gE(s,t){const n=s.values||[],r=t.values||[];for(let l=0;l<n.length&&l<r.length;++l){const u=ml(n[l],r[l]);if(u)return u}return Ot(n.length,r.length)}function pl(s){return Um(s)}function Um(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=ar(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return lr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return ft.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",l=!0;for(const u of n.values||[])l?l=!1:r+=",",r+=Um(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const h of r)u?u=!1:l+=",",l+=`${h}:${Um(n.fields[h])}`;return l+"}"})(s.mapValue):_t(61005,{value:s})}function uh(s){switch(or(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=jh(s);return t?16+uh(t):16;case 5:return 2*s.stringValue.length;case 6:return lr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+uh(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return Cl(r.fields,((u,h)=>{l+=u.length+uh(h)})),l})(s.mapValue);default:throw _t(13486,{value:s})}}function _E(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function km(s){return!!s&&"integerValue"in s}function vp(s){return!!s&&"arrayValue"in s}function yE(s){return!!s&&"nullValue"in s}function vE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function fm(s){return!!s&&"mapValue"in s}function PR(s){return(s?.mapValue?.fields||{})[xT]?.stringValue===LT}function Yo(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return Cl(s.mapValue.fields,((n,r)=>t.mapValue.fields[n]=Yo(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Yo(s.arrayValue.values[n]);return t}return{...s}}function BR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===zR}class Ui{constructor(t){this.value=t}static empty(){return new Ui({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!fm(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Yo(n)}setAll(t){let n=cn.emptyPath(),r={},l=[];t.forEach(((h,m)=>{if(!n.isImmediateParentOf(m)){const _=this.getFieldsMap(n);this.applyChanges(_,r,l),r={},l=[],n=m.popLast()}h?r[m.lastSegment()]=Yo(h):l.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,l)}delete(t){const n=this.field(t.popLast());fm(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ji(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let l=n.mapValue.fields[t.get(r)];fm(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,r){Cl(n,((l,u)=>t[l]=u));for(const l of r)delete t[l]}clone(){return new Ui(Yo(this.value))}}class ln{constructor(t,n,r,l,u,h,m){this.key=t,this.documentType=n,this.version=r,this.readTime=l,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(t){return new ln(t,0,gt.min(),gt.min(),gt.min(),Ui.empty(),0)}static newFoundDocument(t,n,r,l){return new ln(t,1,n,gt.min(),r,l,0)}static newNoDocument(t,n){return new ln(t,2,n,gt.min(),gt.min(),Ui.empty(),0)}static newUnknownDocument(t,n){return new ln(t,3,n,gt.min(),gt.min(),Ui.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ui.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ln&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Th{constructor(t,n){this.position=t,this.inclusive=n}}function EE(s,t,n){let r=0;for(let l=0;l<s.position.length;l++){const u=t[l],h=s.position[l];if(u.field.isKeyField()?r=ft.comparator(ft.fromName(h.referenceValue),n.key):r=ml(h,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function TE(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!ji(s.position[n],t.position[n]))return!1;return!0}class uu{constructor(t,n="asc"){this.field=t,this.dir=n}}function qR(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}class UT{}class Ve extends UT{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new HR(t,n,r):n==="array-contains"?new QR(t,r):n==="in"?new YR(t,r):n==="not-in"?new KR(t,r):n==="array-contains-any"?new XR(t,r):new Ve(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new FR(t,r):new GR(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ml(n,this.value)):n!==null&&or(this.value)===or(n)&&this.matchesComparison(ml(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return _t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fi extends UT{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new fi(t,n)}matches(t){return kT(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kT(s){return s.op==="and"}function zT(s){return jR(s)&&kT(s)}function jR(s){for(const t of s.filters)if(t instanceof fi)return!1;return!0}function zm(s){if(s instanceof Ve)return s.field.canonicalString()+s.op.toString()+pl(s.value);if(zT(s))return s.filters.map((t=>zm(t))).join(",");{const t=s.filters.map((n=>zm(n))).join(",");return`${s.op}(${t})`}}function PT(s,t){return s instanceof Ve?(function(r,l){return l instanceof Ve&&r.op===l.op&&r.field.isEqual(l.field)&&ji(r.value,l.value)})(s,t):s instanceof fi?(function(r,l){return l instanceof fi&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,h,m)=>u&&PT(h,l.filters[m])),!0):!1})(s,t):void _t(19439)}function BT(s){return s instanceof Ve?(function(n){return`${n.field.canonicalString()} ${n.op} ${pl(n.value)}`})(s):s instanceof fi?(function(n){return n.op.toString()+" {"+n.getFilters().map(BT).join(" ,")+"}"})(s):"Filter"}class HR extends Ve{constructor(t,n,r){super(t,n,r),this.key=ft.fromName(r.referenceValue)}matches(t){const n=ft.comparator(t.key,this.key);return this.matchesComparison(n)}}class FR extends Ve{constructor(t,n){super(t,"in",n),this.keys=qT("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class GR extends Ve{constructor(t,n){super(t,"not-in",n),this.keys=qT("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function qT(s,t){return(t.arrayValue?.values||[]).map((n=>ft.fromName(n.referenceValue)))}class QR extends Ve{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return vp(n)&&ou(n.arrayValue,this.value)}}class YR extends Ve{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ou(this.value.arrayValue,n)}}class KR extends Ve{constructor(t,n){super(t,"not-in",n)}matches(t){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ou(this.value.arrayValue,n)}}class XR extends Ve{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!vp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>ou(this.value.arrayValue,r)))}}class ZR{constructor(t,n=null,r=[],l=[],u=null,h=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function SE(s,t=null,n=[],r=[],l=null,u=null,h=null){return new ZR(s,t,n,r,l,u,h)}function Ep(s){const t=zt(s);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>zm(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),qh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>pl(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>pl(r))).join(",")),t.Te=n}return t.Te}function Tp(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!qR(s.orderBy[n],t.orderBy[n]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!PT(s.filters[n],t.filters[n]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!TE(s.startAt,t.startAt)&&TE(s.endAt,t.endAt)}function Pm(s){return ft.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class wl{constructor(t,n=null,r=[],l=[],u=null,h="F",m=null,_=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $R(s,t,n,r,l,u,h,m){return new wl(s,t,n,r,l,u,h,m)}function jT(s){return new wl(s)}function AE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function HT(s){return s.collectionGroup!==null}function Ko(s){const t=zt(s);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Be(cn.comparator);return h.filters.forEach((_=>{_.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(t).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new uu(u,r))})),n.has(cn.keyField().canonicalString())||t.Ie.push(new uu(cn.keyField(),r))}return t.Ie}function Pi(s){const t=zt(s);return t.Ee||(t.Ee=WR(t,Ko(s))),t.Ee}function WR(s,t){if(s.limitType==="F")return SE(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new uu(l.field,u)}));const n=s.endAt?new Th(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Th(s.startAt.position,s.startAt.inclusive):null;return SE(s.path,s.collectionGroup,t,s.filters,s.limit,n,r)}}function Bm(s,t){const n=s.filters.concat([t]);return new wl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Sh(s,t,n){return new wl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,n,s.startAt,s.endAt)}function Hh(s,t){return Tp(Pi(s),Pi(t))&&s.limitType===t.limitType}function FT(s){return`${Ep(Pi(s))}|lt:${s.limitType}`}function Za(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>BT(l))).join(", ")}]`),qh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>pl(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>pl(l))).join(",")),`Target(${r})`})(Pi(s))}; limitType=${s.limitType})`}function Fh(s,t){return t.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):ft.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,l){for(const u of Ko(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(s,t)&&(function(r,l){return!(r.startAt&&!(function(h,m,_){const g=EE(h,m,_);return h.inclusive?g<=0:g<0})(r.startAt,Ko(r),l)||r.endAt&&!(function(h,m,_){const g=EE(h,m,_);return h.inclusive?g>=0:g>0})(r.endAt,Ko(r),l))})(s,t)}function JR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function GT(s){return(t,n)=>{let r=!1;for(const l of Ko(s)){const u=t2(l,t,n);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function t2(s,t,n){const r=s.field.isKeyField()?ft.comparator(t.key,n.key):(function(u,h,m){const _=h.data.field(u),g=m.data.field(u);return _!==null&&g!==null?ml(_,g):_t(42886)})(s.field,t,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return _t(19790,{direction:s.dir})}}class ea{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),l=this.inner[r];if(l===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],t))return void(l[u]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Cl(this.inner,((n,r)=>{for(const[l,u]of r)t(l,u)}))}isEmpty(){return IT(this.inner)}size(){return this.innerSize}}const e2=new Ke(ft.comparator);function ur(){return e2}const QT=new Ke(ft.comparator);function Ho(...s){let t=QT;for(const n of s)t=t.insert(n.key,n);return t}function n2(s){let t=QT;return s.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function Yr(){return Xo()}function YT(){return Xo()}function Xo(){return new ea((s=>s.toString()),((s,t)=>s.isEqual(t)))}const i2=new Be(ft.comparator);function qt(...s){let t=i2;for(const n of s)t=t.add(n);return t}const s2=new Be(Ot);function r2(){return s2}function Sp(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(t)?"-0":t}}function KT(s){return{integerValue:""+s}}function a2(s,t){return VR(t)?KT(t):Sp(s,t)}class Gh{constructor(){this._=void 0}}function l2(s,t,n){return s instanceof qm?(function(l,u){const h={fields:{[OT]:{stringValue:DT},[VT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&yp(u)&&(u=jh(u)),u&&(h.fields[MT]=u),{mapValue:h}})(n,t):s instanceof Ah?XT(s,t):s instanceof bh?ZT(s,t):(function(l,u){const h=u2(l,u),m=bE(h)+bE(l.Ae);return km(h)&&km(l.Ae)?KT(m):Sp(l.serializer,m)})(s,t)}function o2(s,t,n){return s instanceof Ah?XT(s,t):s instanceof bh?ZT(s,t):n}function u2(s,t){return s instanceof jm?(function(r){return km(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class qm extends Gh{}class Ah extends Gh{constructor(t){super(),this.elements=t}}function XT(s,t){const n=$T(t);for(const r of s.elements)n.some((l=>ji(l,r)))||n.push(r);return{arrayValue:{values:n}}}class bh extends Gh{constructor(t){super(),this.elements=t}}function ZT(s,t){let n=$T(t);for(const r of s.elements)n=n.filter((l=>!ji(l,r)));return{arrayValue:{values:n}}}class jm extends Gh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function bE(s){return Se(s.integerValue||s.doubleValue)}function $T(s){return vp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function c2(s,t){return s.field.isEqual(t.field)&&(function(r,l){return r instanceof Ah&&l instanceof Ah||r instanceof bh&&l instanceof bh?dl(r.elements,l.elements,ji):r instanceof jm&&l instanceof jm?ji(r.Ae,l.Ae):r instanceof qm&&l instanceof qm})(s.transform,t.transform)}class Zr{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Zr}static exists(t){return new Zr(void 0,t)}static updateTime(t){return new Zr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ch(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Ap{}function WT(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new f2(s.key,Zr.none()):new bp(s.key,s.data,Zr.none());{const n=s.data,r=Ui.empty();let l=new Be(cn.comparator);for(let u of t.fields)if(!l.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?r.delete(u):r.set(u,h),l=l.add(u)}return new Qh(s.key,r,new $s(l.toArray()),Zr.none())}}function h2(s,t,n){s instanceof bp?(function(l,u,h){const m=l.value.clone(),_=wE(l.fieldTransforms,u,h.transformResults);m.setAll(_),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(s,t,n):s instanceof Qh?(function(l,u,h){if(!ch(l.precondition,u))return void u.convertToUnknownDocument(h.version);const m=wE(l.fieldTransforms,u,h.transformResults),_=u.data;_.setAll(JT(l)),_.setAll(m),u.convertToFoundDocument(h.version,_).setHasCommittedMutations()})(s,t,n):(function(l,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,t,n)}function Zo(s,t,n,r){return s instanceof bp?(function(u,h,m,_){if(!ch(u.precondition,h))return m;const g=u.value.clone(),E=RE(u.fieldTransforms,_,h);return g.setAll(E),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null})(s,t,n,r):s instanceof Qh?(function(u,h,m,_){if(!ch(u.precondition,h))return m;const g=RE(u.fieldTransforms,_,h),E=h.data;return E.setAll(JT(u)),E.setAll(g),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(s,t,n,r):(function(u,h,m){return ch(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(s,t,n)}function CE(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&dl(r,l,((u,h)=>c2(u,h)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class bp extends Ap{constructor(t,n,r,l=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Qh extends Ap{constructor(t,n,r,l,u=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function JT(s){const t=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);t.set(n,r)}})),t}function wE(s,t,n){const r=new Map;pe(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let l=0;l<n.length;l++){const u=s[l],h=u.transform,m=t.data.field(u.field);r.set(u.field,o2(h,m,n[l]))}return r}function RE(s,t,n){const r=new Map;for(const l of s){const u=l.transform,h=n.data.field(l.field);r.set(l.field,l2(u,h,t))}return r}class f2 extends Ap{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class d2{constructor(t,n,r,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(t.key)&&h2(u,t,r[l])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Zo(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Zo(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=YT();return this.mutations.forEach((l=>{const u=t.get(l.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(l.key)?null:m;const _=WT(h,m);_!==null&&r.set(l.key,_),h.isValidDocument()||h.convertToNoDocument(gt.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),qt())}isEqual(t){return this.batchId===t.batchId&&dl(this.mutations,t.mutations,((n,r)=>CE(n,r)))&&dl(this.baseMutations,t.baseMutations,((n,r)=>CE(n,r)))}}class m2{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class p2{constructor(t,n){this.count=t,this.unchangedNames=n}}var Me,Lt;function t1(s){if(s===void 0)return ms("GRPC error has no .code"),Z.UNKNOWN;switch(s){case Me.OK:return Z.OK;case Me.CANCELLED:return Z.CANCELLED;case Me.UNKNOWN:return Z.UNKNOWN;case Me.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Me.INTERNAL:return Z.INTERNAL;case Me.UNAVAILABLE:return Z.UNAVAILABLE;case Me.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Me.NOT_FOUND:return Z.NOT_FOUND;case Me.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Me.ABORTED:return Z.ABORTED;case Me.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Me.DATA_LOSS:return Z.DATA_LOSS;default:return _t(39323,{code:s})}}(Lt=Me||(Me={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";function g2(){return new TextEncoder}const _2=new nr([4294967295,4294967295],0);function IE(s){const t=g2().encode(s),n=new _T;return n.update(t),new Uint8Array(n.digest())}function NE(s){const t=new DataView(s.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),l=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new nr([n,r],0),new nr([l,u],0)]}class Cp{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fo(`Invalid padding: ${n}`);if(r<0)throw new Fo(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Fo(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Fo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=nr.fromNumber(this.ge)}ye(t,n,r){let l=t.add(n.multiply(nr.fromNumber(r)));return l.compare(_2)===1&&(l=new nr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=IE(t),[r,l]=NE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,l,u);if(!this.we(h))return!1}return!0}static create(t,n,r){const l=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),h=new Cp(u,l,n);return r.forEach((m=>h.insert(m))),h}insert(t){if(this.ge===0)return;const n=IE(t),[r,l]=NE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,l,u);this.Se(h)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Fo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yh{constructor(t,n,r,l,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const l=new Map;return l.set(t,pu.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Yh(gt.min(),l,new Ke(Ot),ur(),qt())}}class pu{constructor(t,n,r,l,u){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new pu(r,n,qt(),qt(),qt())}}class hh{constructor(t,n,r,l){this.be=t,this.removedTargetIds=n,this.key=r,this.De=l}}class e1{constructor(t,n){this.targetId=t,this.Ce=n}}class n1{constructor(t,n,r=nn.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=l}}class DE{constructor(){this.ve=0,this.Fe=OE(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=qt(),n=qt(),r=qt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:_t(38017,{changeType:u})}})),new pu(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=OE()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class y2{constructor(t){this.Ge=t,this.ze=new Map,this.je=ur(),this.Je=nh(),this.He=nh(),this.Ye=new Ke(Ot)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:_t(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,r=t.Ce.count,l=this.ot(n);if(l){const u=l.target;if(Pm(u))if(r===0){const h=new ft(u.path);this.et(n,h,ln.newNoDocument(h,gt.min()))}else pe(r===1,20013,{expectedCount:r});else{const h=this._t(n);if(h!==r){const m=this.ut(t),_=m?this.ct(m,t,h):1;if(_!==0){this.it(n);const g=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=n;let h,m;try{h=lr(r).toUint8Array()}catch(_){if(_ instanceof NT)return fl("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{m=new Cp(h,l,u)}catch(_){return fl(_ instanceof Fo?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return m.ge===0?null:m}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(n,u,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&Pm(m.target)){const _=new ft(m.target.path);this.It(_).has(h)||this.Et(h,_)||this.et(h,_,ln.newNoDocument(_,t))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let r=qt();this.He.forEach(((u,h)=>{let m=!0;h.forEachWhile((_=>{const g=this.ot(_);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(t)));const l=new Yh(t,n,this.Ye,this.je,r);return this.je=ur(),this.Je=nh(),this.He=nh(),this.Ye=new Ke(Ot),l}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new DE,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Be(Ot),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Be(Ot),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||st("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new DE),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function nh(){return new Ke(ft.comparator)}function OE(){return new Ke(ft.comparator)}const v2={asc:"ASCENDING",desc:"DESCENDING"},E2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T2={and:"AND",or:"OR"};class S2{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Hm(s,t){return s.useProto3Json||qh(t)?t:{value:t}}function Fm(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function i1(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function nl(s){return pe(!!s,49232),gt.fromTimestamp((function(n){const r=ar(n);return new me(r.seconds,r.nanos)})(s))}function s1(s,t){return Gm(s,t).canonicalString()}function Gm(s,t){const n=(function(l){return new de(["projects",l.projectId,"databases",l.database])})(s).child("documents");return t===void 0?n:n.child(t)}function r1(s){const t=de.fromString(s);return pe(c1(t),10190,{key:t.toString()}),t}function dm(s,t){const n=r1(t);if(n.get(1)!==s.databaseId.projectId)throw new rt(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new rt(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new ft(l1(n))}function a1(s,t){return s1(s.databaseId,t)}function A2(s){const t=r1(s);return t.length===4?de.emptyPath():l1(t)}function ME(s){return new de(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function l1(s){return pe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function b2(s,t){let n;if("targetChange"in t){t.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:_t(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],u=(function(g,E){return g.useProto3Json?(pe(E===void 0||typeof E=="string",58123),nn.fromBase64String(E||"")):(pe(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),nn.fromUint8Array(E||new Uint8Array))})(s,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&(function(g){const E=g.code===void 0?Z.UNKNOWN:t1(g.code);return new rt(E,g.message||"")})(h);n=new n1(r,l,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const l=dm(s,r.document.name),u=nl(r.document.updateTime),h=r.document.createTime?nl(r.document.createTime):gt.min(),m=new Ui({mapValue:{fields:r.document.fields}}),_=ln.newFoundDocument(l,u,h,m),g=r.targetIds||[],E=r.removedTargetIds||[];n=new hh(g,E,_.key,_)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const l=dm(s,r.document),u=r.readTime?nl(r.readTime):gt.min(),h=ln.newNoDocument(l,u),m=r.removedTargetIds||[];n=new hh([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const l=dm(s,r.document),u=r.removedTargetIds||[];n=new hh([],u,l,null)}else{if(!("filter"in t))return _t(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,h=new p2(l,u),m=r.targetId;n=new e1(m,h)}}return n}function C2(s,t){return{documents:[a1(s,t.path)]}}function w2(s,t){const n={structuredQuery:{}},r=t.path;let l;t.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=a1(s,l);const u=(function(g){if(g.length!==0)return u1(fi.create(g,"and"))})(t.filters);u&&(n.structuredQuery.where=u);const h=(function(g){if(g.length!==0)return g.map((E=>(function(b){return{field:$a(b.field),direction:N2(b.dir)}})(E)))})(t.orderBy);h&&(n.structuredQuery.orderBy=h);const m=Hm(s,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:n,parent:l}}function R2(s){let t=A2(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){pe(r===1,65062);const E=n.from[0];E.allDescendants?l=E.collectionId:t=t.child(E.collectionId)}let u=[];n.where&&(u=(function(T){const b=o1(T);return b instanceof fi&&zT(b)?b.getFilters():[b]})(n.where));let h=[];n.orderBy&&(h=(function(T){return T.map((b=>(function(X){return new uu(Wa(X.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(X.direction))})(b)))})(n.orderBy));let m=null;n.limit&&(m=(function(T){let b;return b=typeof T=="object"?T.value:T,qh(b)?null:b})(n.limit));let _=null;n.startAt&&(_=(function(T){const b=!!T.before,P=T.values||[];return new Th(P,b)})(n.startAt));let g=null;return n.endAt&&(g=(function(T){const b=!T.before,P=T.values||[];return new Th(P,b)})(n.endAt)),$R(t,l,h,u,m,"F",_,g)}function I2(s,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function o1(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wa(n.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=Wa(n.unaryFilter.field);return Ve.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Wa(n.unaryFilter.field);return Ve.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Wa(n.unaryFilter.field);return Ve.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _t(61313);default:return _t(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Ve.create(Wa(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _t(58110);default:return _t(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return fi.create(n.compositeFilter.filters.map((r=>o1(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return _t(1026)}})(n.compositeFilter.op))})(s):_t(30097,{filter:s})}function N2(s){return v2[s]}function D2(s){return E2[s]}function O2(s){return T2[s]}function $a(s){return{fieldPath:s.canonicalString()}}function Wa(s){return cn.fromServerFormat(s.fieldPath)}function u1(s){return s instanceof Ve?(function(n){if(n.op==="=="){if(vE(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NAN"}};if(yE(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vE(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NAN"}};if(yE(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(n.field),op:D2(n.op),value:n.value}}})(s):s instanceof fi?(function(n){const r=n.getFilters().map((l=>u1(l)));return r.length===1?r[0]:{compositeFilter:{op:O2(n.op),filters:r}}})(s):_t(54877,{filter:s})}function c1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class Ws{constructor(t,n,r,l,u=gt.min(),h=gt.min(),m=nn.EMPTY_BYTE_STRING,_=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=_}withSequenceNumber(t){return new Ws(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class M2{constructor(t){this.yt=t}}function V2(s){const t=R2({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Sh(t,t.limit,"L"):t}class x2{constructor(){this.Cn=new L2}addToCollectionParentIndex(t,n){return this.Cn.add(n),K.resolve()}getCollectionParents(t,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return K.resolve()}deleteFieldIndex(t,n){return K.resolve()}deleteAllFieldIndexes(t){return K.resolve()}createTargetIndexes(t,n){return K.resolve()}getDocumentsMatchingTarget(t,n){return K.resolve(null)}getIndexType(t,n){return K.resolve(0)}getFieldIndexes(t,n){return K.resolve([])}getNextCollectionGroupToUpdate(t){return K.resolve(null)}getMinOffset(t,n){return K.resolve(rr.min())}getMinOffsetFromCollectionGroup(t,n){return K.resolve(rr.min())}updateCollectionGroup(t,n,r){return K.resolve()}updateIndexEntries(t,n){return K.resolve()}}class L2{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),l=this.index[n]||new Be(de.comparator),u=!l.has(r);return this.index[n]=l.add(r),u}has(t){const n=t.lastSegment(),r=t.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(t){return(this.index[t]||new Be(de.comparator)).toArray()}}const VE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},h1=41943040;class An{static withCacheSize(t){return new An(t,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(h1,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);class gl{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new gl(0)}static cr(){return new gl(-1)}}const xE="LruGarbageCollector",U2=1048576;function LE([s,t],[n,r]){const l=Ot(s,n);return l===0?Ot(t,r):l}class k2{constructor(t){this.Ir=t,this.buffer=new Be(LE),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();LE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class z2{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){st(xE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bl(n)?st(xE,"Ignoring IndexedDB error during garbage collection: ",n):await Ph(n)}await this.Vr(3e5)}))}}class P2{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return K.resolve(Bh.ce);const r=new k2(n);return this.mr.forEachTarget(t,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(VE)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VE):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,l,u,h,m,_,g;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),l=this.params.maximumSequenceNumbersToCollect):l=T,h=Date.now(),this.nthSequenceNumber(t,l)))).next((T=>(r=T,m=Date.now(),this.removeTargets(t,r,n)))).next((T=>(u=T,_=Date.now(),this.removeOrphanedDocuments(t,r)))).next((T=>(g=Date.now(),Xa()<=Dt.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${l} in `+(m-h)+`ms
	Removed ${u} targets in `+(_-m)+`ms
	Removed ${T} documents in `+(g-_)+`ms
Total Duration: ${g-E}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:T}))))}}function B2(s,t){return new P2(s,t)}class q2{constructor(){this.changes=new ea((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ln.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class j2{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}class H2{constructor(t,n,r,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(r!==null&&Zo(r.mutation,l,$s.empty(),me.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,qt()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=qt()){const l=Yr();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,r).next((u=>{let h=Ho();return u.forEach(((m,_)=>{h=h.insert(m,_.overlayedDocument)})),h}))))}getOverlayedDocuments(t,n){const r=Yr();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,qt())))}populateOverlays(t,n,r){const l=[];return r.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(t,l).next((u=>{u.forEach(((h,m)=>{n.set(h,m)}))}))}computeViews(t,n,r,l){let u=ur();const h=Xo(),m=(function(){return Xo()})();return n.forEach(((_,g)=>{const E=r.get(g.key);l.has(g.key)&&(E===void 0||E.mutation instanceof Qh)?u=u.insert(g.key,g):E!==void 0?(h.set(g.key,E.mutation.getFieldMask()),Zo(E.mutation,g,E.mutation.getFieldMask(),me.now())):h.set(g.key,$s.empty())})),this.recalculateAndSaveOverlays(t,u).next((_=>(_.forEach(((g,E)=>h.set(g,E))),n.forEach(((g,E)=>m.set(g,new j2(E,h.get(g)??null)))),m)))}recalculateAndSaveOverlays(t,n){const r=Xo();let l=new Ke(((h,m)=>h-m)),u=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((h=>{for(const m of h)m.keys().forEach((_=>{const g=n.get(_);if(g===null)return;let E=r.get(_)||$s.empty();E=m.applyToLocalView(g,E),r.set(_,E);const T=(l.get(m.batchId)||qt()).add(_);l=l.insert(m.batchId,T)}))})).next((()=>{const h=[],m=l.getReverseIterator();for(;m.hasNext();){const _=m.getNext(),g=_.key,E=_.value,T=YT();E.forEach((b=>{if(!u.has(b)){const P=WT(n.get(b),r.get(b));P!==null&&T.set(b,P),u=u.add(b)}})),h.push(this.documentOverlayCache.saveOverlays(t,g,T))}return K.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,l){return(function(h){return ft.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):HT(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,l):this.getDocumentsMatchingCollectionQuery(t,n,r,l)}getNextDocuments(t,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,l).next((u=>{const h=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,l-u.size):K.resolve(Yr());let m=ru,_=u;return h.next((g=>K.forEach(g,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?K.resolve():this.remoteDocumentCache.getEntry(t,E).next((b=>{_=_.insert(E,b)}))))).next((()=>this.populateOverlays(t,g,u))).next((()=>this.computeViews(t,_,g,qt()))).next((E=>({batchId:m,changes:n2(E)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ft(n)).next((r=>{let l=Ho();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,l){const u=n.collectionGroup;let h=Ho();return this.indexManager.getCollectionParents(t,u).next((m=>K.forEach(m,(_=>{const g=(function(T,b){return new wl(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,_.child(u));return this.getDocumentsMatchingCollectionQuery(t,g,r,l).next((E=>{E.forEach(((T,b)=>{h=h.insert(T,b)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(t,n,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,u,l)))).next((h=>{u.forEach(((_,g)=>{const E=g.getKey();h.get(E)===null&&(h=h.insert(E,ln.newInvalidDocument(E)))}));let m=Ho();return h.forEach(((_,g)=>{const E=u.get(_);E!==void 0&&Zo(E.mutation,g,$s.empty(),me.now()),Fh(n,g)&&(m=m.insert(_,g))})),m}))}}class F2{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:nl(l.createTime)}})(n)),K.resolve()}getNamedQuery(t,n){return K.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:V2(l.bundledQuery),readTime:nl(l.readTime)}})(n)),K.resolve()}}class G2{constructor(){this.overlays=new Ke(ft.comparator),this.qr=new Map}getOverlay(t,n){return K.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Yr();return K.forEach(n,(l=>this.getOverlay(t,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((l,u)=>{this.St(t,n,u)})),K.resolve()}removeOverlaysForBatchId(t,n,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),K.resolve()}getOverlaysForCollection(t,n,r){const l=Yr(),u=n.length+1,h=new ft(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const _=m.getNext().value,g=_.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&_.largestBatchId>r&&l.set(_.getKey(),_)}return K.resolve(l)}getOverlaysForCollectionGroup(t,n,r,l){let u=new Ke(((g,E)=>g-E));const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let E=u.get(g.largestBatchId);E===null&&(E=Yr(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const m=Yr(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((g,E)=>m.set(g,E))),!(m.size()>=l)););return K.resolve(m)}St(t,n,r){const l=this.overlays.get(r.key);if(l!==null){const h=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new m2(n,r));let u=this.qr.get(n);u===void 0&&(u=qt(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}class Q2{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(t){return K.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,K.resolve()}}class wp{constructor(){this.Qr=new Be(Ge.$r),this.Ur=new Be(Ge.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new Ge(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Gr(new Ge(t,n))}zr(t,n){t.forEach((r=>this.removeReference(r,n)))}jr(t){const n=new ft(new de([])),r=new Ge(n,t),l=new Ge(n,t+1),u=[];return this.Ur.forEachInRange([r,l],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ft(new de([])),r=new Ge(n,t),l=new Ge(n,t+1);let u=qt();return this.Ur.forEachInRange([r,l],(h=>{u=u.add(h.key)})),u}containsKey(t){const n=new Ge(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ge{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ft.comparator(t.key,n.key)||Ot(t.Yr,n.Yr)}static Kr(t,n){return Ot(t.Yr,n.Yr)||ft.comparator(t.key,n.key)}}class Y2{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Be(Ge.$r)}checkEmpty(t){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new d2(u,n,r,l);this.mutationQueue.push(h);for(const m of l)this.Zr=this.Zr.add(new Ge(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return K.resolve(h)}lookupMutationBatch(t,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,l=this.ei(r),u=l<0?0:l;return K.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?MR:this.tr-1)}getAllMutationBatches(t){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ge(n,0),l=new Ge(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,l],(h=>{const m=this.Xr(h.Yr);u.push(m)})),K.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Be(Ot);return n.forEach((l=>{const u=new Ge(l,0),h=new Ge(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(m=>{r=r.add(m.Yr)}))})),K.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,l=r.length+1;let u=r;ft.isDocumentKey(u)||(u=u.child(""));const h=new Ge(new ft(u),0);let m=new Be(Ot);return this.Zr.forEachWhile((_=>{const g=_.key.path;return!!r.isPrefixOf(g)&&(g.length===l&&(m=m.add(_.Yr)),!0)}),h),K.resolve(this.ti(m))}ti(t){const n=[];return t.forEach((r=>{const l=this.Xr(r);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){pe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return K.forEach(n.mutations,(l=>{const u=new Ge(l.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,n){const r=new Ge(n,0),l=this.Zr.firstAfterOrEqual(r);return K.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,K.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class K2{constructor(t){this.ri=t,this.docs=(function(){return new Ke(ft.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,l=this.docs.get(r),u=l?l.size:0,h=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(n))}getEntries(t,n){let r=ur();return n.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():ln.newInvalidDocument(l))})),K.resolve(r)}getDocumentsMatchingQuery(t,n,r,l){let u=ur();const h=n.path,m=new ft(h.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(m);for(;_.hasNext();){const{key:g,value:{document:E}}=_.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||IR(RR(E),r)<=0||(l.has(E.key)||Fh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return K.resolve(u)}getAllFromCollectionGroup(t,n,r,l){_t(9500)}ii(t,n){return K.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new X2(this)}getSize(t){return K.resolve(this.size)}}class X2 extends q2{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(r)})),K.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}class Z2{constructor(t){this.persistence=t,this.si=new ea((n=>Ep(n)),Tp),this.lastRemoteSnapshotVersion=gt.min(),this.highestTargetId=0,this.oi=0,this._i=new wp,this.targetCount=0,this.ai=gl.ur()}forEachTarget(t,n){return this.si.forEach(((r,l)=>n(l))),K.resolve()}getLastRemoteSnapshotVersion(t){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return K.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),K.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new gl(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(t,n){return this.Pr(n),K.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(t,n,r){let l=0;const u=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),l++)})),K.waitFor(u).next((()=>l))}getTargetCount(t){return K.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return K.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),K.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((h=>{u.push(l.markPotentiallyOrphaned(t,h))})),K.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return K.resolve(r)}containsKey(t,n){return K.resolve(this._i.containsKey(n))}}class f1{constructor(t,n){this.ui={},this.overlays={},this.ci=new Bh(0),this.li=!1,this.li=!0,this.hi=new Q2,this.referenceDelegate=t(this),this.Pi=new Z2(this),this.indexManager=new x2,this.remoteDocumentCache=(function(l){return new K2(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new M2(n),this.Ii=new F2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new G2,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new Y2(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){st("MemoryPersistence","Starting transaction:",t);const l=new $2(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(t,n){return K.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,n))))}}class $2 extends DR{constructor(t){super(),this.currentSequenceNumber=t}}class Rp{constructor(t){this.persistence=t,this.Ri=new wp,this.Vi=null}static mi(t){return new Rp(t)}get fi(){if(this.Vi)return this.Vi;throw _t(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),K.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),K.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,(r=>{const l=ft.fromPath(r);return this.gi(t,l).next((u=>{u||n.removeEntry(l,gt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Ch{constructor(t,n){this.persistence=t,this.pi=new ea((r=>xR(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=B2(this,n)}static mi(t,n){return new Ch(t,n)}Ei(){}di(t){return K.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((l=>r+l))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}pr(t,n){return K.forEach(this.pi,((r,l)=>this.br(t,r,l).next((u=>u?K.resolve():n(l)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(t,(h=>this.br(t,h,n).next((m=>{m||(r++,u.removeEntry(h,gt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),K.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),K.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),K.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),K.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=uh(t.data.value)),n}br(t,n,r){return K.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return K.resolve(l!==void 0&&l>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Ip{constructor(t,n,r,l){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=l}static As(t,n){let r=qt(),l=qt();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Ip(t,n.fromCache,r,l)}}class W2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class J2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return QC()?8:OR(sT())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,l){const u={result:null};return this.ys(t,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(t,n,l,r).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new W2;return this.Ss(t,n,h).next((m=>{if(u.result=m,this.Vs)return this.bs(t,n,h,m.size)}))})).next((()=>u.result))}bs(t,n,r,l){return r.documentReadCount<this.fs?(Xa()<=Dt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",Za(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(Xa()<=Dt.DEBUG&&st("QueryEngine","Query:",Za(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(Xa()<=Dt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",Za(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Pi(n))):K.resolve())}ys(t,n){if(AE(n))return K.resolve(null);let r=Pi(n);return this.indexManager.getIndexType(t,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Sh(n,null,"F"),r=Pi(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const h=qt(...u);return this.ps.getDocuments(t,h).next((m=>this.indexManager.getMinOffset(t,r).next((_=>{const g=this.Ds(n,m);return this.Cs(n,g,h,_.readTime)?this.ys(t,Sh(n,null,"F")):this.vs(t,g,n,_)}))))})))))}ws(t,n,r,l){return AE(n)||l.isEqual(gt.min())?K.resolve(null):this.ps.getDocuments(t,r).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,r,l)?K.resolve(null):(Xa()<=Dt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Za(n)),this.vs(t,h,n,wR(l,ru)).next((m=>m)))}))}Ds(t,n){let r=new Be(GT(t));return n.forEach(((l,u)=>{Fh(t,u)&&(r=r.add(u))})),r}Cs(t,n,r,l){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(t,n,r){return Xa()<=Dt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",Za(n)),this.ps.getDocumentsMatchingQuery(t,n,rr.min(),r)}vs(t,n,r,l){return this.ps.getDocumentsMatchingQuery(t,r,l).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const Np="LocalStore",tI=3e8;class eI{constructor(t,n,r,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new Ke(Ot),this.xs=new ea((u=>Ep(u)),Tp),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new H2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function nI(s,t,n,r){return new eI(s,t,n,r)}async function d1(s,t){const n=zt(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const h=[],m=[];let _=qt();for(const g of l){h.push(g.batchId);for(const E of g.mutations)_=_.add(E.key)}for(const g of u){m.push(g.batchId);for(const E of g.mutations)_=_.add(E.key)}return n.localDocuments.getDocuments(r,_).next((g=>({Ls:g,removedBatchIds:h,addedBatchIds:m})))}))}))}function m1(s){const t=zt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function iI(s,t){const n=zt(s),r=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const m=[];t.targetChanges.forEach(((E,T)=>{const b=l.get(T);if(!b)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,T))));let P=b.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(T)!==null?P=P.withResumeToken(nn.EMPTY_BYTE_STRING,gt.min()).withLastLimboFreeSnapshotVersion(gt.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,r)),l=l.insert(T,P),(function(J,$,mt){return J.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=tI?!0:mt.addedDocuments.size+mt.modifiedDocuments.size+mt.removedDocuments.size>0})(b,P,E)&&m.push(n.Pi.updateTargetData(u,P))}));let _=ur(),g=qt();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(sI(u,h,t.documentUpdates).next((E=>{_=E.ks,g=E.qs}))),!r.isEqual(gt.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return K.waitFor(m).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,_,g))).next((()=>_))})).then((u=>(n.Ms=l,u)))}function sI(s,t,n){let r=qt(),l=qt();return n.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let h=ur();return n.forEach(((m,_)=>{const g=u.get(m);_.isFoundDocument()!==g.isFoundDocument()&&(l=l.add(m)),_.isNoDocument()&&_.version.isEqual(gt.min())?(t.removeEntry(m,_.readTime),h=h.insert(m,_)):!g.isValidDocument()||_.version.compareTo(g.version)>0||_.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(_),h=h.insert(m,_)):st(Np,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",_.version)})),{ks:h,qs:l}}))}function rI(s,t){const n=zt(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.Pi.getTargetData(r,t).next((u=>u?(l=u,K.resolve(l)):n.Pi.allocateTargetId(r).next((h=>(l=new Ws(t,h,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r}))}async function Qm(s,t,n){const r=zt(s),l=r.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(h=>r.persistence.referenceDelegate.removeTarget(h,l)))}catch(h){if(!bl(h))throw h;st(Np,`Failed to update sequence numbers for target ${t}: ${h}`)}r.Ms=r.Ms.remove(t),r.xs.delete(l.target)}function UE(s,t,n){const r=zt(s);let l=gt.min(),u=qt();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(_,g,E){const T=zt(_),b=T.xs.get(E);return b!==void 0?K.resolve(T.Ms.get(b)):T.Pi.getTargetData(g,E)})(r,h,Pi(t)).next((m=>{if(m)return l=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(h,m.targetId).next((_=>{u=_}))})).next((()=>r.Fs.getDocumentsMatchingQuery(h,t,n?l:gt.min(),n?u:qt()))).next((m=>(aI(r,JR(t),m),{documents:m,Qs:u})))))}function aI(s,t,n){let r=s.Os.get(t)||gt.min();n.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}class kE{constructor(){this.activeTargetIds=r2()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class lI{constructor(){this.Mo=new kE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new kE,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class oI{Oo(t){}shutdown(){}}const zE="ConnectivityMonitor";class PE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){st(zE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){st(zE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ih=null;function Ym(){return ih===null?ih=(function(){return 268435456+Math.round(2147483648*Math.random())})():ih++,"0x"+ih.toString(16)}const mm="RestConnection",uI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===vh?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(t,n,r,l,u){const h=Ym(),m=this.zo(t,n.toUriEncodedString());st(mm,`Sending RPC '${t}' ${h}:`,m,r);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,l,u);const{host:g}=new URL(m),E=du(g);return this.Jo(t,m,_,r,E).then((T=>(st(mm,`Received RPC '${t}' ${h}: `,T),T)),(T=>{throw fl(mm,`RPC '${t}' ${h} failed with error: `,T,"url: ",m,"request:",r),T}))}Ho(t,n,r,l,u,h){return this.Go(t,n,r,l,u)}jo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Al})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>t[u]=l)),r&&r.headers.forEach(((l,u)=>t[u]=l))}zo(t,n){const r=uI[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class hI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const rn="WebChannelConnection";class fI extends cI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,l,u){const h=Ym();return new Promise(((m,_)=>{const g=new yT;g.setWithCredentials(!0),g.listenOnce(vT.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case oh.NO_ERROR:const T=g.getResponseJson();st(rn,`XHR for RPC '${t}' ${h} received:`,JSON.stringify(T)),m(T);break;case oh.TIMEOUT:st(rn,`RPC '${t}' ${h} timed out`),_(new rt(Z.DEADLINE_EXCEEDED,"Request time out"));break;case oh.HTTP_ERROR:const b=g.getStatus();if(st(rn,`RPC '${t}' ${h} failed with status:`,b,"response text:",g.getResponseText()),b>0){let P=g.getResponseJson();Array.isArray(P)&&(P=P[0]);const X=P?.error;if(X&&X.status&&X.message){const J=(function(mt){const yt=mt.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(yt)>=0?yt:Z.UNKNOWN})(X.status);_(new rt(J,X.message))}else _(new rt(Z.UNKNOWN,"Server responded with status "+g.getStatus()))}else _(new rt(Z.UNAVAILABLE,"Connection failed."));break;default:_t(9055,{l_:t,streamId:h,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{st(rn,`RPC '${t}' ${h} completed.`)}}));const E=JSON.stringify(l);st(rn,`RPC '${t}' ${h} sending request:`,l),g.send(n,"POST",E,r,15)}))}T_(t,n,r){const l=Ym(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=ST(),m=TT(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(_.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,n,r),_.encodeInitMessageHeaders=!0;const E=u.join("");st(rn,`Creating RPC '${t}' stream ${l}: ${E}`,_);const T=h.createWebChannel(E,_);this.I_(T);let b=!1,P=!1;const X=new hI({Yo:$=>{P?st(rn,`Not sending because RPC '${t}' stream ${l} is closed:`,$):(b||(st(rn,`Opening RPC '${t}' stream ${l} transport.`),T.open(),b=!0),st(rn,`RPC '${t}' stream ${l} sending:`,$),T.send($))},Zo:()=>T.close()}),J=($,mt,yt)=>{$.listen(mt,(ot=>{try{yt(ot)}catch(Vt){setTimeout((()=>{throw Vt}),0)}}))};return J(T,jo.EventType.OPEN,(()=>{P||(st(rn,`RPC '${t}' stream ${l} transport opened.`),X.o_())})),J(T,jo.EventType.CLOSE,(()=>{P||(P=!0,st(rn,`RPC '${t}' stream ${l} transport closed`),X.a_(),this.E_(T))})),J(T,jo.EventType.ERROR,($=>{P||(P=!0,fl(rn,`RPC '${t}' stream ${l} transport errored. Name:`,$.name,"Message:",$.message),X.a_(new rt(Z.UNAVAILABLE,"The operation could not be completed")))})),J(T,jo.EventType.MESSAGE,($=>{if(!P){const mt=$.data[0];pe(!!mt,16349);const yt=mt,ot=yt?.error||yt[0]?.error;if(ot){st(rn,`RPC '${t}' stream ${l} received error:`,ot);const Vt=ot.status;let ie=(function(C){const I=Me[C];if(I!==void 0)return t1(I)})(Vt),Pt=ot.message;ie===void 0&&(ie=Z.INTERNAL,Pt="Unknown error status: "+Vt+" with message "+ot.message),P=!0,X.a_(new rt(ie,Pt)),T.close()}else st(rn,`RPC '${t}' stream ${l} received:`,mt),X.u_(mt)}})),J(m,ET.STAT_EVENT,($=>{$.stat===Mm.PROXY?st(rn,`RPC '${t}' stream ${l} detected buffering proxy`):$.stat===Mm.NOPROXY&&st(rn,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{X.__()}),0),X}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function pm(){return typeof document<"u"?document:null}function Kh(s){return new S2(s,!0)}class p1{constructor(t,n,r=1e3,l=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&st("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const BE="PersistentStream";class dI{constructor(t,n,r,l,u,h,m,_){this.Mi=t,this.S_=r,this.b_=l,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new p1(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(ms(n.toString()),ms("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{t((()=>{const l=new rt(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return st(BE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(st(BE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mI extends dI{constructor(t,n,r,l,u,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,h),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=b2(this.serializer,t),r=(function(u){if(!("targetChange"in u))return gt.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?gt.min():h.readTime?nl(h.readTime):gt.min()})(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=ME(this.serializer),n.addTarget=(function(u,h){let m;const _=h.target;if(m=Pm(_)?{documents:C2(u,_)}:{query:w2(u,_).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=i1(u,h.resumeToken);const g=Hm(u,h.expectedCount);g!==null&&(m.expectedCount=g)}else if(h.snapshotVersion.compareTo(gt.min())>0){m.readTime=Fm(u,h.snapshotVersion.toTimestamp());const g=Hm(u,h.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,t);const r=I2(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=ME(this.serializer),n.removeTarget=t,this.q_(n)}}class pI{}class gI extends pI{constructor(t,n,r,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new rt(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(t,Gm(n,r),l,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new rt(Z.UNKNOWN,u.toString())}))}Ho(t,n,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(t,Gm(n,r),l,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new rt(Z.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class _I{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ms(n),this.aa=!1):st("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const _l="RemoteStore";class yI{constructor(t,n,r,l,u){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{r.enqueueAndForget((async()=>{_u(this)&&(st(_l,"Restarting streams for network reachability change."),await(async function(_){const g=zt(_);g.Ea.add(4),await gu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Xh(g)})(this))}))})),this.Ra=new _I(r,l)}}async function Xh(s){if(_u(s))for(const t of s.da)await t(!0)}async function gu(s){for(const t of s.da)await t(!1)}function g1(s,t){const n=zt(s);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Vp(n)?Mp(n):Rl(n).O_()&&Op(n,t))}function Dp(s,t){const n=zt(s),r=Rl(n);n.Ia.delete(t),r.O_()&&_1(n,t),n.Ia.size===0&&(r.O_()?r.L_():_u(n)&&n.Ra.set("Unknown"))}function Op(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(gt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Rl(s).Y_(t)}function _1(s,t){s.Va.Ue(t),Rl(s).Z_(t)}function Mp(s){s.Va=new y2({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),Rl(s).start(),s.Ra.ua()}function Vp(s){return _u(s)&&!Rl(s).x_()&&s.Ia.size>0}function _u(s){return zt(s).Ea.size===0}function y1(s){s.Va=void 0}async function vI(s){s.Ra.set("Online")}async function EI(s){s.Ia.forEach(((t,n)=>{Op(s,t)}))}async function TI(s,t){y1(s),Vp(s)?(s.Ra.ha(t),Mp(s)):s.Ra.set("Unknown")}async function SI(s,t,n){if(s.Ra.set("Online"),t instanceof n1&&t.state===2&&t.cause)try{await(async function(l,u){const h=u.cause;for(const m of u.targetIds)l.Ia.has(m)&&(await l.remoteSyncer.rejectListen(m,h),l.Ia.delete(m),l.Va.removeTarget(m))})(s,t)}catch(r){st(_l,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await qE(s,r)}else if(t instanceof hh?s.Va.Ze(t):t instanceof e1?s.Va.st(t):s.Va.tt(t),!n.isEqual(gt.min()))try{const r=await m1(s.localStore);n.compareTo(r)>=0&&await(function(u,h){const m=u.Va.Tt(h);return m.targetChanges.forEach(((_,g)=>{if(_.resumeToken.approximateByteSize()>0){const E=u.Ia.get(g);E&&u.Ia.set(g,E.withResumeToken(_.resumeToken,h))}})),m.targetMismatches.forEach(((_,g)=>{const E=u.Ia.get(_);if(!E)return;u.Ia.set(_,E.withResumeToken(nn.EMPTY_BYTE_STRING,E.snapshotVersion)),_1(u,_);const T=new Ws(E.target,_,g,E.sequenceNumber);Op(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(s,n)}catch(r){st(_l,"Failed to raise snapshot:",r),await qE(s,r)}}async function qE(s,t,n){if(!bl(t))throw t;s.Ea.add(1),await gu(s),s.Ra.set("Offline"),n||(n=()=>m1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{st(_l,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Xh(s)}))}async function jE(s,t){const n=zt(s);n.asyncQueue.verifyOperationInProgress(),st(_l,"RemoteStore received new credentials");const r=_u(n);n.Ea.add(3),await gu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Xh(n)}async function AI(s,t){const n=zt(s);t?(n.Ea.delete(2),await Xh(n)):t||(n.Ea.add(2),await gu(n),n.Ra.set("Unknown"))}function Rl(s){return s.ma||(s.ma=(function(n,r,l){const u=zt(n);return u.sa(),new mI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Xo:vI.bind(null,s),t_:EI.bind(null,s),r_:TI.bind(null,s),H_:SI.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),Vp(s)?Mp(s):s.Ra.set("Unknown")):(await s.ma.stop(),y1(s))}))),s.ma}class xp{constructor(t,n,r,l,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,l,u){const h=Date.now()+r,m=new xp(t,n,h,l,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new rt(Z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function v1(s,t){if(ms("AsyncQueue",`${t}: ${s}`),bl(s))return new rt(Z.UNAVAILABLE,`${t}: ${s}`);throw s}class il{static emptySet(t){return new il(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||ft.comparator(n.key,r.key):(n,r)=>ft.comparator(n.key,r.key),this.keyedMap=Ho(),this.sortedSet=new Ke(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof il)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new il;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}class HE{constructor(){this.ga=new Ke(ft.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):_t(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,r)=>{t.push(r)})),t}}class yl{constructor(t,n,r,l,u,h,m,_,g){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=_,this.hasCachedResults=g}static fromInitialDocuments(t,n,r,l,u){const h=[];return n.forEach((m=>{h.push({type:0,doc:m})})),new yl(t,n,il.emptySet(n),h,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Hh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}class bI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class CI{constructor(){this.queries=FE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=zt(n),u=l.queries;l.queries=FE(),u.forEach(((h,m)=>{for(const _ of m.Sa)_.onError(r)}))})(this,new rt(Z.ABORTED,"Firestore shutting down"))}}function FE(){return new ea((s=>FT(s)),Hh)}async function wI(s,t){const n=zt(s);let r=3;const l=t.query;let u=n.queries.get(l);u?!u.ba()&&t.Da()&&(r=2):(u=new bI,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(h){const m=v1(h,`Initialization of query '${Za(t.query)}' failed`);return void t.onError(m)}n.queries.set(l,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&Lp(n)}async function RI(s,t){const n=zt(s),r=t.query;let l=3;const u=n.queries.get(r);if(u){const h=u.Sa.indexOf(t);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?l=t.Da()?0:1:!u.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function II(s,t){const n=zt(s);let r=!1;for(const l of t){const u=l.query,h=n.queries.get(u);if(h){for(const m of h.Sa)m.Fa(l)&&(r=!0);h.wa=l}}r&&Lp(n)}function NI(s,t,n){const r=zt(s),l=r.queries.get(t);if(l)for(const u of l.Sa)u.onError(n);r.queries.delete(t)}function Lp(s){s.Ca.forEach((t=>{t.next()}))}var Km,GE;(GE=Km||(Km={})).Ma="default",GE.Cache="cache";class DI{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const l of t.docChanges)l.type!==3&&r.push(l);t=new yl(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=yl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Km.Cache}}class E1{constructor(t){this.key=t}}class T1{constructor(t){this.key=t}}class OI{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qt(),this.mutatedKeys=qt(),this.eu=GT(t),this.tu=new il(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new HE,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=l,m=!1;const _=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,g=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((E,T)=>{const b=l.get(E),P=Fh(this.query,T)?T:null,X=!!b&&this.mutatedKeys.has(b.key),J=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let $=!1;b&&P?b.data.isEqual(P.data)?X!==J&&(r.track({type:3,doc:P}),$=!0):this.su(b,P)||(r.track({type:2,doc:P}),$=!0,(_&&this.eu(P,_)>0||g&&this.eu(P,g)<0)&&(m=!0)):!b&&P?(r.track({type:0,doc:P}),$=!0):b&&!P&&(r.track({type:1,doc:b}),$=!0,(_||g)&&(m=!0)),$&&(P?(h=h.add(P),u=J?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:h,iu:r,Cs:m,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,l){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const h=t.iu.ya();h.sort(((E,T)=>(function(P,X){const J=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t(20277,{Rt:$})}};return J(P)-J(X)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(r),l=l??!1;const m=n&&!l?this._u():[],_=this.Xa.size===0&&this.current&&!l?1:0,g=_!==this.Za;return this.Za=_,h.length!==0||g?{snapshot:new yl(this.query,t.tu,u,h,t.mutatedKeys,_===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new HE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=qt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return t.forEach((r=>{this.Xa.has(r)||n.push(new T1(r))})),this.Xa.forEach((r=>{t.has(r)||n.push(new E1(r))})),n}cu(t){this.Ya=t.Qs,this.Xa=qt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Up="SyncEngine";class MI{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class VI{constructor(t){this.key=t,this.hu=!1}}class xI{constructor(t,n,r,l,u,h){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new ea((m=>FT(m)),Hh),this.Iu=new Map,this.Eu=new Set,this.du=new Ke(ft.comparator),this.Au=new Map,this.Ru=new wp,this.Vu={},this.mu=new Map,this.fu=gl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LI(s,t,n=!0){const r=w1(s);let l;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await S1(r,t,n,!0),l}async function UI(s,t){const n=w1(s);await S1(n,t,!0,!1)}async function S1(s,t,n,r){const l=await rI(s.localStore,Pi(t)),u=l.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let m;return r&&(m=await kI(s,t,u,h==="current",l.resumeToken)),s.isPrimaryClient&&n&&g1(s.remoteStore,l),m}async function kI(s,t,n,r,l){s.pu=(T,b,P)=>(async function(J,$,mt,yt){let ot=$.view.ru(mt);ot.Cs&&(ot=await UE(J.localStore,$.query,!1).then((({documents:N})=>$.view.ru(N,ot))));const Vt=yt&&yt.targetChanges.get($.targetId),ie=yt&&yt.targetMismatches.get($.targetId)!=null,Pt=$.view.applyChanges(ot,J.isPrimaryClient,Vt,ie);return YE(J,$.targetId,Pt.au),Pt.snapshot})(s,T,b,P);const u=await UE(s.localStore,t,!0),h=new OI(t,u.Qs),m=h.ru(u.documents),_=pu.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",l),g=h.applyChanges(m,s.isPrimaryClient,_);YE(s,n,g.au);const E=new MI(t,n,h);return s.Tu.set(t,E),s.Iu.has(n)?s.Iu.get(n).push(t):s.Iu.set(n,[t]),g.snapshot}async function zI(s,t,n){const r=zt(s),l=r.Tu.get(t),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((h=>!Hh(h,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Qm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&Dp(r.remoteStore,l.targetId),Xm(r,l.targetId)})).catch(Ph)):(Xm(r,l.targetId),await Qm(r.localStore,l.targetId,!0))}async function PI(s,t){const n=zt(s),r=n.Tu.get(t),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dp(n.remoteStore,r.targetId))}async function A1(s,t){const n=zt(s);try{const r=await iI(n.localStore,t);t.targetChanges.forEach(((l,u)=>{const h=n.Au.get(u);h&&(pe(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?h.hu=!0:l.modifiedDocuments.size>0?pe(h.hu,14607):l.removedDocuments.size>0&&(pe(h.hu,42227),h.hu=!1))})),await C1(n,r,t)}catch(r){await Ph(r)}}function QE(s,t,n){const r=zt(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((u,h)=>{const m=h.view.va(t);m.snapshot&&l.push(m.snapshot)})),(function(h,m){const _=zt(h);_.onlineState=m;let g=!1;_.queries.forEach(((E,T)=>{for(const b of T.Sa)b.va(m)&&(g=!0)})),g&&Lp(_)})(r.eventManager,t),l.length&&r.Pu.H_(l),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function BI(s,t,n){const r=zt(s);r.sharedClientState.updateQueryState(t,"rejected",n);const l=r.Au.get(t),u=l&&l.key;if(u){let h=new Ke(ft.comparator);h=h.insert(u,ln.newNoDocument(u,gt.min()));const m=qt().add(u),_=new Yh(gt.min(),new Map,new Ke(Ot),h,m);await A1(r,_),r.du=r.du.remove(u),r.Au.delete(t),kp(r)}else await Qm(r.localStore,t,!1).then((()=>Xm(r,t,n))).catch(Ph)}function Xm(s,t,n=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||b1(s,r)}))}function b1(s,t){s.Eu.delete(t.path.canonicalString());const n=s.du.get(t);n!==null&&(Dp(s.remoteStore,n),s.du=s.du.remove(t),s.Au.delete(n),kp(s))}function YE(s,t,n){for(const r of n)r instanceof E1?(s.Ru.addReference(r.key,t),qI(s,r)):r instanceof T1?(st(Up,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||b1(s,r.key)):_t(19791,{wu:r})}function qI(s,t){const n=t.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(st(Up,"New document in limbo: "+n),s.Eu.add(r),kp(s))}function kp(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const n=new ft(de.fromString(t)),r=s.fu.next();s.Au.set(r,new VI(n)),s.du=s.du.insert(n,r),g1(s.remoteStore,new Ws(Pi(jT(n.path)),r,"TargetPurposeLimboResolution",Bh.ce))}}async function C1(s,t,n){const r=zt(s),l=[],u=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,_)=>{h.push(r.pu(_,t,n).then((g=>{if((g||n)&&r.isPrimaryClient){const E=g?!g.fromCache:n?.targetChanges.get(_.targetId)?.current;r.sharedClientState.updateQueryState(_.targetId,E?"current":"not-current")}if(g){l.push(g);const E=Ip.As(_.targetId,g);u.push(E)}})))})),await Promise.all(h),r.Pu.H_(l),await(async function(_,g){const E=zt(_);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>K.forEach(g,(b=>K.forEach(b.Es,(P=>E.persistence.referenceDelegate.addReference(T,b.targetId,P))).next((()=>K.forEach(b.ds,(P=>E.persistence.referenceDelegate.removeReference(T,b.targetId,P)))))))))}catch(T){if(!bl(T))throw T;st(Np,"Failed to update sequence numbers: "+T)}for(const T of g){const b=T.targetId;if(!T.fromCache){const P=E.Ms.get(b),X=P.snapshotVersion,J=P.withLastLimboFreeSnapshotVersion(X);E.Ms=E.Ms.insert(b,J)}}})(r.localStore,u))}async function jI(s,t){const n=zt(s);if(!n.currentUser.isEqual(t)){st(Up,"User change. New user:",t.toKey());const r=await d1(n.localStore,t);n.currentUser=t,(function(u,h){u.mu.forEach((m=>{m.forEach((_=>{_.reject(new rt(Z.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await C1(n,r.Ls)}}function HI(s,t){const n=zt(s),r=n.Au.get(t);if(r&&r.hu)return qt().add(r.key);{let l=qt();const u=n.Iu.get(t);if(!u)return l;for(const h of u){const m=n.Tu.get(h);l=l.unionWith(m.view.nu)}return l}}function w1(s){const t=zt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=A1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=HI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=BI.bind(null,t),t.Pu.H_=II.bind(null,t.eventManager),t.Pu.yu=NI.bind(null,t.eventManager),t}class wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Kh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return nI(this.persistence,new J2,t.initialUser,this.serializer)}Cu(t){return new f1(Rp.mi,this.serializer)}Du(t){return new lI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wh.provider={build:()=>new wh};class FI extends wh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){pe(this.persistence.referenceDelegate instanceof Ch,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new z2(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new f1((r=>Ch.mi(r,n)),this.serializer)}}class Zm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>QE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jI.bind(null,this.syncEngine),await AI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new CI})()}createDatastore(t){const n=Kh(t.databaseInfo.databaseId),r=(function(u){return new fI(u)})(t.databaseInfo);return(function(u,h,m,_){return new gI(u,h,m,_)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,l,u,h,m){return new yI(r,l,u,h,m)})(this.localStore,this.datastore,t.asyncQueue,(n=>QE(this.syncEngine,n,0)),(function(){return PE.v()?new PE:new oI})())}createSyncEngine(t,n){return(function(l,u,h,m,_,g,E){const T=new xI(l,u,h,m,_,g);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=zt(n);st(_l,"RemoteStore shutting down."),r.Ea.add(5),await gu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Zm.provider={build:()=>new Zm};class GI{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):ms("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}const cr="FirestoreClient";class QI{constructor(t,n,r,l,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=an.UNAUTHENTICATED,this.clientId=CT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async h=>{st(cr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(st(cr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=v1(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function gm(s,t){s.asyncQueue.verifyOperationInProgress(),st(cr,"Initializing OfflineComponentProvider");const n=s.configuration;await t.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await d1(t.localStore,l),r=l)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function KE(s,t){s.asyncQueue.verifyOperationInProgress();const n=await YI(s);st(cr,"Initializing OnlineComponentProvider"),await t.initialize(n,s.configuration),s.setCredentialChangeListener((r=>jE(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>jE(t.remoteStore,l))),s._onlineComponents=t}async function YI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){st(cr,"Using user provided OfflineComponentProvider");try{await gm(s,s._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===Z.FAILED_PRECONDITION||l.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;fl("Error using user provided cache. Falling back to memory cache: "+n),await gm(s,new wh)}}else st(cr,"Using default OfflineComponentProvider"),await gm(s,new FI(void 0));return s._offlineComponents}async function KI(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(st(cr,"Using user provided OnlineComponentProvider"),await KE(s,s._uninitializedComponentsProvider._online)):(st(cr,"Using default OnlineComponentProvider"),await KE(s,new Zm))),s._onlineComponents}async function XI(s){const t=await KI(s),n=t.eventManager;return n.onListen=LI.bind(null,t.syncEngine),n.onUnlisten=zI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=UI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=PI.bind(null,t.syncEngine),n}function ZI(s,t,n={}){const r=new Xr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,_,g){const E=new GI({next:b=>{E.Nu(),h.enqueueAndForget((()=>RI(u,T))),b.fromCache&&_.source==="server"?g.reject(new rt(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),T=new DI(m,E,{includeMetadataChanges:!0,qa:!0});return wI(u,T)})(await XI(s),s.asyncQueue,t,n,r))),r.promise}function R1(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}const XE=new Map;const I1="firestore.googleapis.com",ZE=!0;class $E{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new rt(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=I1,this.ssl=ZE}else this.host=t.host,this.ssl=t.ssl??ZE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=h1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<U2)throw new rt(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}CR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=R1(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new rt(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new rt(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new rt(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class zp{constructor(t,n,r,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $E({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new rt(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new rt(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $E(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new mR;switch(r.type){case"firstParty":return new yR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new rt(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=XE.get(n);r&&(st("ComponentProvider","Removing Datastore"),XE.delete(n),r.terminate())})(this),Promise.resolve()}}function $I(s,t,n,r={}){s=xm(s,zp);const l=du(t),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},m=`${t}:${n}`;l&&(eT(`https://${m}`),iT("Firestore",!0)),u.host!==I1&&u.host!==m&&fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...u,host:m,ssl:l,emulatorOptions:r};if(!nu(_,h)&&(s._setSettings(_),r.mockUserToken)){let g,E;if(typeof r.mockUserToken=="string")g=r.mockUserToken,E=an.MOCK_USER;else{g=nT(r.mockUserToken,s._app?.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new rt(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new an(T)}s._authCredentials=new pR(new bT(g,E))}}class dr{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new dr(this.firestore,t,this._query)}}class pn{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new pn(this.firestore,t,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(mu(n,pn._jsonSchema))return new pn(t,r||null,new ft(de.fromString(n.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:xe("string",pn._jsonSchemaVersion),referencePath:xe("string")};class sl extends dr{constructor(t,n,r){super(t,n,jT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new pn(this.firestore,null,new ft(t))}withConverter(t){return new sl(this.firestore,t,this._path)}}function WI(s,t,...n){if(s=cl(s),bR("collection","path",t),s instanceof zp){const r=de.fromString(t,...n);return uE(r),new sl(s,null,r)}{if(!(s instanceof pn||s instanceof sl))throw new rt(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(de.fromString(t,...n));return uE(r),new sl(s.firestore,null,r)}}const WE="AsyncQueue";class JE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new p1(this,"async_queue_retry"),this._c=()=>{const r=pm();r&&st(WE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=pm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=pm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Xr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!bl(t))throw t;st(WE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,ms("INTERNAL UNHANDLED ERROR: ",t0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=xp.createAndSchedule(this,t,n,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&_t(47125,{Pc:t0(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function t0(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}class N1 extends zp{constructor(t,n,r,l){super(t,n,r,l),this.type="firestore",this._queue=new JE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new JE(t),this._firestoreClient=void 0,await t}}}function JI(s,t){const n=typeof s=="object"?s:mT(),r=typeof s=="string"?s:vh,l=cT(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=J0("firestore");u&&$I(l,...u)}return l}function tN(s){if(s._terminated)throw new rt(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||eN(s),s._firestoreClient}function eN(s){const t=s._freezeSettings(),n=(function(l,u,h,m){return new kR(l,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,R1(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,t);s._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new QI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class Kn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Kn(nn.fromBase64String(t))}catch(n){throw new rt(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Kn(nn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(mu(t,Kn._jsonSchema))return Kn.fromBase64String(t.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:xe("string",Kn._jsonSchemaVersion),bytes:xe("string")};class D1{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new rt(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class O1{constructor(t){this._methodName=t}}class Bi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new rt(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new rt(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ot(this._lat,t._lat)||Ot(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bi._jsonSchemaVersion}}static fromJSON(t){if(mu(t,Bi._jsonSchema))return new Bi(t.latitude,t.longitude)}}Bi._jsonSchemaVersion="firestore/geoPoint/1.0",Bi._jsonSchema={type:xe("string",Bi._jsonSchemaVersion),latitude:xe("number"),longitude:xe("number")};class qi{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:qi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(mu(t,qi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new qi(t.vectorValues);throw new rt(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qi._jsonSchemaVersion="firestore/vectorValue/1.0",qi._jsonSchema={type:xe("string",qi._jsonSchemaVersion),vectorValues:xe("object")};const nN=/^__.*__$/;function M1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t(40011,{Ac:s})}}class Pp{constructor(t,n,r,l,u,h){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Pp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return $m(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(M1(this.Ac)&&nN.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class iN{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Kh(t)}Cc(t,n,r,l=!1){return new Pp({Ac:t,methodName:n,Dc:r,path:cn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sN(s){const t=s._freezeSettings(),n=Kh(s._databaseId);return new iN(s._databaseId,!!t.ignoreUndefinedProperties,n)}function rN(s,t,n,r=!1){return Bp(n,s.Cc(r?4:3,t))}function Bp(s,t){if(V1(s=cl(s)))return lN("Unsupported field value:",t,s),aN(s,t);if(s instanceof O1)return(function(r,l){if(!M1(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,l){const u=[];let h=0;for(const m of r){let _=Bp(m,l.wc(h));_==null&&(_={nullValue:"NULL_VALUE"}),u.push(_),h++}return{arrayValue:{values:u}}})(s,t)}return(function(r,l){if((r=cl(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return a2(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=me.fromDate(r);return{timestampValue:Fm(l.serializer,u)}}if(r instanceof me){const u=new me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fm(l.serializer,u)}}if(r instanceof Bi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kn)return{bytesValue:i1(l.serializer,r._byteString)};if(r instanceof pn){const u=l.databaseId,h=r.firestore._databaseId;if(!h.isEqual(u))throw l.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:s1(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof qi)return(function(h,m){return{mapValue:{fields:{[xT]:{stringValue:LT},[Eh]:{arrayValue:{values:h.toArray().map((g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return Sp(m.serializer,g)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${zh(r)}`)})(s,t)}function aN(s,t){const n={};return IT(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Cl(s,((r,l)=>{const u=Bp(l,t.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function V1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof me||s instanceof Bi||s instanceof Kn||s instanceof pn||s instanceof O1||s instanceof qi)}function lN(s,t,n){if(!V1(n)||!wT(n)){const r=zh(n);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}const oN=new RegExp("[~\\*/\\[\\]]");function uN(s,t,n){if(t.search(oN)>=0)throw $m(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new D1(...t.split("."))._internalPath}catch{throw $m(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function $m(s,t,n,r,l){const u=r&&!r.isEmpty(),h=l!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let _="";return(u||h)&&(_+=" (found",u&&(_+=` in field ${r}`),h&&(_+=` in document ${l}`),_+=")"),new rt(Z.INVALID_ARGUMENT,m+s+_)}class x1{constructor(t,n,r,l,u){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new cN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(qp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cN extends x1{data(){return super.data()}}function qp(s,t){return typeof t=="string"?uN(s,t):t instanceof D1?t._internalPath:t._delegate._internalPath}function hN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new rt(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jp{}class Hp extends jp{}function fN(s,t,...n){let r=[];t instanceof jp&&r.push(t),r=r.concat(n),(function(u){const h=u.filter((_=>_ instanceof Gp)).length,m=u.filter((_=>_ instanceof Fp)).length;if(h>1||h>0&&m>0)throw new rt(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)s=l._apply(s);return s}class Fp extends Hp{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Fp(t,n,r)}_apply(t){const n=this._parse(t);return L1(t._query,n),new dr(t.firestore,t.converter,Bm(t._query,n))}_parse(t){const n=sN(t.firestore);return(function(u,h,m,_,g,E,T){let b;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new rt(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){n0(T,E);const X=[];for(const J of T)X.push(e0(_,u,J));b={arrayValue:{values:X}}}else b=e0(_,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||n0(T,E),b=rN(m,h,T,E==="in"||E==="not-in");return Ve.create(g,E,b)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Gp extends jp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Gp(t,n)}_parse(t){const n=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:fi.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,u){let h=l;const m=u.getFlattenedFilters();for(const _ of m)L1(h,_),h=Bm(h,_)})(t._query,n),new dr(t.firestore,t.converter,Bm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qp extends Hp{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Qp(t,n)}_apply(t){const n=(function(l,u,h){if(l.startAt!==null)throw new rt(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new rt(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uu(u,h)})(t._query,this._field,this._direction);return new dr(t.firestore,t.converter,(function(l,u){const h=l.explicitOrderBy.concat([u]);return new wl(l.path,l.collectionGroup,h,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(t._query,n))}}function dN(s,t="asc"){const n=t,r=qp("orderBy",s);return Qp._create(r,n)}class Yp extends Hp{constructor(t,n,r){super(),this.type=t,this._limit=n,this._limitType=r}static _create(t,n,r){return new Yp(t,n,r)}_apply(t){return new dr(t.firestore,t.converter,Sh(t._query,this._limit,this._limitType))}}function mN(s){return Yp._create("limit",s,"F")}function e0(s,t,n){if(typeof(n=cl(n))=="string"){if(n==="")throw new rt(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HT(t)&&n.indexOf("/")!==-1)throw new rt(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(de.fromString(n));if(!ft.isDocumentKey(r))throw new rt(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _E(s,new ft(r))}if(n instanceof pn)return _E(s,n._key);throw new rt(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zh(n)}.`)}function n0(s,t){if(!Array.isArray(s)||s.length===0)throw new rt(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function L1(s,t){const n=(function(l,u){for(const h of l)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new rt(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new rt(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class pN{convertValue(t,n="none"){switch(or(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Se(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(lr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw _t(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Cl(t,((l,u)=>{r[l]=this.convertValue(u,n)})),r}convertVectorValue(t){const n=t.fields?.[Eh].arrayValue?.values?.map((r=>Se(r.doubleValue)));return new qi(n)}convertGeoPoint(t){return new Bi(Se(t.latitude),Se(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=jh(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(au(t));default:return null}}convertTimestamp(t){const n=ar(t);return new me(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=de.fromString(t);pe(c1(r),9688,{name:t});const l=new lu(r.get(1),r.get(3)),u=new ft(r.popFirst(5));return l.isEqual(n)||ms(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class sh{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class rl extends x1{constructor(t,n,r,l,u,h){super(t,n,r,l,h),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(qp("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=rl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}rl._jsonSchemaVersion="firestore/documentSnapshot/1.0",rl._jsonSchema={type:xe("string",rl._jsonSchemaVersion),bundleSource:xe("string","DocumentSnapshot"),bundleName:xe("string"),bundle:xe("string")};class fh extends rl{data(t={}){return super.data(t)}}class al{constructor(t,n,r,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new sh(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new fh(this._firestore,this._userDataWriter,r.key,r,new sh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new rt(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map((m=>{const _=new fh(l._firestore,l._userDataWriter,m.doc.key,m.doc,new sh(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);return m.doc,{type:"added",doc:_,oldIndex:-1,newIndex:h++}}))}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const _=new fh(l._firestore,l._userDataWriter,m.doc.key,m.doc,new sh(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);let g=-1,E=-1;return m.type!==0&&(g=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:gN(m.type),doc:_,oldIndex:g,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=al._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=CT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function gN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t(61501,{type:s})}}al._jsonSchemaVersion="firestore/querySnapshot/1.0",al._jsonSchema={type:xe("string",al._jsonSchemaVersion),bundleSource:xe("string","QuerySnapshot"),bundleName:xe("string"),bundle:xe("string")};class _N extends pN{constructor(t){super(),this.firestore=t}convertBytes(t){return new Kn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new pn(this.firestore,null,n)}}function yN(s){s=xm(s,dr);const t=xm(s.firestore,N1),n=tN(t),r=new _N(t);return hN(s._query),ZI(n,s._query).then((l=>new al(t,r,s,l)))}(function(t,n=!0){(function(l){Al=l})(fT),iu(new hl("firestore",((r,{instanceIdentifier:l,options:u})=>{const h=r.getProvider("app").getImmediate(),m=new N1(new gR(r.getProvider("auth-internal")),new vR(h,r.getProvider("app-check-internal")),(function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new rt(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(g.options.projectId,E)})(h,l),h);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),er(rE,aE,t),er(rE,aE,"esm2020")})();var i0={};const s0="@firebase/database",r0="1.1.0";let U1="";function vN(s){U1=s}class EN{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),en(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:eu(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class TN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return gs(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const k1=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const t=window[s];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new EN(t)}}catch{}return new TN},Kr=k1("localStorage"),SN=k1("sessionStorage");const ll=new pp("@firebase/database"),AN=(function(){let s=1;return function(){return s++}})(),z1=function(s){const t=iw(s),n=new ew;n.update(t);const r=n.digest();return fp.encodeByteArray(r)},yu=function(...s){let t="";for(let n=0;n<s.length;n++){const r=s[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=yu.apply(null,r):typeof r=="object"?t+=en(r):t+=r,t+=" "}return t};let $o=null,a0=!0;const bN=function(s,t){nt(!0,"Can't turn on custom loggers persistently."),ll.logLevel=Dt.VERBOSE,$o=ll.log.bind(ll)},on=function(...s){if(a0===!0&&(a0=!1,$o===null&&SN.get("logging_enabled")===!0&&bN()),$o){const t=yu.apply(null,s);$o(t)}},vu=function(s){return function(...t){on(s,...t)}},Wm=function(...s){const t="FIREBASE INTERNAL ERROR: "+yu(...s);ll.error(t)},ps=function(...s){const t=`FIREBASE FATAL ERROR: ${yu(...s)}`;throw ll.error(t),new Error(t)},xn=function(...s){const t="FIREBASE WARNING: "+yu(...s);ll.warn(t)},CN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},P1=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},wN=function(s){if(document.readyState==="complete")s();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},vl="[MIN_NAME]",Wr="[MAX_NAME]",Il=function(s,t){if(s===t)return 0;if(s===vl||t===Wr)return-1;if(t===vl||s===Wr)return 1;{const n=l0(s),r=l0(t);return n!==null?r!==null?n-r===0?s.length-t.length:n-r:-1:r!==null?1:s<t?-1:1}},RN=function(s,t){return s===t?0:s<t?-1:1},zo=function(s,t){if(t&&s in t)return t[s];throw new Error("Missing required key ("+s+") in object: "+en(t))},Kp=function(s){if(typeof s!="object"||s===null)return en(s);const t=[];for(const r in s)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=en(t[r]),n+=":",n+=Kp(s[t[r]]);return n+="}",n},B1=function(s,t){const n=s.length;if(n<=t)return[s];const r=[];for(let l=0;l<n;l+=t)l+t>n?r.push(s.substring(l,n)):r.push(s.substring(l,l+t));return r};function Zn(s,t){for(const n in s)s.hasOwnProperty(n)&&t(n,s[n])}const q1=function(s){nt(!P1(s),"Invalid JSON number");const t=11,n=52,r=(1<<t-1)-1;let l,u,h,m,_;s===0?(u=0,h=0,l=1/s===-1/0?1:0):(l=s<0,s=Math.abs(s),s>=Math.pow(2,1-r)?(m=Math.min(Math.floor(Math.log(s)/Math.LN2),r),u=m+r,h=Math.round(s*Math.pow(2,n-m)-Math.pow(2,n))):(u=0,h=Math.round(s/Math.pow(2,1-r-n))));const g=[];for(_=n;_;_-=1)g.push(h%2?1:0),h=Math.floor(h/2);for(_=t;_;_-=1)g.push(u%2?1:0),u=Math.floor(u/2);g.push(l?1:0),g.reverse();const E=g.join("");let T="";for(_=0;_<64;_+=8){let b=parseInt(E.substr(_,8),2).toString(16);b.length===1&&(b="0"+b),T=T+b}return T.toLowerCase()},IN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},NN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},DN=new RegExp("^-?(0*)\\d{1,10}$"),ON=-2147483648,MN=2147483647,l0=function(s){if(DN.test(s)){const t=Number(s);if(t>=ON&&t<=MN)return t}return null},Eu=function(s){try{s()}catch(t){setTimeout(()=>{const n=t.stack||"";throw xn("Exception was thrown by user callback.",n),t},Math.floor(0))}},VN=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Wo=function(s,t){const n=setTimeout(s,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};class xN{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,hT(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){xn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class LN{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(l=>this.auth_=l)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(on("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xn(t)}}class dh{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}dh.OWNER="owner";const Xp="5",j1="v",H1="s",F1="r",G1="f",Q1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Y1="ls",K1="p",Jm="ac",X1="websocket",Z1="long_polling";class $1{constructor(t,n,r,l,u=!1,h="",m=!1,_=!1,g=null){this.secure=n,this.namespace=r,this.webSocketOnly=l,this.nodeAdmin=u,this.persistenceKey=h,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=_,this.emulatorOptions=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Kr.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Kr.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function UN(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function W1(s,t,n){nt(typeof t=="string","typeof type must == string"),nt(typeof n=="object","typeof params must == object");let r;if(t===X1)r=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(t===Z1)r=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);UN(s)&&(n.ns=s.namespace);const l=[];return Zn(n,(u,h)=>{l.push(u+"="+h)}),r+l.join("&")}class kN{constructor(){this.counters_={}}incrementCounter(t,n=1){gs(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return xC(this.counters_)}}const _m={},ym={};function Zp(s){const t=s.toString();return _m[t]||(_m[t]=new kN),_m[t]}function zN(s,t){const n=s.toString();return ym[n]||(ym[n]=t()),ym[n]}class PN{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<r.length;++l)r[l]&&Eu(()=>{this.onMessage_(r[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const o0="start",BN="close",qN="pLPCommand",jN="pRTLPCB",J1="id",tS="pw",eS="ser",HN="cb",FN="seg",GN="ts",QN="d",YN="dframe",nS=1870,iS=30,KN=nS-iS,XN=25e3,ZN=3e4;class tl{constructor(t,n,r,l,u,h,m){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=l,this.authToken=u,this.transportSessionId=h,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vu(t),this.stats_=Zp(n),this.urlFn=_=>(this.appCheckToken&&(_[Jm]=this.appCheckToken),W1(n,Z1,_))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new PN(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ZN)),wN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $p((...u)=>{const[h,m,_,g,E]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,h===o0)this.id=m,this.password=_;else if(h===BN)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+h)},(...u)=>{const[h,m]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(h,m)},()=>{this.onClosed_()},this.urlFn);const r={};r[o0]="t",r[eS]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[HN]=this.scriptTagHolder.uniqueCallbackIdentifier),r[j1]=Xp,this.transportSessionId&&(r[H1]=this.transportSessionId),this.lastSessionId&&(r[Y1]=this.lastSessionId),this.applicationId&&(r[K1]=this.applicationId),this.appCheckToken&&(r[Jm]=this.appCheckToken),typeof location<"u"&&location.hostname&&Q1.test(location.hostname)&&(r[F1]=G1);const l=this.urlFn(r);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){tl.forceAllow_=!0}static forceDisallow(){tl.forceDisallow_=!0}static isAvailable(){return tl.forceAllow_?!0:!tl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!IN()&&!NN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=en(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=$0(n),l=B1(r,KN);for(let u=0;u<l.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[u]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[YN]="t",r[J1]=t,r[tS]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=en(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class $p{constructor(t,n,r,l){this.onDisconnect=r,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=AN(),window[qN+this.uniqueCallbackIdentifier]=t,window[jN+this.uniqueCallbackIdentifier]=n,this.myIFrame=$p.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(m){on("frame writing exception"),m.stack&&on(m.stack),on(m)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||on("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[J1]=this.myID,t[tS]=this.myPW,t[eS]=this.currentSerial;let n=this.urlFn(t),r="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+iS+r.length<=nS;){const h=this.pendingSegs.shift();r=r+"&"+FN+l+"="+h.seg+"&"+GN+l+"="+h.ts+"&"+QN+l+"="+h.d,l++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(r,Math.floor(XN)),u=()=>{clearTimeout(l),r()};this.addTag(t,u)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const l=r.readyState;(!l||l==="loaded"||l==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{on("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}const $N=16384,WN=45e3;let Rh=null;typeof MozWebSocket<"u"?Rh=MozWebSocket:typeof WebSocket<"u"&&(Rh=WebSocket);class ui{constructor(t,n,r,l,u,h,m){this.connId=t,this.applicationId=r,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vu(this.connId),this.stats_=Zp(n),this.connURL=ui.connectionURL_(n,h,m,l,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,r,l,u){const h={};return h[j1]=Xp,typeof location<"u"&&location.hostname&&Q1.test(location.hostname)&&(h[F1]=G1),n&&(h[H1]=n),r&&(h[Y1]=r),l&&(h[Jm]=l),u&&(h[K1]=u),W1(t,X1,h)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Kr.set("previous_websocket_failure",!0);try{let r;GC(),this.mySock=new Rh(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const l=r.message||r.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const l=r.message||r.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){ui.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&Rh!==null&&!ui.forceDisallow_}static previouslyFailed(){return Kr.isInMemoryStorage||Kr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Kr.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=eu(n);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(nt(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const n=en(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=B1(n,$N);r.length>1&&this.sendString_(String(r.length));for(let l=0;l<r.length;l++)this.sendString_(r[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WN))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ui.responsesRequiredToBeHealthy=2;ui.healthyTimeout=3e4;class cu{static get ALL_TRANSPORTS(){return[tl,ui]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const n=ui&&ui.isAvailable();let r=n&&!ui.previouslyFailed();if(t.webSocketOnly&&(n||xn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ui];else{const l=this.transports_=[];for(const u of cu.ALL_TRANSPORTS)u&&u.isAvailable()&&l.push(u);cu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}cu.globalTransportInitialized_=!1;const JN=6e4,tD=5e3,eD=10*1024,nD=100*1024,vm="t",u0="d",iD="s",c0="r",sD="e",h0="o",f0="a",d0="n",m0="p",rD="h";class aD{constructor(t,n,r,l,u,h,m,_,g,E){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=l,this.authToken_=u,this.onMessage_=h,this.onReady_=m,this.onDisconnect_=_,this.onKill_=g,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vu("c:"+this.id+":"),this.transportManager_=new cu(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const l=t.healthyTimeout||0;l>0&&(this.healthyTimeout_=Wo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>nD?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>eD?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(vm in t){const n=t[vm];n===f0?this.upgradeIfSecondaryHealthy_():n===c0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===h0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=zo("t",t),r=zo("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:m0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:f0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:d0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=zo("t",t),r=zo("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=zo(vm,t);if(u0 in t){const r=t[u0];if(n===rD){const l={...r};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===d0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===iD?this.onConnectionShutdown_(r):n===c0?this.onReset_(r):n===sD?Wm("Server Error: "+r):n===h0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Wm("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,r=t.v,l=t.h;this.sessionId=t.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Xp!==r&&xn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Wo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(JN))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(tD))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:m0,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Kr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class sS{put(t,n,r,l){}merge(t,n,r,l){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}}class rS{constructor(t){this.allowedEvents_=t,this.listeners_={},nt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let l=0;l<r.length;l++)r[l].callback.apply(r[l].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});const l=this.getInitialEvent(t);l&&n.apply(r,l)}off(t,n,r){this.validateEventType_(t);const l=this.listeners_[t]||[];for(let u=0;u<l.length;u++)if(l[u].callback===n&&(!r||r===l[u].context)){l.splice(u,1);return}}validateEventType_(t){nt(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}class Ih extends rS{static getInstance(){return new Ih}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!rT()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return nt(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const p0=32,g0=768;class oe{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[r]=this.pieces_[l],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function ee(){return new oe("")}function Ut(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function hr(s){return s.pieces_.length-s.pieceNum_}function le(s){let t=s.pieceNum_;return t<s.pieces_.length&&t++,new oe(s.pieces_,t)}function aS(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function lD(s){let t="";for(let n=s.pieceNum_;n<s.pieces_.length;n++)s.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(s.pieces_[n])));return t||"/"}function lS(s,t=0){return s.pieces_.slice(s.pieceNum_+t)}function oS(s){if(s.pieceNum_>=s.pieces_.length)return null;const t=[];for(let n=s.pieceNum_;n<s.pieces_.length-1;n++)t.push(s.pieces_[n]);return new oe(t,0)}function Ye(s,t){const n=[];for(let r=s.pieceNum_;r<s.pieces_.length;r++)n.push(s.pieces_[r]);if(t instanceof oe)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const r=t.split("/");for(let l=0;l<r.length;l++)r[l].length>0&&n.push(r[l])}return new oe(n,0)}function Mt(s){return s.pieceNum_>=s.pieces_.length}function Xn(s,t){const n=Ut(s),r=Ut(t);if(n===null)return t;if(n===r)return Xn(le(s),le(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+s+")")}function uS(s,t){if(hr(s)!==hr(t))return!1;for(let n=s.pieceNum_,r=t.pieceNum_;n<=s.pieces_.length;n++,r++)if(s.pieces_[n]!==t.pieces_[r])return!1;return!0}function ci(s,t){let n=s.pieceNum_,r=t.pieceNum_;if(hr(s)>hr(t))return!1;for(;n<s.pieces_.length;){if(s.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class oD{constructor(t,n){this.errorPrefix_=n,this.parts_=lS(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=kh(this.parts_[r]);cS(this)}}function uD(s,t){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(t),s.byteLength_+=kh(t),cS(s)}function cD(s){const t=s.parts_.pop();s.byteLength_-=kh(t),s.parts_.length>0&&(s.byteLength_-=1)}function cS(s){if(s.byteLength_>g0)throw new Error(s.errorPrefix_+"has a key path longer than "+g0+" bytes ("+s.byteLength_+").");if(s.parts_.length>p0)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+p0+") or object contains a cycle "+Qr(s))}function Qr(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}class Wp extends rS{static getInstance(){return new Wp}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return nt(t==="visible","Unknown event type: "+t),[this.visible_]}}const Po=1e3,hD=300*1e3,_0=30*1e3,fD=1.3,dD=3e4,mD="server_kill",y0=3;class hs extends sS{constructor(t,n,r,l,u,h,m,_){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=_,this.id=hs.nextPersistentConnectionId_++,this.log_=vu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Po,this.maxReconnectDelay_=hD,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Wp.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Ih.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,r){const l=++this.requestNumber_,u={r:l,a:t,b:n};this.log_(en(u)),nt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[l]=r)}get(t){this.initConnection_();const n=new mp,l={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const m=h.d;h.s==="ok"?n.resolve(m):n.reject(m)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),n.promise}listen(t,n,r,l){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),nt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),nt(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const m={onComplete:l,hashFn:n,query:t,tag:r};this.listens.get(h).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(t){const n=t.query,r=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+r+" for "+l);const u={p:r},h="q";t.tag&&(u.q=n._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest(h,u,m=>{const _=m.d,g=m.s;hs.warnOnListenWarnings_(_,n),(this.listens.get(r)&&this.listens.get(r).get(l))===t&&(this.log_("listen response",m),g!=="ok"&&this.removeListen_(r,l),t.onComplete&&t.onComplete(g,_))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&gs(t,"w")){const r=ul(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',u=n._path.toString();xn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||JC(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=_0)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=WC(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,l=>{const u=l.s,h=l.d||"error";this.authToken_===t&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,r=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(t,n){const r=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+l),nt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,l)&&this.connected_&&this.sendUnlisten_(r,l,t._queryObject,n)}sendUnlisten_(t,n,r,l){this.log_("Unlisten on "+t+" for "+n);const u={p:t},h="n";l&&(u.q=r,u.t=l),this.sendRequest(h,u)}onDisconnectPut(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:r})}onDisconnectMerge(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:r})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,r,l){const u={p:n,d:r};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{l&&setTimeout(()=>{l(h.s,h.d)},Math.floor(0))})}put(t,n,r,l){this.putInternal("p",t,n,r,l)}merge(t,n,r,l){this.putInternal("m",t,n,r,l)}putInternal(t,n,r,l,u){this.initConnection_();const h={p:n,d:r};u!==void 0&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:l}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,u=>{this.log_(n+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const u=r.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+en(t));const n=t.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):Wm("Unrecognized action received from server: "+en(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){nt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Po,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Po,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>dD&&(this.reconnectDelay_=Po),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fD)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+hs.nextConnectionId_++,u=this.lastSessionId;let h=!1,m=null;const _=function(){m?m.close():(h=!0,r())},g=function(T){nt(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(T)};this.realtime_={close:_,sendRequest:g};const E=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[T,b]=await Promise.all([this.authTokenProvider_.getToken(E),this.appCheckTokenProvider_.getToken(E)]);h?on("getToken() completed but was canceled"):(on("getToken() completed. Creating connection."),this.authToken_=T&&T.accessToken,this.appCheckToken_=b&&b.token,m=new aD(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,P=>{xn(P+" ("+this.repoInfo_.toString()+")"),this.interrupt(mD)},u))}catch(T){this.log_("Failed to get token: "+T),h||(this.repoInfo_.nodeAdmin&&xn(T),_())}}}interrupt(t){on("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){on("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Kv(this.interruptReasons_)&&(this.reconnectDelay_=Po,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let r;n?r=n.map(u=>Kp(u)).join("$"):r="default";const l=this.removeListen_(t,r);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,n){const r=new oe(t).toString();let l;if(this.listens.has(r)){const u=this.listens.get(r);l=u.get(n),u.delete(n),u.size===0&&this.listens.delete(r)}else l=void 0;return l}onAuthRevoked_(t,n){on("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=y0&&(this.reconnectDelay_=_0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){on("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=y0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+U1.replace(/\./g,"-")]=1,rT()?t["framework.cordova"]=1:FC()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Ih.getInstance().currentlyOnline();return Kv(this.interruptReasons_)&&t}}hs.nextPersistentConnectionId_=0;hs.nextConnectionId_=0;class kt{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new kt(t,n)}}class Zh{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const r=new kt(vl,t),l=new kt(vl,n);return this.compare(r,l)!==0}minPost(){return kt.MIN}}let rh;class hS extends Zh{static get __EMPTY_NODE(){return rh}static set __EMPTY_NODE(t){rh=t}compare(t,n){return Il(t.name,n.name)}isDefinedOn(t){throw Tl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return kt.MIN}maxPost(){return new kt(Wr,rh)}makePost(t,n){return nt(typeof t=="string","KeyIndex indexValue must always be a string."),new kt(t,rh)}toString(){return".key"}}const ol=new hS;class ah{constructor(t,n,r,l,u=null){this.isReverse_=l,this.resultGenerator_=u,this.nodeStack_=[];let h=1;for(;!t.isEmpty();)if(t=t,h=n?r(t.key,n):1,l&&(h*=-1),h<0)this.isReverse_?t=t.left:t=t.right;else if(h===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Qe{constructor(t,n,r,l,u){this.key=t,this.value=n,this.color=r??Qe.RED,this.left=l??bn.EMPTY_NODE,this.right=u??bn.EMPTY_NODE}copy(t,n,r,l,u){return new Qe(t??this.key,n??this.value,r??this.color,l??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let l=this;const u=r(t,l.key);return u<0?l=l.copy(null,null,null,l.left.insert(t,n,r),null):u===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(t,n,r)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return bn.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let r,l;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return bn.EMPTY_NODE;l=r.right.min_(),r=r.copy(l.key,l.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Qe.RED=!0;Qe.BLACK=!1;class pD{copy(t,n,r,l,u){return this}insert(t,n,r){return new Qe(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class bn{constructor(t,n=bn.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new bn(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Qe.BLACK,null,null))}remove(t){return new bn(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Qe.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,l=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return l?l.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(l=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new ah(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new ah(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new ah(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new ah(this.root_,null,this.comparator_,!0,t)}}bn.EMPTY_NODE=new pD;function gD(s,t){return Il(s.name,t.name)}function Jp(s,t){return Il(s,t)}let tp;function _D(s){tp=s}const fS=function(s){return typeof s=="number"?"number:"+q1(s):"string:"+s},dS=function(s){if(s.isLeafNode()){const t=s.val();nt(typeof t=="string"||typeof t=="number"||typeof t=="object"&&gs(t,".sv"),"Priority must be a string or number.")}else nt(s===tp||s.isEmpty(),"priority of unexpected type.");nt(s===tp||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let v0;class Fe{static set __childrenNodeConstructor(t){v0=t}static get __childrenNodeConstructor(){return v0}constructor(t,n=Fe.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,nt(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),dS(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Fe(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Fe.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Mt(t)?this:Ut(t)===".priority"?this.priorityNode_:Fe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:Fe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const r=Ut(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:(nt(r!==".priority"||hr(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Fe.__childrenNodeConstructor.EMPTY_NODE.updateChild(le(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+fS(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=q1(this.value_):t+=this.value_,this.lazyHash_=z1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Fe.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Fe.__childrenNodeConstructor?-1:(nt(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,r=typeof this.value_,l=Fe.VALUE_TYPE_ORDER.indexOf(n),u=Fe.VALUE_TYPE_ORDER.indexOf(r);return nt(l>=0,"Unknown leaf type: "+n),nt(u>=0,"Unknown leaf type: "+r),l===u?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Fe.VALUE_TYPE_ORDER=["object","boolean","number","string"];let mS,pS;function yD(s){mS=s}function vD(s){pS=s}class ED extends Zh{compare(t,n){const r=t.node.getPriority(),l=n.node.getPriority(),u=r.compareTo(l);return u===0?Il(t.name,n.name):u}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return kt.MIN}maxPost(){return new kt(Wr,new Fe("[PRIORITY-POST]",pS))}makePost(t,n){const r=mS(t);return new kt(n,new Fe("[PRIORITY-POST]",r))}toString(){return".priority"}}const hn=new ED;const TD=Math.log(2);class SD{constructor(t){const n=u=>parseInt(Math.log(u)/TD,10),r=u=>parseInt(Array(u+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const l=r(this.count);this.bits_=t+1&l}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Nh=function(s,t,n,r){s.sort(t);const l=function(_,g){const E=g-_;let T,b;if(E===0)return null;if(E===1)return T=s[_],b=n?n(T):T,new Qe(b,T.node,Qe.BLACK,null,null);{const P=parseInt(E/2,10)+_,X=l(_,P),J=l(P+1,g);return T=s[P],b=n?n(T):T,new Qe(b,T.node,Qe.BLACK,X,J)}},u=function(_){let g=null,E=null,T=s.length;const b=function(X,J){const $=T-X,mt=T;T-=X;const yt=l($+1,mt),ot=s[$],Vt=n?n(ot):ot;P(new Qe(Vt,ot.node,J,null,yt))},P=function(X){g?(g.left=X,g=X):(E=X,g=X)};for(let X=0;X<_.count;++X){const J=_.nextBitIsOne(),$=Math.pow(2,_.count-(X+1));J?b($,Qe.BLACK):(b($,Qe.BLACK),b($,Qe.RED))}return E},h=new SD(s.length),m=u(h);return new bn(r||t,m)};let Em;const Ka={};class cs{static get Default(){return nt(Ka&&hn,"ChildrenNode.ts has not been loaded"),Em=Em||new cs({".priority":Ka},{".priority":hn}),Em}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){const n=ul(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof bn?n:null}hasIndex(t){return gs(this.indexSet_,t.toString())}addIndex(t,n){nt(t!==ol,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let l=!1;const u=n.getIterator(kt.Wrap);let h=u.getNext();for(;h;)l=l||t.isDefinedOn(h.node),r.push(h),h=u.getNext();let m;l?m=Nh(r,t.getCompare()):m=Ka;const _=t.toString(),g={...this.indexSet_};g[_]=t;const E={...this.indexes_};return E[_]=m,new cs(E,g)}addToIndexes(t,n){const r=gh(this.indexes_,(l,u)=>{const h=ul(this.indexSet_,u);if(nt(h,"Missing index implementation for "+u),l===Ka)if(h.isDefinedOn(t.node)){const m=[],_=n.getIterator(kt.Wrap);let g=_.getNext();for(;g;)g.name!==t.name&&m.push(g),g=_.getNext();return m.push(t),Nh(m,h.getCompare())}else return Ka;else{const m=n.get(t.name);let _=l;return m&&(_=_.remove(new kt(t.name,m))),_.insert(t,t.node)}});return new cs(r,this.indexSet_)}removeFromIndexes(t,n){const r=gh(this.indexes_,l=>{if(l===Ka)return l;{const u=n.get(t.name);return u?l.remove(new kt(t.name,u)):l}});return new cs(r,this.indexSet_)}}let Bo;class Qt{static get EMPTY_NODE(){return Bo||(Bo=new Qt(new bn(Jp),null,cs.Default))}constructor(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&dS(this.priorityNode_),this.children_.isEmpty()&&nt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Bo}updatePriority(t){return this.children_.isEmpty()?this:new Qt(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?Bo:n}}getChild(t){const n=Ut(t);return n===null?this:this.getImmediateChild(n).getChild(le(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(nt(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const r=new kt(t,n);let l,u;n.isEmpty()?(l=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(r,this.children_)):(l=this.children_.insert(t,n),u=this.indexMap_.addToIndexes(r,this.children_));const h=l.isEmpty()?Bo:this.priorityNode_;return new Qt(l,h,u)}}updateChild(t,n){const r=Ut(t);if(r===null)return n;{nt(Ut(t)!==".priority"||hr(t)===1,".priority must be the last token in a path");const l=this.getImmediateChild(r).updateChild(le(t),n);return this.updateImmediateChild(r,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let r=0,l=0,u=!0;if(this.forEachChild(hn,(h,m)=>{n[h]=m.val(t),r++,u&&Qt.INTEGER_REGEXP_.test(h)?l=Math.max(l,Number(h)):u=!1}),!t&&u&&l<2*r){const h=[];for(const m in n)h[m]=n[m];return h}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+fS(this.getPriority().val())+":"),this.forEachChild(hn,(n,r)=>{const l=r.hash();l!==""&&(t+=":"+n+":"+l)}),this.lazyHash_=t===""?"":z1(t)}return this.lazyHash_}getPredecessorChildName(t,n,r){const l=this.resolveIndex_(r);if(l){const u=l.getPredecessorKey(new kt(t,n));return u?u.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new kt(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new kt(n,this.children_.get(n)):null}forEachChild(t,n){const r=this.resolveIndex_(t);return r?r.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,kt.Wrap);let u=l.peek();for(;u!=null&&n.compare(u,t)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,kt.Wrap);let u=l.peek();for(;u!=null&&n.compare(u,t)>0;)l.getNext(),u=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Tu?-1:0}withIndex(t){if(t===ol||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new Qt(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===ol||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(hn),l=n.getIterator(hn);let u=r.getNext(),h=l.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=r.getNext(),h=l.getNext()}return u===null&&h===null}else return!1;else return!1}}resolveIndex_(t){return t===ol?null:this.indexMap_.get(t.toString())}}Qt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class AD extends Qt{constructor(){super(new bn(Jp),Qt.EMPTY_NODE,cs.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Qt.EMPTY_NODE}isEmpty(){return!1}}const Tu=new AD;Object.defineProperties(kt,{MIN:{value:new kt(vl,Qt.EMPTY_NODE)},MAX:{value:new kt(Wr,Tu)}});hS.__EMPTY_NODE=Qt.EMPTY_NODE;Fe.__childrenNodeConstructor=Qt;_D(Tu);vD(Tu);const bD=!0;function un(s,t=null){if(s===null)return Qt.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(t=s[".priority"]),nt(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const n=s;return new Fe(n,un(t))}if(!(s instanceof Array)&&bD){const n=[];let r=!1;if(Zn(s,(h,m)=>{if(h.substring(0,1)!=="."){const _=un(m);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),n.push(new kt(h,_)))}}),n.length===0)return Qt.EMPTY_NODE;const u=Nh(n,gD,h=>h.name,Jp);if(r){const h=Nh(n,hn.getCompare());return new Qt(u,un(t),new cs({".priority":h},{".priority":hn}))}else return new Qt(u,un(t),cs.Default)}else{let n=Qt.EMPTY_NODE;return Zn(s,(r,l)=>{if(gs(s,r)&&r.substring(0,1)!=="."){const u=un(l);(u.isLeafNode()||!u.isEmpty())&&(n=n.updateImmediateChild(r,u))}}),n.updatePriority(un(t))}}yD(un);class CD extends Zh{constructor(t){super(),this.indexPath_=t,nt(!Mt(t)&&Ut(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const r=this.extractChild(t.node),l=this.extractChild(n.node),u=r.compareTo(l);return u===0?Il(t.name,n.name):u}makePost(t,n){const r=un(t),l=Qt.EMPTY_NODE.updateChild(this.indexPath_,r);return new kt(n,l)}maxPost(){const t=Qt.EMPTY_NODE.updateChild(this.indexPath_,Tu);return new kt(Wr,t)}toString(){return lS(this.indexPath_,0).join("/")}}class wD extends Zh{compare(t,n){const r=t.node.compareTo(n.node);return r===0?Il(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return kt.MIN}maxPost(){return kt.MAX}makePost(t,n){const r=un(t);return new kt(n,r)}toString(){return".value"}}const RD=new wD;function ID(s){return{type:"value",snapshotNode:s}}function ND(s,t){return{type:"child_added",snapshotNode:t,childName:s}}function DD(s,t){return{type:"child_removed",snapshotNode:t,childName:s}}function E0(s,t,n){return{type:"child_changed",snapshotNode:t,childName:s,oldSnap:n}}function OD(s,t){return{type:"child_moved",snapshotNode:t,childName:s}}class tg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return nt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return nt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vl}hasEnd(){return this.endSet_}getIndexEndValue(){return nt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return nt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return nt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===hn}copy(){const t=new tg;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function T0(s){const t={};if(s.isDefault())return t;let n;if(s.index_===hn?n="$priority":s.index_===RD?n="$value":s.index_===ol?n="$key":(nt(s.index_ instanceof CD,"Unrecognized index type!"),n=s.index_.toString()),t.orderBy=en(n),s.startSet_){const r=s.startAfterSet_?"startAfter":"startAt";t[r]=en(s.indexStartValue_),s.startNameSet_&&(t[r]+=","+en(s.indexStartName_))}if(s.endSet_){const r=s.endBeforeSet_?"endBefore":"endAt";t[r]=en(s.indexEndValue_),s.endNameSet_&&(t[r]+=","+en(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?t.limitToFirst=s.limit_:t.limitToLast=s.limit_),t}function S0(s){const t={};if(s.startSet_&&(t.sp=s.indexStartValue_,s.startNameSet_&&(t.sn=s.indexStartName_),t.sin=!s.startAfterSet_),s.endSet_&&(t.ep=s.indexEndValue_,s.endNameSet_&&(t.en=s.indexEndName_),t.ein=!s.endBeforeSet_),s.limitSet_){t.l=s.limit_;let n=s.viewFrom_;n===""&&(s.isViewFromLeft()?n="l":n="r"),t.vf=n}return s.index_!==hn&&(t.i=s.index_.toString()),t}class Dh extends sS{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(nt(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,l){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=l,this.log_=vu("p:rest:"),this.listens_={}}listen(t,n,r,l){const u=t._path.toString();this.log_("Listen called for "+u+" "+t._queryIdentifier);const h=Dh.getListenId_(t,r),m={};this.listens_[h]=m;const _=T0(t._queryParams);this.restRequest_(u+".json",_,(g,E)=>{let T=E;if(g===404&&(T=null,g=null),g===null&&this.onDataUpdate_(u,T,!1,r),ul(this.listens_,h)===m){let b;g?g===401?b="permission_denied":b="rest_error:"+g:b="ok",l(b,null)}})}unlisten(t,n){const r=Dh.getListenId_(t,n);delete this.listens_[r]}get(t){const n=T0(t._queryParams),r=t._path.toString(),l=new mp;return this.restRequest_(r+".json",n,(u,h)=>{let m=h;u===404&&(m=null,u=null),u===null?(this.onDataUpdate_(r,m,!1,null),l.resolve(m)):l.reject(new Error(m))}),l.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,u])=>{l&&l.accessToken&&(n.auth=l.accessToken),u&&u.token&&(n.ac=u.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+tw(n);this.log_("Sending REST request for "+h);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(r&&m.readyState===4){this.log_("REST Response for "+h+" received. status:",m.status,"response:",m.responseText);let _=null;if(m.status>=200&&m.status<300){try{_=eu(m.responseText)}catch{xn("Failed to parse JSON response for "+h+": "+m.responseText)}r(null,_)}else m.status!==401&&m.status!==404&&xn("Got unsuccessful REST response for "+h+" Status: "+m.status),r(m.status);r=null}},m.open("GET",h,!0),m.send()})}}class MD{constructor(){this.rootNode_=Qt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}function Oh(){return{value:null,children:new Map}}function gS(s,t,n){if(Mt(t))s.value=n,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(t,n);else{const r=Ut(t);s.children.has(r)||s.children.set(r,Oh());const l=s.children.get(r);t=le(t),gS(l,t,n)}}function ep(s,t,n){s.value!==null?n(t,s.value):VD(s,(r,l)=>{const u=new oe(t.toString()+"/"+r);ep(l,u,n)})}function VD(s,t){s.children.forEach((n,r)=>{t(r,n)})}class xD{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n={...t};return this.last_&&Zn(this.last_,(r,l)=>{n[r]=n[r]-l}),this.last_=t,n}}const A0=10*1e3,LD=30*1e3,UD=300*1e3;class kD{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new xD(t);const r=A0+(LD-A0)*Math.random();Wo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),n={};let r=!1;Zn(t,(l,u)=>{u>0&&gs(this.statsToReport_,l)&&(n[l]=u,r=!0)}),r&&this.server_.reportStats(n),Wo(this.reportStats_.bind(this),Math.floor(Math.random()*2*UD))}}var zi;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(zi||(zi={}));function _S(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function yS(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function vS(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}class Mh{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=zi.ACK_USER_WRITE,this.source=_S()}operationForChild(t){if(Mt(this.path)){if(this.affectedTree.value!=null)return nt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new oe(t));return new Mh(ee(),n,this.revert)}}else return nt(Ut(this.path)===t,"operationForChild called for unrelated child."),new Mh(le(this.path),this.affectedTree,this.revert)}}class Jr{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=zi.OVERWRITE}operationForChild(t){return Mt(this.path)?new Jr(this.source,ee(),this.snap.getImmediateChild(t)):new Jr(this.source,le(this.path),this.snap)}}class hu{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=zi.MERGE}operationForChild(t){if(Mt(this.path)){const n=this.children.subtree(new oe(t));return n.isEmpty()?null:n.value?new Jr(this.source,ee(),n.value):new hu(this.source,ee(),n)}else return nt(Ut(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new hu(this.source,le(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class eg{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Mt(t))return this.isFullyInitialized()&&!this.filtered_;const n=Ut(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}function zD(s,t,n,r){const l=[],u=[];return t.forEach(h=>{h.type==="child_changed"&&s.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&u.push(OD(h.childName,h.snapshotNode))}),qo(s,l,"child_removed",t,r,n),qo(s,l,"child_added",t,r,n),qo(s,l,"child_moved",u,r,n),qo(s,l,"child_changed",t,r,n),qo(s,l,"value",t,r,n),l}function qo(s,t,n,r,l,u){const h=r.filter(m=>m.type===n);h.sort((m,_)=>BD(s,m,_)),h.forEach(m=>{const _=PD(s,m,u);l.forEach(g=>{g.respondsTo(m.type)&&t.push(g.createEvent(_,s.query_))})})}function PD(s,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,s.index_)),t}function BD(s,t,n){if(t.childName==null||n.childName==null)throw Tl("Should only compare child_ events.");const r=new kt(t.childName,t.snapshotNode),l=new kt(n.childName,n.snapshotNode);return s.index_.compare(r,l)}function ES(s,t){return{eventCache:s,serverCache:t}}function Jo(s,t,n,r){return ES(new eg(t,n,r),s.serverCache)}function TS(s,t,n,r){return ES(s.eventCache,new eg(t,n,r))}function np(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function ta(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}let Tm;const qD=()=>(Tm||(Tm=new bn(RN)),Tm);class ae{static fromObject(t){let n=new ae(null);return Zn(t,(r,l)=>{n=n.set(new oe(r),l)}),n}constructor(t,n=qD()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:ee(),value:this.value};if(Mt(t))return null;{const r=Ut(t),l=this.children.get(r);if(l!==null){const u=l.findRootMostMatchingPathAndValue(le(t),n);return u!=null?{path:Ye(new oe(r),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Mt(t))return this;{const n=Ut(t),r=this.children.get(n);return r!==null?r.subtree(le(t)):new ae(null)}}set(t,n){if(Mt(t))return new ae(n,this.children);{const r=Ut(t),u=(this.children.get(r)||new ae(null)).set(le(t),n),h=this.children.insert(r,u);return new ae(this.value,h)}}remove(t){if(Mt(t))return this.children.isEmpty()?new ae(null):new ae(null,this.children);{const n=Ut(t),r=this.children.get(n);if(r){const l=r.remove(le(t));let u;return l.isEmpty()?u=this.children.remove(n):u=this.children.insert(n,l),this.value===null&&u.isEmpty()?new ae(null):new ae(this.value,u)}else return this}}get(t){if(Mt(t))return this.value;{const n=Ut(t),r=this.children.get(n);return r?r.get(le(t)):null}}setTree(t,n){if(Mt(t))return n;{const r=Ut(t),u=(this.children.get(r)||new ae(null)).setTree(le(t),n);let h;return u.isEmpty()?h=this.children.remove(r):h=this.children.insert(r,u),new ae(this.value,h)}}fold(t){return this.fold_(ee(),t)}fold_(t,n){const r={};return this.children.inorderTraversal((l,u)=>{r[l]=u.fold_(Ye(t,l),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,ee(),n)}findOnPath_(t,n,r){const l=this.value?r(n,this.value):!1;if(l)return l;if(Mt(t))return null;{const u=Ut(t),h=this.children.get(u);return h?h.findOnPath_(le(t),Ye(n,u),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,ee(),n)}foreachOnPath_(t,n,r){if(Mt(t))return this;{this.value&&r(n,this.value);const l=Ut(t),u=this.children.get(l);return u?u.foreachOnPath_(le(t),Ye(n,l),r):new ae(null)}}foreach(t){this.foreach_(ee(),t)}foreach_(t,n){this.children.inorderTraversal((r,l)=>{l.foreach_(Ye(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}}class hi{constructor(t){this.writeTree_=t}static empty(){return new hi(new ae(null))}}function tu(s,t,n){if(Mt(t))return new hi(new ae(n));{const r=s.writeTree_.findRootMostValueAndPath(t);if(r!=null){const l=r.path;let u=r.value;const h=Xn(l,t);return u=u.updateChild(h,n),new hi(s.writeTree_.set(l,u))}else{const l=new ae(n),u=s.writeTree_.setTree(t,l);return new hi(u)}}}function b0(s,t,n){let r=s;return Zn(n,(l,u)=>{r=tu(r,Ye(t,l),u)}),r}function C0(s,t){if(Mt(t))return hi.empty();{const n=s.writeTree_.setTree(t,new ae(null));return new hi(n)}}function ip(s,t){return na(s,t)!=null}function na(s,t){const n=s.writeTree_.findRootMostValueAndPath(t);return n!=null?s.writeTree_.get(n.path).getChild(Xn(n.path,t)):null}function w0(s){const t=[],n=s.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(hn,(r,l)=>{t.push(new kt(r,l))}):s.writeTree_.children.inorderTraversal((r,l)=>{l.value!=null&&t.push(new kt(r,l.value))}),t}function sr(s,t){if(Mt(t))return s;{const n=na(s,t);return n!=null?new hi(new ae(n)):new hi(s.writeTree_.subtree(t))}}function sp(s){return s.writeTree_.isEmpty()}function El(s,t){return SS(ee(),s.writeTree_,t)}function SS(s,t,n){if(t.value!=null)return n.updateChild(s,t.value);{let r=null;return t.children.inorderTraversal((l,u)=>{l===".priority"?(nt(u.value!==null,"Priority writes must always be leaf nodes"),r=u.value):n=SS(Ye(s,l),u,n)}),!n.getChild(s).isEmpty()&&r!==null&&(n=n.updateChild(Ye(s,".priority"),r)),n}}function AS(s,t){return IS(t,s)}function jD(s,t,n,r,l){nt(r>s.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),s.allWrites.push({path:t,snap:n,writeId:r,visible:l}),l&&(s.visibleWrites=tu(s.visibleWrites,t,n)),s.lastWriteId=r}function HD(s,t){for(let n=0;n<s.allWrites.length;n++){const r=s.allWrites[n];if(r.writeId===t)return r}return null}function FD(s,t){const n=s.allWrites.findIndex(m=>m.writeId===t);nt(n>=0,"removeWrite called with nonexistent writeId.");const r=s.allWrites[n];s.allWrites.splice(n,1);let l=r.visible,u=!1,h=s.allWrites.length-1;for(;l&&h>=0;){const m=s.allWrites[h];m.visible&&(h>=n&&GD(m,r.path)?l=!1:ci(r.path,m.path)&&(u=!0)),h--}if(l){if(u)return QD(s),!0;if(r.snap)s.visibleWrites=C0(s.visibleWrites,r.path);else{const m=r.children;Zn(m,_=>{s.visibleWrites=C0(s.visibleWrites,Ye(r.path,_))})}return!0}else return!1}function GD(s,t){if(s.snap)return ci(s.path,t);for(const n in s.children)if(s.children.hasOwnProperty(n)&&ci(Ye(s.path,n),t))return!0;return!1}function QD(s){s.visibleWrites=bS(s.allWrites,YD,ee()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function YD(s){return s.visible}function bS(s,t,n){let r=hi.empty();for(let l=0;l<s.length;++l){const u=s[l];if(t(u)){const h=u.path;let m;if(u.snap)ci(n,h)?(m=Xn(n,h),r=tu(r,m,u.snap)):ci(h,n)&&(m=Xn(h,n),r=tu(r,ee(),u.snap.getChild(m)));else if(u.children){if(ci(n,h))m=Xn(n,h),r=b0(r,m,u.children);else if(ci(h,n))if(m=Xn(h,n),Mt(m))r=b0(r,ee(),u.children);else{const _=ul(u.children,Ut(m));if(_){const g=_.getChild(le(m));r=tu(r,ee(),g)}}}else throw Tl("WriteRecord should have .snap or .children")}}return r}function CS(s,t,n,r,l){if(!r&&!l){const u=na(s.visibleWrites,t);if(u!=null)return u;{const h=sr(s.visibleWrites,t);if(sp(h))return n;if(n==null&&!ip(h,ee()))return null;{const m=n||Qt.EMPTY_NODE;return El(h,m)}}}else{const u=sr(s.visibleWrites,t);if(!l&&sp(u))return n;if(!l&&n==null&&!ip(u,ee()))return null;{const h=function(g){return(g.visible||l)&&(!r||!~r.indexOf(g.writeId))&&(ci(g.path,t)||ci(t,g.path))},m=bS(s.allWrites,h,t),_=n||Qt.EMPTY_NODE;return El(m,_)}}}function KD(s,t,n){let r=Qt.EMPTY_NODE;const l=na(s.visibleWrites,t);if(l)return l.isLeafNode()||l.forEachChild(hn,(u,h)=>{r=r.updateImmediateChild(u,h)}),r;if(n){const u=sr(s.visibleWrites,t);return n.forEachChild(hn,(h,m)=>{const _=El(sr(u,new oe(h)),m);r=r.updateImmediateChild(h,_)}),w0(u).forEach(h=>{r=r.updateImmediateChild(h.name,h.node)}),r}else{const u=sr(s.visibleWrites,t);return w0(u).forEach(h=>{r=r.updateImmediateChild(h.name,h.node)}),r}}function XD(s,t,n,r,l){nt(r||l,"Either existingEventSnap or existingServerSnap must exist");const u=Ye(t,n);if(ip(s.visibleWrites,u))return null;{const h=sr(s.visibleWrites,u);return sp(h)?l.getChild(n):El(h,l.getChild(n))}}function ZD(s,t,n,r){const l=Ye(t,n),u=na(s.visibleWrites,l);if(u!=null)return u;if(r.isCompleteForChild(n)){const h=sr(s.visibleWrites,l);return El(h,r.getNode().getImmediateChild(n))}else return null}function $D(s,t){return na(s.visibleWrites,t)}function WD(s,t,n,r,l,u,h){let m;const _=sr(s.visibleWrites,t),g=na(_,ee());if(g!=null)m=g;else if(n!=null)m=El(_,n);else return[];if(m=m.withIndex(h),!m.isEmpty()&&!m.isLeafNode()){const E=[],T=h.getCompare(),b=u?m.getReverseIteratorFrom(r,h):m.getIteratorFrom(r,h);let P=b.getNext();for(;P&&E.length<l;)T(P,r)!==0&&E.push(P),P=b.getNext();return E}else return[]}function JD(){return{visibleWrites:hi.empty(),allWrites:[],lastWriteId:-1}}function rp(s,t,n,r){return CS(s.writeTree,s.treePath,t,n,r)}function wS(s,t){return KD(s.writeTree,s.treePath,t)}function R0(s,t,n,r){return XD(s.writeTree,s.treePath,t,n,r)}function Vh(s,t){return $D(s.writeTree,Ye(s.treePath,t))}function t4(s,t,n,r,l,u){return WD(s.writeTree,s.treePath,t,n,r,l,u)}function ng(s,t,n){return ZD(s.writeTree,s.treePath,t,n)}function RS(s,t){return IS(Ye(s.treePath,t),s.writeTree)}function IS(s,t){return{treePath:s,writeTree:t}}class e4{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,r=t.childName;nt(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),nt(r!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(r);if(l){const u=l.type;if(n==="child_added"&&u==="child_removed")this.changeMap.set(r,E0(r,t.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&u==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&u==="child_changed")this.changeMap.set(r,DD(r,l.oldSnap));else if(n==="child_changed"&&u==="child_added")this.changeMap.set(r,ND(r,t.snapshotNode));else if(n==="child_changed"&&u==="child_changed")this.changeMap.set(r,E0(r,t.snapshotNode,l.oldSnap));else throw Tl("Illegal combination of changes: "+t+" occurred after "+l)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}class n4{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}}const NS=new n4;class ig{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new eg(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ng(this.writes_,t,r)}}getChildAfterChild(t,n,r){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ta(this.viewCache_),u=t4(this.writes_,l,n,1,r,t);return u.length===0?null:u[0]}}function i4(s,t){nt(t.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),nt(t.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function s4(s,t,n,r,l){const u=new e4;let h,m;if(n.type===zi.OVERWRITE){const g=n;g.source.fromUser?h=ap(s,t,g.path,g.snap,r,l,u):(nt(g.source.fromServer,"Unknown source."),m=g.source.tagged||t.serverCache.isFiltered()&&!Mt(g.path),h=xh(s,t,g.path,g.snap,r,l,m,u))}else if(n.type===zi.MERGE){const g=n;g.source.fromUser?h=a4(s,t,g.path,g.children,r,l,u):(nt(g.source.fromServer,"Unknown source."),m=g.source.tagged||t.serverCache.isFiltered(),h=lp(s,t,g.path,g.children,r,l,m,u))}else if(n.type===zi.ACK_USER_WRITE){const g=n;g.revert?h=u4(s,t,g.path,r,l,u):h=l4(s,t,g.path,g.affectedTree,r,l,u)}else if(n.type===zi.LISTEN_COMPLETE)h=o4(s,t,n.path,r,u);else throw Tl("Unknown operation type: "+n.type);const _=u.getChanges();return r4(t,h,_),{viewCache:h,changes:_}}function r4(s,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const l=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=np(s);(n.length>0||!s.eventCache.isFullyInitialized()||l&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&n.push(ID(np(t)))}}function DS(s,t,n,r,l,u){const h=t.eventCache;if(Vh(r,n)!=null)return t;{let m,_;if(Mt(n))if(nt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const g=ta(t),E=g instanceof Qt?g:Qt.EMPTY_NODE,T=wS(r,E);m=s.filter.updateFullNode(t.eventCache.getNode(),T,u)}else{const g=rp(r,ta(t));m=s.filter.updateFullNode(t.eventCache.getNode(),g,u)}else{const g=Ut(n);if(g===".priority"){nt(hr(n)===1,"Can't have a priority with additional path components");const E=h.getNode();_=t.serverCache.getNode();const T=R0(r,n,E,_);T!=null?m=s.filter.updatePriority(E,T):m=h.getNode()}else{const E=le(n);let T;if(h.isCompleteForChild(g)){_=t.serverCache.getNode();const b=R0(r,n,h.getNode(),_);b!=null?T=h.getNode().getImmediateChild(g).updateChild(E,b):T=h.getNode().getImmediateChild(g)}else T=ng(r,g,t.serverCache);T!=null?m=s.filter.updateChild(h.getNode(),g,T,E,l,u):m=h.getNode()}}return Jo(t,m,h.isFullyInitialized()||Mt(n),s.filter.filtersNodes())}}function xh(s,t,n,r,l,u,h,m){const _=t.serverCache;let g;const E=h?s.filter:s.filter.getIndexedFilter();if(Mt(n))g=E.updateFullNode(_.getNode(),r,null);else if(E.filtersNodes()&&!_.isFiltered()){const P=_.getNode().updateChild(n,r);g=E.updateFullNode(_.getNode(),P,null)}else{const P=Ut(n);if(!_.isCompleteForPath(n)&&hr(n)>1)return t;const X=le(n),$=_.getNode().getImmediateChild(P).updateChild(X,r);P===".priority"?g=E.updatePriority(_.getNode(),$):g=E.updateChild(_.getNode(),P,$,X,NS,null)}const T=TS(t,g,_.isFullyInitialized()||Mt(n),E.filtersNodes()),b=new ig(l,T,u);return DS(s,T,n,l,b,m)}function ap(s,t,n,r,l,u,h){const m=t.eventCache;let _,g;const E=new ig(l,t,u);if(Mt(n))g=s.filter.updateFullNode(t.eventCache.getNode(),r,h),_=Jo(t,g,!0,s.filter.filtersNodes());else{const T=Ut(n);if(T===".priority")g=s.filter.updatePriority(t.eventCache.getNode(),r),_=Jo(t,g,m.isFullyInitialized(),m.isFiltered());else{const b=le(n),P=m.getNode().getImmediateChild(T);let X;if(Mt(b))X=r;else{const J=E.getCompleteChild(T);J!=null?aS(b)===".priority"&&J.getChild(oS(b)).isEmpty()?X=J:X=J.updateChild(b,r):X=Qt.EMPTY_NODE}if(P.equals(X))_=t;else{const J=s.filter.updateChild(m.getNode(),T,X,b,E,h);_=Jo(t,J,m.isFullyInitialized(),s.filter.filtersNodes())}}}return _}function I0(s,t){return s.eventCache.isCompleteForChild(t)}function a4(s,t,n,r,l,u,h){let m=t;return r.foreach((_,g)=>{const E=Ye(n,_);I0(t,Ut(E))&&(m=ap(s,m,E,g,l,u,h))}),r.foreach((_,g)=>{const E=Ye(n,_);I0(t,Ut(E))||(m=ap(s,m,E,g,l,u,h))}),m}function N0(s,t,n){return n.foreach((r,l)=>{t=t.updateChild(r,l)}),t}function lp(s,t,n,r,l,u,h,m){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let _=t,g;Mt(n)?g=r:g=new ae(null).setTree(n,r);const E=t.serverCache.getNode();return g.children.inorderTraversal((T,b)=>{if(E.hasChild(T)){const P=t.serverCache.getNode().getImmediateChild(T),X=N0(s,P,b);_=xh(s,_,new oe(T),X,l,u,h,m)}}),g.children.inorderTraversal((T,b)=>{const P=!t.serverCache.isCompleteForChild(T)&&b.value===null;if(!E.hasChild(T)&&!P){const X=t.serverCache.getNode().getImmediateChild(T),J=N0(s,X,b);_=xh(s,_,new oe(T),J,l,u,h,m)}}),_}function l4(s,t,n,r,l,u,h){if(Vh(l,n)!=null)return t;const m=t.serverCache.isFiltered(),_=t.serverCache;if(r.value!=null){if(Mt(n)&&_.isFullyInitialized()||_.isCompleteForPath(n))return xh(s,t,n,_.getNode().getChild(n),l,u,m,h);if(Mt(n)){let g=new ae(null);return _.getNode().forEachChild(ol,(E,T)=>{g=g.set(new oe(E),T)}),lp(s,t,n,g,l,u,m,h)}else return t}else{let g=new ae(null);return r.foreach((E,T)=>{const b=Ye(n,E);_.isCompleteForPath(b)&&(g=g.set(E,_.getNode().getChild(b)))}),lp(s,t,n,g,l,u,m,h)}}function o4(s,t,n,r,l){const u=t.serverCache,h=TS(t,u.getNode(),u.isFullyInitialized()||Mt(n),u.isFiltered());return DS(s,h,n,r,NS,l)}function u4(s,t,n,r,l,u){let h;if(Vh(r,n)!=null)return t;{const m=new ig(r,t,l),_=t.eventCache.getNode();let g;if(Mt(n)||Ut(n)===".priority"){let E;if(t.serverCache.isFullyInitialized())E=rp(r,ta(t));else{const T=t.serverCache.getNode();nt(T instanceof Qt,"serverChildren would be complete if leaf node"),E=wS(r,T)}E=E,g=s.filter.updateFullNode(_,E,u)}else{const E=Ut(n);let T=ng(r,E,t.serverCache);T==null&&t.serverCache.isCompleteForChild(E)&&(T=_.getImmediateChild(E)),T!=null?g=s.filter.updateChild(_,E,T,le(n),m,u):t.eventCache.getNode().hasChild(E)?g=s.filter.updateChild(_,E,Qt.EMPTY_NODE,le(n),m,u):g=_,g.isEmpty()&&t.serverCache.isFullyInitialized()&&(h=rp(r,ta(t)),h.isLeafNode()&&(g=s.filter.updateFullNode(g,h,u)))}return h=t.serverCache.isFullyInitialized()||Vh(r,ee())!=null,Jo(t,g,h,s.filter.filtersNodes())}}function c4(s,t){const n=ta(s.viewCache_);return n&&(s.query._queryParams.loadsAllData()||!Mt(t)&&!n.getImmediateChild(Ut(t)).isEmpty())?n.getChild(t):null}function D0(s,t,n,r){t.type===zi.MERGE&&t.source.queryId!==null&&(nt(ta(s.viewCache_),"We should always have a full cache before handling merges"),nt(np(s.viewCache_),"Missing event cache, even though we have a server cache"));const l=s.viewCache_,u=s4(s.processor_,l,t,n,r);return i4(s.processor_,u.viewCache),nt(u.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=u.viewCache,h4(s,u.changes,u.viewCache.eventCache.getNode())}function h4(s,t,n,r){const l=s.eventRegistrations_;return zD(s.eventGenerator_,t,n,l)}let O0;function f4(s){nt(!O0,"__referenceConstructor has already been defined"),O0=s}function sg(s,t,n,r){const l=t.source.queryId;if(l!==null){const u=s.views.get(l);return nt(u!=null,"SyncTree gave us an op for an invalid query."),D0(u,t,n,r)}else{let u=[];for(const h of s.views.values())u=u.concat(D0(h,t,n,r));return u}}function rg(s,t){let n=null;for(const r of s.views.values())n=n||c4(r,t);return n}let M0;function d4(s){nt(!M0,"__referenceConstructor has already been defined"),M0=s}class V0{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ae(null),this.pendingWriteTree_=JD(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function m4(s,t,n,r,l){return jD(s.pendingWriteTree_,t,n,r,l),l?Wh(s,new Jr(_S(),t,n)):[]}function el(s,t,n=!1){const r=HD(s.pendingWriteTree_,t);if(FD(s.pendingWriteTree_,t)){let u=new ae(null);return r.snap!=null?u=u.set(ee(),!0):Zn(r.children,h=>{u=u.set(new oe(h),!0)}),Wh(s,new Mh(r.path,u,n))}else return[]}function $h(s,t,n){return Wh(s,new Jr(yS(),t,n))}function p4(s,t,n){const r=ae.fromObject(n);return Wh(s,new hu(yS(),t,r))}function g4(s,t,n,r){const l=xS(s,r);if(l!=null){const u=LS(l),h=u.path,m=u.queryId,_=Xn(h,t),g=new Jr(vS(m),_,n);return US(s,h,g)}else return[]}function _4(s,t,n,r){const l=xS(s,r);if(l){const u=LS(l),h=u.path,m=u.queryId,_=Xn(h,t),g=ae.fromObject(n),E=new hu(vS(m),_,g);return US(s,h,E)}else return[]}function OS(s,t,n){const l=s.pendingWriteTree_,u=s.syncPointTree_.findOnPath(t,(h,m)=>{const _=Xn(h,t),g=rg(m,_);if(g)return g});return CS(l,t,u,n,!0)}function Wh(s,t){return MS(t,s.syncPointTree_,null,AS(s.pendingWriteTree_,ee()))}function MS(s,t,n,r){if(Mt(s.path))return VS(s,t,n,r);{const l=t.get(ee());n==null&&l!=null&&(n=rg(l,ee()));let u=[];const h=Ut(s.path),m=s.operationForChild(h),_=t.children.get(h);if(_&&m){const g=n?n.getImmediateChild(h):null,E=RS(r,h);u=u.concat(MS(m,_,g,E))}return l&&(u=u.concat(sg(l,s,r,n))),u}}function VS(s,t,n,r){const l=t.get(ee());n==null&&l!=null&&(n=rg(l,ee()));let u=[];return t.children.inorderTraversal((h,m)=>{const _=n?n.getImmediateChild(h):null,g=RS(r,h),E=s.operationForChild(h);E&&(u=u.concat(VS(E,m,_,g)))}),l&&(u=u.concat(sg(l,s,r,n))),u}function xS(s,t){return s.tagToQueryMap.get(t)}function LS(s){const t=s.indexOf("$");return nt(t!==-1&&t<s.length-1,"Bad queryKey."),{queryId:s.substr(t+1),path:new oe(s.substr(0,t))}}function US(s,t,n){const r=s.syncPointTree_.get(t);nt(r,"Missing sync point for query tag that we're tracking");const l=AS(s.pendingWriteTree_,t);return sg(r,n,l,null)}class ag{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new ag(n)}node(){return this.node_}}class lg{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Ye(this.path_,t);return new lg(this.syncTree_,n)}node(){return OS(this.syncTree_,this.path_)}}const y4=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},x0=function(s,t,n){if(!s||typeof s!="object")return s;if(nt(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return v4(s[".sv"],t,n);if(typeof s[".sv"]=="object")return E4(s[".sv"],t);nt(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},v4=function(s,t,n){switch(s){case"timestamp":return n.timestamp;default:nt(!1,"Unexpected server value: "+s)}},E4=function(s,t,n){s.hasOwnProperty("increment")||nt(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const r=s.increment;typeof r!="number"&&nt(!1,"Unexpected increment value: "+r);const l=t.node();if(nt(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return r;const h=l.getValue();return typeof h!="number"?r:h+r},T4=function(s,t,n,r){return og(t,new lg(n,s),r)},S4=function(s,t,n){return og(s,new ag(t),n)};function og(s,t,n){const r=s.getPriority().val(),l=x0(r,t.getImmediateChild(".priority"),n);let u;if(s.isLeafNode()){const h=s,m=x0(h.getValue(),t,n);return m!==h.getValue()||l!==h.getPriority().val()?new Fe(m,un(l)):s}else{const h=s;return u=h,l!==h.getPriority().val()&&(u=u.updatePriority(new Fe(l))),h.forEachChild(hn,(m,_)=>{const g=og(_,t.getImmediateChild(m),n);g!==_&&(u=u.updateImmediateChild(m,g))}),u}}class ug{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}}function cg(s,t){let n=t instanceof oe?t:new oe(t),r=s,l=Ut(n);for(;l!==null;){const u=ul(r.node.children,l)||{children:{},childCount:0};r=new ug(l,r,u),n=le(n),l=Ut(n)}return r}function Nl(s){return s.node.value}function kS(s,t){s.node.value=t,op(s)}function zS(s){return s.node.childCount>0}function A4(s){return Nl(s)===void 0&&!zS(s)}function Jh(s,t){Zn(s.node.children,(n,r)=>{t(new ug(n,s,r))})}function PS(s,t,n,r){n&&t(s),Jh(s,l=>{PS(l,t,!0)})}function b4(s,t,n){let r=s.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function Su(s){return new oe(s.parent===null?s.name:Su(s.parent)+"/"+s.name)}function op(s){s.parent!==null&&C4(s.parent,s.name,s)}function C4(s,t,n){const r=A4(n),l=gs(s.node.children,t);r&&l?(delete s.node.children[t],s.node.childCount--,op(s)):!r&&!l&&(s.node.children[t]=n.node,s.node.childCount++,op(s))}const w4=/[\[\].#$\/\u0000-\u001F\u007F]/,R4=/[\[\].#$\u0000-\u001F\u007F]/,Sm=10*1024*1024,BS=function(s){return typeof s=="string"&&s.length!==0&&!w4.test(s)},I4=function(s){return typeof s=="string"&&s.length!==0&&!R4.test(s)},N4=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),I4(s)},qS=function(s,t,n){const r=n instanceof oe?new oD(n,s):n;if(t===void 0)throw new Error(s+"contains undefined "+Qr(r));if(typeof t=="function")throw new Error(s+"contains a function "+Qr(r)+" with contents = "+t.toString());if(P1(t))throw new Error(s+"contains "+t.toString()+" "+Qr(r));if(typeof t=="string"&&t.length>Sm/3&&kh(t)>Sm)throw new Error(s+"contains a string greater than "+Sm+" utf8 bytes "+Qr(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let l=!1,u=!1;if(Zn(t,(h,m)=>{if(h===".value")l=!0;else if(h!==".priority"&&h!==".sv"&&(u=!0,!BS(h)))throw new Error(s+" contains an invalid key ("+h+") "+Qr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);uD(r,h),qS(s,m,r),cD(r)}),l&&u)throw new Error(s+' contains ".value" child '+Qr(r)+" in addition to actual children.")}},D4=function(s,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!BS(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!N4(n))throw new Error(nw(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class O4{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function M4(s,t){let n=null;for(let r=0;r<t.length;r++){const l=t[r],u=l.getPath();n!==null&&!uS(u,n.path)&&(s.eventLists_.push(n),n=null),n===null&&(n={events:[],path:u}),n.events.push(l)}n&&s.eventLists_.push(n)}function ia(s,t,n){M4(s,n),V4(s,r=>ci(r,t)||ci(t,r))}function V4(s,t){s.recursionDepth_++;let n=!0;for(let r=0;r<s.eventLists_.length;r++){const l=s.eventLists_[r];if(l){const u=l.path;t(u)?(x4(s.eventLists_[r]),s.eventLists_[r]=null):n=!1}}n&&(s.eventLists_=[]),s.recursionDepth_--}function x4(s){for(let t=0;t<s.events.length;t++){const n=s.events[t];if(n!==null){s.events[t]=null;const r=n.getEventRunner();$o&&on("event: "+n.toString()),Eu(r)}}}const L4="repo_interrupt",U4=25;class k4{constructor(t,n,r,l){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new O4,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Oh(),this.transactionQueueTree_=new ug,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function z4(s,t,n){if(s.stats_=Zp(s.repoInfo_),s.forceRestClient_||VN())s.server_=new Dh(s.repoInfo_,(r,l,u,h)=>{L0(s,r,l,u,h)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>U0(s,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{en(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}s.persistentConnection_=new hs(s.repoInfo_,t,(r,l,u,h)=>{L0(s,r,l,u,h)},r=>{U0(s,r)},r=>{B4(s,r)},s.authTokenProvider_,s.appCheckProvider_,n),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(r=>{s.server_.refreshAuthToken(r)}),s.appCheckProvider_.addTokenChangeListener(r=>{s.server_.refreshAppCheckToken(r.token)}),s.statsReporter_=zN(s.repoInfo_,()=>new kD(s.stats_,s.server_)),s.infoData_=new MD,s.infoSyncTree_=new V0({startListening:(r,l,u,h)=>{let m=[];const _=s.infoData_.getNode(r._path);return _.isEmpty()||(m=$h(s.infoSyncTree_,r._path,_),setTimeout(()=>{h("ok")},0)),m},stopListening:()=>{}}),hg(s,"connected",!1),s.serverSyncTree_=new V0({startListening:(r,l,u,h)=>(s.server_.listen(r,u,l,(m,_)=>{const g=h(m,_);ia(s.eventQueue_,r._path,g)}),[]),stopListening:(r,l)=>{s.server_.unlisten(r,l)}})}function P4(s){const n=s.infoData_.getNode(new oe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function jS(s){return y4({timestamp:P4(s)})}function L0(s,t,n,r,l){s.dataUpdateCount++;const u=new oe(t);n=s.interceptServerDataCallback_?s.interceptServerDataCallback_(t,n):n;let h=[];if(l)if(r){const _=gh(n,g=>un(g));h=_4(s.serverSyncTree_,u,_,l)}else{const _=un(n);h=g4(s.serverSyncTree_,u,_,l)}else if(r){const _=gh(n,g=>un(g));h=p4(s.serverSyncTree_,u,_)}else{const _=un(n);h=$h(s.serverSyncTree_,u,_)}let m=u;h.length>0&&(m=dg(s,u)),ia(s.eventQueue_,m,h)}function U0(s,t){hg(s,"connected",t),t===!1&&j4(s)}function B4(s,t){Zn(t,(n,r)=>{hg(s,n,r)})}function hg(s,t,n){const r=new oe("/.info/"+t),l=un(n);s.infoData_.updateSnapshot(r,l);const u=$h(s.infoSyncTree_,r,l);ia(s.eventQueue_,r,u)}function q4(s){return s.nextWriteId_++}function j4(s){HS(s,"onDisconnectEvents");const t=jS(s),n=Oh();ep(s.onDisconnect_,ee(),(l,u)=>{const h=T4(l,u,s.serverSyncTree_,t);gS(n,l,h)});let r=[];ep(n,ee(),(l,u)=>{r=r.concat($h(s.serverSyncTree_,l,u));const h=Q4(s,l);dg(s,h)}),s.onDisconnect_=Oh(),ia(s.eventQueue_,ee(),r)}function H4(s){s.persistentConnection_&&s.persistentConnection_.interrupt(L4)}function HS(s,...t){let n="";s.persistentConnection_&&(n=s.persistentConnection_.id+":"),on(n,...t)}function FS(s,t,n){return OS(s.serverSyncTree_,t,n)||Qt.EMPTY_NODE}function fg(s,t=s.transactionQueueTree_){if(t||tf(s,t),Nl(t)){const n=QS(s,t);nt(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&F4(s,Su(t),n)}else zS(t)&&Jh(t,n=>{fg(s,n)})}function F4(s,t,n){const r=n.map(g=>g.currentWriteId),l=FS(s,t,r);let u=l;const h=l.hash();for(let g=0;g<n.length;g++){const E=n[g];nt(E.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const T=Xn(t,E.path);u=u.updateChild(T,E.currentOutputSnapshotRaw)}const m=u.val(!0),_=t;s.server_.put(_.toString(),m,g=>{HS(s,"transaction put response",{path:_.toString(),status:g});let E=[];if(g==="ok"){const T=[];for(let b=0;b<n.length;b++)n[b].status=2,E=E.concat(el(s.serverSyncTree_,n[b].currentWriteId)),n[b].onComplete&&T.push(()=>n[b].onComplete(null,!0,n[b].currentOutputSnapshotResolved)),n[b].unwatcher();tf(s,cg(s.transactionQueueTree_,t)),fg(s,s.transactionQueueTree_),ia(s.eventQueue_,t,E);for(let b=0;b<T.length;b++)Eu(T[b])}else{if(g==="datastale")for(let T=0;T<n.length;T++)n[T].status===3?n[T].status=4:n[T].status=0;else{xn("transaction at "+_.toString()+" failed: "+g);for(let T=0;T<n.length;T++)n[T].status=4,n[T].abortReason=g}dg(s,t)}},h)}function dg(s,t){const n=GS(s,t),r=Su(n),l=QS(s,n);return G4(s,l,r),r}function G4(s,t,n){if(t.length===0)return;const r=[];let l=[];const h=t.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<t.length;m++){const _=t[m],g=Xn(n,_.path);let E=!1,T;if(nt(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),_.status===4)E=!0,T=_.abortReason,l=l.concat(el(s.serverSyncTree_,_.currentWriteId,!0));else if(_.status===0)if(_.retryCount>=U4)E=!0,T="maxretry",l=l.concat(el(s.serverSyncTree_,_.currentWriteId,!0));else{const b=FS(s,_.path,h);_.currentInputSnapshot=b;const P=t[m].update(b.val());if(P!==void 0){qS("transaction failed: Data returned ",P,_.path);let X=un(P);typeof P=="object"&&P!=null&&gs(P,".priority")||(X=X.updatePriority(b.getPriority()));const $=_.currentWriteId,mt=jS(s),yt=S4(X,b,mt);_.currentOutputSnapshotRaw=X,_.currentOutputSnapshotResolved=yt,_.currentWriteId=q4(s),h.splice(h.indexOf($),1),l=l.concat(m4(s.serverSyncTree_,_.path,yt,_.currentWriteId,_.applyLocally)),l=l.concat(el(s.serverSyncTree_,$,!0))}else E=!0,T="nodata",l=l.concat(el(s.serverSyncTree_,_.currentWriteId,!0))}ia(s.eventQueue_,n,l),l=[],E&&(t[m].status=2,(function(b){setTimeout(b,Math.floor(0))})(t[m].unwatcher),t[m].onComplete&&(T==="nodata"?r.push(()=>t[m].onComplete(null,!1,t[m].currentInputSnapshot)):r.push(()=>t[m].onComplete(new Error(T),!1,null))))}tf(s,s.transactionQueueTree_);for(let m=0;m<r.length;m++)Eu(r[m]);fg(s,s.transactionQueueTree_)}function GS(s,t){let n,r=s.transactionQueueTree_;for(n=Ut(t);n!==null&&Nl(r)===void 0;)r=cg(r,n),t=le(t),n=Ut(t);return r}function QS(s,t){const n=[];return YS(s,t,n),n.sort((r,l)=>r.order-l.order),n}function YS(s,t,n){const r=Nl(t);if(r)for(let l=0;l<r.length;l++)n.push(r[l]);Jh(t,l=>{YS(s,l,n)})}function tf(s,t){const n=Nl(t);if(n){let r=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[r]=n[l],r++);n.length=r,kS(t,n.length>0?n:void 0)}Jh(t,r=>{tf(s,r)})}function Q4(s,t){const n=Su(GS(s,t)),r=cg(s.transactionQueueTree_,t);return b4(r,l=>{Am(s,l)}),Am(s,r),PS(r,l=>{Am(s,l)}),n}function Am(s,t){const n=Nl(t);if(n){const r=[];let l=[],u=-1;for(let h=0;h<n.length;h++)n[h].status===3||(n[h].status===1?(nt(u===h-1,"All SENT items should be at beginning of queue."),u=h,n[h].status=3,n[h].abortReason="set"):(nt(n[h].status===0,"Unexpected transaction status in abort"),n[h].unwatcher(),l=l.concat(el(s.serverSyncTree_,n[h].currentWriteId,!0)),n[h].onComplete&&r.push(n[h].onComplete.bind(null,new Error("set"),!1,null))));u===-1?kS(t,void 0):n.length=u+1,ia(s.eventQueue_,Su(t),l);for(let h=0;h<r.length;h++)Eu(r[h])}}function Y4(s){let t="";const n=s.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let l=n[r];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}t+="/"+l}return t}function K4(s){const t={};s.charAt(0)==="?"&&(s=s.substring(1));for(const n of s.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):xn(`Invalid query segment '${n}' in query '${s}'`)}return t}const k0=function(s,t){const n=X4(s),r=n.namespace;n.domain==="firebase.com"&&ps(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ps("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||CN();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new $1(n.host,n.secure,r,l,t,"",r!==n.subdomain),path:new oe(n.pathString)}},X4=function(s){let t="",n="",r="",l="",u="",h=!0,m="https",_=443;if(typeof s=="string"){let g=s.indexOf("//");g>=0&&(m=s.substring(0,g-1),s=s.substring(g+2));let E=s.indexOf("/");E===-1&&(E=s.length);let T=s.indexOf("?");T===-1&&(T=s.length),t=s.substring(0,Math.min(E,T)),E<T&&(l=Y4(s.substring(E,T)));const b=K4(s.substring(Math.min(s.length,T)));g=t.indexOf(":"),g>=0?(h=m==="https"||m==="wss",_=parseInt(t.substring(g+1),10)):g=t.length;const P=t.slice(0,g);if(P.toLowerCase()==="localhost")n="localhost";else if(P.split(".").length<=2)n=P;else{const X=t.indexOf(".");r=t.substring(0,X).toLowerCase(),n=t.substring(X+1),u=r}"ns"in b&&(u=b.ns)}return{host:t,port:_,domain:n,subdomain:r,secure:h,scheme:m,pathString:l,namespace:u}};class mg{constructor(t,n,r,l){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=l}get key(){return Mt(this._path)?null:aS(this._path)}get ref(){return new Dl(this._repo,this._path)}get _queryIdentifier(){const t=S0(this._queryParams),n=Kp(t);return n==="{}"?"default":n}get _queryObject(){return S0(this._queryParams)}isEqual(t){if(t=cl(t),!(t instanceof mg))return!1;const n=this._repo===t._repo,r=uS(this._path,t._path),l=this._queryIdentifier===t._queryIdentifier;return n&&r&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+lD(this._path)}}class Dl extends mg{constructor(t,n){super(t,n,new tg,!1)}get parent(){const t=oS(this._path);return t===null?null:new Dl(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}f4(Dl);d4(Dl);const Z4="FIREBASE_DATABASE_EMULATOR_HOST",up={};let $4=!1;function W4(s,t,n,r){const l=t.lastIndexOf(":"),u=t.substring(0,l),h=du(u);s.repoInfo_=new $1(t,h,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(s.authTokenProvider_=r)}function J4(s,t,n,r,l){let u=r||s.options.databaseURL;u===void 0&&(s.options.projectId||ps("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),on("Using default host for project ",s.options.projectId),u=`${s.options.projectId}-default-rtdb.firebaseio.com`);let h=k0(u,l),m=h.repoInfo,_;typeof process<"u"&&i0&&(_=i0[Z4]),_?(u=`http://${_}?ns=${m.namespace}`,h=k0(u,l),m=h.repoInfo):h.repoInfo.secure;const g=new LN(s.name,s.options,t);D4("Invalid Firebase Database URL",h),Mt(h.path)||ps("Database URL must point to the root of a Firebase Database (not including a child path).");const E=eO(m,s,g,new xN(s,n));return new nO(E,s)}function tO(s,t){const n=up[t];(!n||n[s.key]!==s)&&ps(`Database ${t}(${s.repoInfo_}) has already been deleted.`),H4(s),delete n[s.key]}function eO(s,t,n,r){let l=up[t.name];l||(l={},up[t.name]=l);let u=l[s.toURLString()];return u&&ps("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new k4(s,$4,n,r),l[s.toURLString()]=u,u}class nO{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(z4(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Dl(this._repo,ee())),this._rootInternal}_delete(){return this._rootInternal!==null&&(tO(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&ps("Cannot call "+t+" on a deleted database.")}}function iO(s=mT(),t){const n=cT(s,"database").getImmediate({identifier:t});if(!n._instanceStarted){const r=J0("database");r&&sO(n,...r)}return n}function sO(s,t,n,r={}){s=cl(s),s._checkNotDeleted("useEmulator");const l=`${t}:${n}`,u=s._repoInternal;if(s._instanceStarted){if(l===s._repoInternal.repoInfo_.host&&nu(r,u.repoInfo_.emulatorOptions))return;ps("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let h;if(u.repoInfo_.nodeAdmin)r.mockUserToken&&ps('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),h=new dh(dh.OWNER);else if(r.mockUserToken){const m=typeof r.mockUserToken=="string"?r.mockUserToken:nT(r.mockUserToken,s.app.options.projectId);h=new dh(m)}du(t)&&(eT(t),iT("Database",!0)),W4(u,l,r,h)}function rO(s){vN(fT),iu(new hl("database",(t,{instanceIdentifier:n})=>{const r=t.getProvider("app").getImmediate(),l=t.getProvider("auth-internal"),u=t.getProvider("app-check-internal");return J4(r,l,u,n)},"PUBLIC").setMultipleInstances(!0)),er(s0,r0,s),er(s0,r0,"esm2020")}hs.prototype.simpleListen=function(s,t){this.sendRequest("q",{p:s},t)};hs.prototype.echo=function(s,t){this.sendRequest("echo",{d:s},t)};rO();const aO={apiKey:"AIzaSyCub0XtA27wJfA8QzLWTRcVvsn4Wiz84H0",authDomain:"tiger-superextension-09.firebaseapp.com",projectId:"tiger-superextension-09",storageBucket:"tiger-superextension-09.firebasestorage.app",messagingSenderId:"523127017746",appId:"1:523127017746:web:c58418b3ad5009509823cb",measurementId:"G-53CSV68T7D"},KS=dT(aO,"extension-app"),lO=JI(KS);iO(KS);const oO=async s=>{try{const t=WI(lO,`users/${s}/history`),n=fN(t,dN("timestamp","desc"),mN(50));return(await yN(n)).docs.map(l=>({id:l.id,...l.data()}))}catch{return[]}};const uO=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cO=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),z0=s=>{const t=cO(s);return t.charAt(0).toUpperCase()+t.slice(1)},XS=(...s)=>s.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),hO=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var fO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dO=Tt.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:l="",children:u,iconNode:h,...m},_)=>Tt.createElement("svg",{ref:_,...fO,width:t,height:t,stroke:s,strokeWidth:r?Number(n)*24/Number(t):n,className:XS("lucide",l),...!u&&!hO(m)&&{"aria-hidden":"true"},...m},[...h.map(([g,E])=>Tt.createElement(g,E)),...Array.isArray(u)?u:[u]]));const ef=(s,t)=>{const n=Tt.forwardRef(({className:r,...l},u)=>Tt.createElement(dO,{ref:u,iconNode:t,className:XS(`lucide-${uO(z0(s))}`,`lucide-${s}`,r),...l}));return n.displayName=z0(s),n};const mO=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],pO=ef("arrow-left",mO);const gO=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],_O=ef("calendar",gO);const yO=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],vO=ef("mail",yO);const EO=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],TO=ef("refresh-cw",EO),SO=({item:s,onClick:t})=>{const n=new Date(s.date),r=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),u=n.toDateString()===new Date().toDateString()?r:n.toLocaleDateString([],{month:"short",day:"numeric"});return bt.jsxs("div",{onClick:t,className:"bg-white p-4 border-b border-gray-100 active:bg-gray-50 transition-colors cursor-pointer",children:[bt.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[bt.jsxs("h3",{className:"font-semibold text-gray-900 truncate pr-2 flex-1",children:[s.summary.slice(0,30),"..."]}),bt.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:u})]}),bt.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 leading-relaxed",children:s.summary})]})},AO=({item:s,onBack:t})=>bt.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col animate-slide-in-right",children:[bt.jsxs("div",{className:"h-14 border-b border-gray-100 flex items-center px-4 gap-4 sticky top-0 bg-white/80 backdrop-blur-md",children:[bt.jsx("button",{onClick:t,className:"p-2 -ml-2 hover:bg-gray-100 rounded-full",children:bt.jsx(pO,{className:"w-5 h-5 text-gray-600"})}),bt.jsx("div",{className:"flex-1 truncate font-semibold",children:"Summary Details"})]}),bt.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[bt.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mb-6",children:[bt.jsx(_O,{className:"w-3 h-3"}),new Date(s.date).toLocaleString()]}),bt.jsx("div",{className:"prose prose-sm max-w-none text-gray-800 leading-relaxed whitespace-pre-wrap",children:s.summary})]})]}),bO=()=>{const[s,t]=Tt.useState(null),[n,r]=Tt.useState(!0),[l,u]=Tt.useState([]),[h,m]=Tt.useState(null),[_,g]=Tt.useState(!1);Tt.useEffect(()=>{const b=DC(async P=>{t(P),P&&await E(P.id),r(!1)});return()=>b()},[]);const E=async b=>{g(!0);const P=await oO(b);u(P||[]),g(!1)},T=async()=>{try{await IC()}catch{Y0.error("Login failed. Please try again.")}};return n?bt.jsx("div",{className:"h-screen flex items-center justify-center",children:bt.jsx("div",{className:"w-6 h-6 border-2 border-black border-t-transparent rounded-full animate-spin"})}):s?bt.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[bt.jsxs("div",{className:"sticky top-0 bg-white/80 backdrop-blur-md border-b border-gray-200 px-4 h-14 flex items-center justify-between z-10",children:[bt.jsx("div",{className:"font-bold text-lg tracking-tight",children:"Inbox"}),bt.jsxs("div",{className:"flex items-center gap-3",children:[bt.jsx("button",{onClick:()=>E(s.id),className:`p-2 hover:bg-gray-100 rounded-full ${_?"animate-spin":""}`,children:bt.jsx(TO,{className:"w-4 h-4 text-gray-600"})}),bt.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 overflow-hidden border border-gray-300",onClick:()=>{confirm("Logout?")&&NC()},children:s.picture?bt.jsx("img",{src:s.picture,className:"w-full h-full"}):bt.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs",children:s.name?.[0]})})]})]}),bt.jsx("div",{className:"divide-y divide-gray-100",children:l.length===0?bt.jsxs("div",{className:"py-20 text-center text-gray-400",children:[bt.jsx(vO,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),bt.jsx("p",{children:"No summaries yet"})]}):l.map(b=>bt.jsx(SO,{item:b,onClick:()=>m(b)},b.id))}),h&&bt.jsx(AO,{item:h,onBack:()=>m(null)})]}):bt.jsxs("div",{className:"h-screen flex flex-col items-center justify-center p-8 bg-white text-center space-y-6",children:[bt.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mb-4",children:bt.jsx("img",{src:"/src/assets/logo.png",alt:"Logo",className:"w-10 h-10 opacity-80"})}),bt.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Summarai Mobile"}),bt.jsx("p",{className:"text-gray-500",children:"Access your extension history on the go."}),bt.jsx("button",{onClick:T,className:"w-full py-3 bg-black text-white rounded-xl font-medium shadow-lg shadow-black/20 active:scale-95 transition-transform",children:"Sign in with Google"}),bt.jsx("p",{className:"text-xs text-gray-400 mt-8",children:"Add to Home Screen for the best experience."})]})};CC.createRoot(document.getElementById("root")).render(bt.jsxs(Nb.StrictMode,{children:[bt.jsx(bO,{}),bt.jsx(_C,{position:"top-center"})]}));

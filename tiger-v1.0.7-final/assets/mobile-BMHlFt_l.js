import{c as y,R as b,j as e,a as f,F as p,r as a,s as j,l as w,b as N,z as v}from"./createLucideIcon-CfY4lJMg.js";import{g as k,R as S,M as L,A as D}from"./firebase-extension-C89zkgnU.js";const M=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],C=y("calendar",M),I=({item:s,onClick:r})=>{const i=new Date(s.date),c=i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),o=i.toDateString()===new Date().toDateString()?c:i.toLocaleDateString([],{month:"short",day:"numeric"});return e.jsxs("div",{onClick:r,className:"bg-white p-4 border-b border-gray-100 active:bg-gray-50 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 truncate pr-2 flex-1",children:[s.summary.slice(0,30),"..."]}),e.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:o})]}),e.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 leading-relaxed",children:s.summary})]})},R=({item:s,onBack:r})=>e.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col animate-slide-in-right",children:[e.jsxs("div",{className:"h-14 border-b border-gray-100 flex items-center px-4 gap-4 sticky top-0 bg-white/80 backdrop-blur-md",children:[e.jsx("button",{onClick:r,className:"p-2 -ml-2 hover:bg-gray-100 rounded-full",children:e.jsx(D,{className:"w-5 h-5 text-gray-600"})}),e.jsx("div",{className:"flex-1 truncate font-semibold",children:"Summary Details"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mb-6",children:[e.jsx(C,{className:"w-3 h-3"}),new Date(s.date).toLocaleString()]}),e.jsx("div",{className:"prose prose-sm max-w-none text-gray-800 leading-relaxed whitespace-pre-wrap",children:s.summary})]})]}),A=()=>{const[s,r]=a.useState(null),[i,c]=a.useState(!0),[l,o]=a.useState([]),[d,x]=a.useState(null),[g,m]=a.useState(!1);a.useEffect(()=>{const t=j(async n=>{r(n),n&&await h(n.id),c(!1)});return()=>t()},[]);const h=async t=>{m(!0);const n=await k(t);o(n||[]),m(!1)},u=async()=>{try{await N()}catch{v.error("Login failed. Please try again.")}};return i?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 border-2 border-black border-t-transparent rounded-full animate-spin"})}):s?e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsxs("div",{className:"sticky top-0 bg-white/80 backdrop-blur-md border-b border-gray-200 px-4 h-14 flex items-center justify-between z-10",children:[e.jsx("div",{className:"font-bold text-lg tracking-tight",children:"Inbox"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>h(s.id),className:`p-2 hover:bg-gray-100 rounded-full ${g?"animate-spin":""}`,children:e.jsx(S,{className:"w-4 h-4 text-gray-600"})}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 overflow-hidden border border-gray-300",onClick:()=>{confirm("Logout?")&&w()},children:s.picture?e.jsx("img",{src:s.picture,className:"w-full h-full"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs",children:s.name?.[0]})})]})]}),e.jsx("div",{className:"divide-y divide-gray-100",children:l.length===0?e.jsxs("div",{className:"py-20 text-center text-gray-400",children:[e.jsx(L,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),e.jsx("p",{children:"No summaries yet"})]}):l.map(t=>e.jsx(I,{item:t,onClick:()=>x(t)},t.id))}),d&&e.jsx(R,{item:d,onBack:()=>x(null)})]}):e.jsxs("div",{className:"h-screen flex flex-col items-center justify-center p-8 bg-white text-center space-y-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mb-4",children:e.jsx("img",{src:"/src/assets/logo.png",alt:"Logo",className:"w-10 h-10 opacity-80"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Summarai Mobile"}),e.jsx("p",{className:"text-gray-500",children:"Access your extension history on the go."}),e.jsx("button",{onClick:u,className:"w-full py-3 bg-black text-white rounded-xl font-medium shadow-lg shadow-black/20 active:scale-95 transition-transform",children:"Sign in with Google"}),e.jsx("p",{className:"text-xs text-gray-400 mt-8",children:"Add to Home Screen for the best experience."})]})};b.createRoot(document.getElementById("root")).render(e.jsxs(f.StrictMode,{children:[e.jsx(A,{}),e.jsx(p,{position:"top-center"})]}));

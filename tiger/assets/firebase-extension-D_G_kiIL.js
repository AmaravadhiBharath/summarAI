import{i as m,g as y,c as i,q as d,o as g,l as h,a as n,d as c,s as p,b as u}from"./firebase-firestore-Bn4Lp4iP.js";const l={apiKey:"AIzaSyCub0XtA27wJfA8QzLWTRcVvsn4Wiz84H0",authDomain:"tiger-superextension-09.firebaseapp.com",projectId:"tiger-superextension-09",storageBucket:"tiger-superextension-09.firebasestorage.app",messagingSenderId:"523127017746",appId:"1:523127017746:web:c58418b3ad5009509823cb",measurementId:"G-53CSV68T7D"},f=m(l,"extension-app"),o=y(f),b=async(e,s,r)=>{try{const t=c(i(o,`users/${e}/history`));await p(t,{summary:s,url:r,timestamp:new Date().toISOString()})}catch{}},D=async e=>{try{const s=i(o,`users/${e}/history`),r=d(s,g("timestamp","desc"),h(50));return(await n(r)).docs.map(a=>({id:a.id,...a.data()}))}catch{return[]}},I=async e=>{try{const s=i(o,`users/${e}/history`),t=(await n(s)).docs.map(a=>u(a.ref));await Promise.all(t)}catch(s){throw s}},S=async e=>{try{const s=c(o,"users",e.id);await p(s,{email:e.email,name:e.name,picture:e.picture,lastLogin:new Date().toISOString()},{merge:!0})}catch(s){throw s}};export{b as a,I as c,D as g,S as s};
